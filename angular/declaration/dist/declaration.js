!function(e){function t(l){if(a[l])return a[l].exports;var i=a[l]={exports:{},id:l,loaded:!1};return e[l].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){a(109);var l=a(63),i=a(60);angular.module("declaration",["declaration.views",l,i])},function(e,t,a){var l=a(2),i=a(3),n="declaration.rpc";angular.module(n,["ui.bootstrap"]),angular.module(n).service("rpcService",["declarationResource","userService","unauthorizedPopInService",i]),angular.module(n).controller("rpcCtrl",["rpcService","$uibModal","$scope","$location","$window",l]),angular.module(n).component("rpc",{template:a(14),controller:"rpcCtrl",controllerAs:"rpcCtrl",bindings:{}}),e.exports=n},function(e,t,a){e.exports=function(e,t,l,i,n){function o(e){u.modal_instance&&u.modal_instance.close(),u.modal_instance=t.open({template:a(116)(e),scope:l,backdrop:"static",keyboard:!1})}const r="Ok",c="InvalidCode",s="ExpiredCode",d="Locked";var u=this;u.client_number_SAP,u.rpcs,u.stepPopin,u.modal_instance;var p=2,m=20;u.diplayMoreState=!1,u.maxToDisplayMultiplicator=1,u.validerState=!1,u.eltModel="",u.someVal="",u.result="",u.expertsList=[],u.expertsListTemp=[],u.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0,ville:void 0},u.details={id:void 0,idClient:void 0,annee:void 0,montant:void 0,raisonSociale:void 0,siren:void 0,idSignataire:void 0,iddeletion:void 0,mandataireKindToDelete:void 0},u.xmail="",u.xname="",u.xcivility="",u.IsModification=!1,u.DeletionOK=!1,u.selectedRpc=null,u.invalidCode=!1,u.no_contact_found=!1,u.AnneeContractualisation="",this.$onInit=function(){u.userInfo=e.getUserInfos(),u.client_number_SAP=u.userInfo.idClientSAP,console.log("init"),console.log("Client number SAP: "+u.client_number_SAP),e.getAnneesContractualisations(u.client_number_SAP).then(function(e){u.AnneeContractualisation=e.data,console.log("self.AnneeContractualisation"+JSON.stringify(e)+"      "+u.AnneeContractualisation)},function(e){console.error("error retrieving date contractualisation: "+JSON.stringify(e)),u.errors=e.data}).finally(function(){}),e.getRpcs(u.client_number_SAP).then(function(e){u.status_code_attestation=200,u.rpcs=e.data;for(var t=0;t<u.rpcs.length;t++)console.log("for"),u.rpcs[t].Exist=u.RpcFileExist(u.client_number_SAP,u.rpcs[t])},function(e){u.status_code_attestation=e.status,console.error("submit - error : "+JSON.stringify(e)),u.errors=e.data}).finally(function(){})},u.RpcFileExist=function(t,a){console.log("getrpc file ctrl"),e.RpcFileExist(t,a.Annee).then(function(e){a.Exist=e.data[0].Exist,console.log("rep"+JSON.stringify(e)),console.log("Rpc annee: "+a.Annee+" Exist: "+a.Exist)},function(e){console.error("submit - error : "+JSON.stringify(e)),u.errors=e.data}).finally(function(){})},u.getRpcFile=function(t,a){console.log("getrpc file attachement ctrl"),u.rpcSelectedannee=a.Annee,console.log("annee: "+u.rpcSelectedannee),e.getRpcFile(u.client_number_SAP,u.rpcSelectedannee).then(function(e){console.log("rpc vérification retour : ",e.data),u.rpcObject=[],e.data.length>0&&(u.rpcObject.push({Annee:e.data[0].Annee,NomFichier:e.data[0].NomFichier,TypeMime:e.data[0].TypeMime,Taille:e.data[0].Taille,DateImport:e.data[0].DateImport,UrlRpc:e.data[0].UrlRpc}),console.log("Rpc annee: "+u.rpcObject[0].Annee+" NomFichier: "+u.rpcObject[0].NomFichier),console.log("action: "+t),1==t?v(u.rpcObject[0].UrlRpc+"?display=inline"):n.location.href=u.rpcObject[0].UrlRpc+"?display=attachement")},function(e){console.error("submit - error : "+JSON.stringify(e)),u.errors=e.data}).finally(function(){})};var v=function(e){var t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),console.log("genrated file link : ",t),t.click()};this.erreurAuth=function(){u.modal_instance&&u.modal_instance.close(),u.loading=!0,u.modal_instance=t.open({template:a(6),scope:l,backdrop:"static",keyboard:!1})},u.erreurConflict=function(){u.modal_instance&&u.modal_instance.close(),u.loading=!0,u.modal_instance=t.open({template:a(7),scope:l,backdrop:"static",keyboard:!1})},u.erreurSurvenue=function(){u.modal_instance&&u.modal_instance.close(),u.loading=!0,u.modal_instance=t.open({template:a(8),scope:l,backdrop:"static",keyboard:!1})},u.impossibleModifier=function(){u.modal_instance&&u.modal_instance.close(),u.loading=!0,u.modal_instance=t.open({template:a(9),scope:l,backdrop:"static",keyboard:!1})},u.successlaunch=function(){u.modal_instance&&u.modal_instance.close(),u.loading=!0,u.modal_instance=t.open({template:a(5),scope:l,backdrop:"static",keyboard:!1})},this.ChoixExpert=function(){console.log("test : "+u.ec+" modif ? :  "+u.IsModification),u.modal_instance&&u.modal_instance.close(),u.modal_instance=t.open({template:a(10),scope:l,backdrop:"static",keyboard:!1})},this.closeModal=function(){u.expertsList.length=0,u.diplayMoreState=!1,u.validerState=!1,u.maxToDisplayMultiplicator=1,u.ec="",u.someVal="",u.result="",u.expertsList.length=0,u.expertsListTemp.length=0,u.modal_instance.close(),u.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0,ville:void 0},u.IsModification=!1,u.DeletionOK=!1,u.details={id:void 0,idClient:void 0,annee:void 0,montant:void 0,raisonSociale:void 0,siren:void 0,idSignataire:void 0,iddeletion:void 0,mandataireKindToDelete:void 0},u.no_contact_found=!1,u.AnneeContractualisation="",u.$onInit()},u.textChanged=function(){u.no_contact_found=!1,u.expertsList.length=0,u.expertsListTemp.length=0,u.diplayMoreState=!1,u.validerState=!1,u.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0},u.maxToDisplayMultiplicator=1,u.someVal.length>=p?("EC"==u.ec&&e.GetExpertsByName(u.someVal,m*u.maxToDisplayMultiplicator).then(function(e){if(u.someVal.length>=p)if(console.log("REPONSE : ",e.data),u.expertsList.length=0,u.diplayMoreState=!1,200==e.status){if(Array.isArray(e.data.contacts))for(var t in e.data.contacts)u.expertsList.push({adresse:e.data.contacts[t].adresse,civilite:e.data.contacts[t].civilite,code_postal:e.data.contacts[t].code_postal,email:e.data.contacts[t].email,nom:e.data.contacts[t].nom,prenom:e.data.contacts[t].prenom,qualite:e.data.contacts[t].qualite,uniquecsoecid:e.data.contacts[t].uniquecsoecid,ville:e.data.contacts[t].ville});else u.expertsList.push({adresse:e.data.contacts.adresse,civilite:e.data.contacts.civilite,code_postal:e.data.contacts.code_postal,email:e.data.contacts.email,nom:e.data.contacts.nom,prenom:e.data.contacts.prenom,qualite:e.data.contacts.qualite,uniquecsoecid:e.data.contacts.uniquecsoecid,ville:e.data.contacts.ville});"false"==e.data.fin&&(u.diplayMoreState=!0)}else 204==e.status&&(console.log("no contact found"),u.no_contact_found=!0);else u.result="",u.expertsList.length=0,u.expertsListTemp.length=0,u.diplayMoreState=!1,u.validerState=!1,u.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0},u.maxToDisplayMultiplicator=1},function(e){u.no_contact_found=!0,console.error(" - error : "+JSON.stringify(e))}).finally(function(){}),"CAC"==u.ec&&e.GetCacByNames(u.someVal,m*u.maxToDisplayMultiplicator).then(function(e){if(u.someVal.length>=p)if(console.log("CAC REPONSE : ",e.data),u.expertsList.length=0,u.diplayMoreState=!1,200==e.status){if(u.no_contact_found=!1,Array.isArray(e.data.data))if(e.data.data.length>0)for(var t=0;t<e.data.data.length;t++)u.expertsList.push({adresse:e.data.data[t].adresse,civilite:e.data.data[t].civilite,code_postal:e.data.data[t].code_postal,email:e.data.data[t].email,nom:e.data.data[t].nom,prenom:e.data.data[t].prenom,ville:e.data.data[t].ville,id:e.data.data[t].id});else u.no_contact_found=!0;else console.log("we shouldnt come here CAC");0==e.data.fin&&(u.diplayMoreState=!0,console.log("self.displaymorestate  "+u.diplayMoreState))}else u.no_contact_found=!0,console.log("Bad Request _ no 400");else console.log("inferior to min of 2"),u.result="",u.expertsList.length=0,u.expertsListTemp.length=0,u.diplayMoreState=!1,u.validerState=!1,u.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0},u.maxToDisplayMultiplicator=1},function(e){u.no_contact_found=!0,console.error(" error : "+JSON.stringify(e.data))}).finally(function(){})):(u.result="",u.expertsList.length=0,u.expertsListTemp.length=0,u.diplayMoreState=!1,u.validerState=!1,u.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0},u.maxToDisplayMultiplicator=1)},u.displayMore=function(){u.maxToDisplayMultiplicator=u.maxToDisplayMultiplicator+1,u.diplayMoreState=!1,u.validerState=!1,u.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0,ville:void 0},u.expertsListTemp.length=0,u.someVal.length>=p?("EC"==u.ec&&e.GetExpertsByName(u.someVal,m*u.maxToDisplayMultiplicator).then(function(e){if(console.log("EC REPONSE : ",e.data),200==e.status){if(Array.isArray(e.data.contacts)){for(var t in e.data.contacts)u.expertsListTemp.push({adresse:e.data.contacts[t].adresse,civilite:e.data.contacts[t].civilite,code_postal:e.data.contacts[t].code_postal,email:e.data.contacts[t].email,nom:e.data.contacts[t].nom,prenom:e.data.contacts[t].prenom,qualite:e.data.contacts[t].qualite,uniquecsoecid:e.data.contacts[t].uniquecsoecid,ville:e.data.contacts[t].ville});for(var a=m*(u.maxToDisplayMultiplicator-1);a<u.expertsListTemp.length;a++)u.expertsList.push(u.expertsListTemp[a])}"false"==e.data.fin&&(u.diplayMoreState=!0)}else 204==e.status&&console.log("no contact found")},function(e){console.error(" - error : "+JSON.stringify(e))}).finally(function(){}),"CAC"==u.ec&&e.GetCacByNames(u.someVal,m*u.maxToDisplayMultiplicator).then(function(e){if(console.log("CAC REPONSE : ",e.data),200==e.status){if(Array.isArray(e.data.data)){for(var t=0;t<e.data.data.length;t++)u.expertsListTemp.push({adresse:e.data.data[t].adresse,civilite:e.data.data[t].civilite,code_postal:e.data.data[t].code_postal,email:e.data.data[t].email,nom:e.data.data[t].nom,prenom:e.data.data[t].prenom,ville:e.data.data[t].ville,id:e.data.data[t].id});for(var a=m*(u.maxToDisplayMultiplicator-1);a<u.expertsListTemp.length;a++)u.expertsList.push(u.expertsListTemp[a])}0==e.data.fin&&(u.diplayMoreState=!0)}else 400==e.status&&console.log("Bad Request")},function(e){console.error(" error : "+JSON.stringify(e.data))}).finally(function(){})):u.result=""},u.eltSelected=function(e){u.validerState=!0,u.eltChosen.adresse=e.adresse,u.eltChosen.civilite=e.civilite,u.eltChosen.code_postal=e.code_postal,u.eltChosen.email=e.email,u.eltChosen.nom=e.nom,u.eltChosen.prenom=e.prenom,"EC"==u.ec?(console.log("Elt selected EC"),u.eltChosen.qualite=e.qualite,u.eltChosen.uniquecsoecid=e.uniquecsoecid):(console.log("Elt selected CAC"),u.eltChosen.uniquecsoecid=e.id),u.eltChosen.ville=e.ville,console.log("Selected is "+u.eltChosen.nom+"  "+u.eltChosen.uniquecsoecid)},u.modification=function(){if(console.log("inside modification   mandatairekindtodelete "+u.mandataireKindToDelete),e.IsConseiller())console.log("Non Authorisé Car Conseiller "),e.unAuthPopinOpen();else{if(console.log("Pas Conseiller "),"EC"==u.mandataireKindToDelete)return e.ExpertsDeleteProjects(u.details.iddeletion).then(function(t){200!=t.status&&201!=t.status||(console.log("Deleted EC "+JSON.stringify(t.data)),u.DeletionOK=!0,console.log("deletion OK "+u.DeletionOK),console.log("Starting Saving into BDD"),e.UpdateCancelMissions(u.details.iddeletion).then(function(e){200==e.status&&console.log("UPDATED IN DB EC "+JSON.stringify(e.data))},function(e){404==e.status?(console.log("Bad Request EC "+JSON.stringify(e)),u.erreurConflict()):401==e.status||402==e.status||403==e.status?(console.log("Non Authorisé EC "+JSON.stringify(e)),u.erreurAuth()):500==e.status&&(console.log("Erreur EC "+JSON.stringify(e)),u.erreurAuth())}).finally(function(){}))},function(e){404==e.status?(console.log("Bad Request EC "+JSON.stringify(e)),u.erreurSurvenue()):401==e.status||402==e.status||403==e.status?(console.log("Non Authorisé EC "+JSON.stringify(e)),u.erreurAuth()):500==e.status&&(console.log("Erreur EC "+JSON.stringify(e)),u.impossibleModifier())}).finally(function(){});if("CAC"==u.mandataireKindToDelete)return e.CacDeleteProjects(u.details.iddeletion).then(function(t){200!=t.status&&201!=t.status||(console.log("Deleted CAC "+JSON.stringify(t.data)),u.DeletionOK=!0,e.UpdateCancelMissions(u.details.iddeletion).then(function(e){200!=e.status&&201!=e.status||console.log("UPDATED IN DB CAC "+JSON.stringify(e.data))},function(e){404==e.status?(console.log("Bad Request EC "+JSON.stringify(e)),u.erreurConflict()):401==e.status||402==e.status||403==e.status?(console.log("Non Authorisé EC "+JSON.stringify(e)),u.erreurAuth()):500==e.status&&(console.log("Erreur EC "+JSON.stringify(e)),u.erreurConflict())}).finally(function(){}))},function(e){404==e.status?(console.log("Bad Request EC "+JSON.stringify(e)),u.erreurSurvenue()):401==e.status||402==e.status||403==e.status?(console.log("Non Authorisé EC "+JSON.stringify(e)),u.erreurAuth()):500==e.status&&(console.log("Erreur EC "+JSON.stringify(e)),u.impossibleModifier())}).finally(function(){})}},u.createRPCOnlyEC=function(){console.log("creation EC"),console.log("id:  "+u.details.id),console.log("idclient: "+u.details.idClient),console.log("annee:  "+u.details.annee),console.log("montant: "+u.details.montant),console.log("raison sociale: "+u.details.raisonSociale),console.log("siren:  "+u.details.siren),console.log("signataire:  "+u.details.idSignataire),e.IsConseiller()?(console.log("Non Authorisé Car Conseiller "),e.unAuthPopinOpen()):(console.log("Pas Conseiller "),e.PostExpertsCreateProject(u.details.id,u.details.idClient,u.details.annee,u.details.montant,u.details.raisonSociale,u.details.siren,u.details.idSignataire).then(function(t){201==t.status&&(console.log("Created  "+t.data),e.SaveNewMissions(u.details.id,e.getUserInfo().idClientSAP,u.details.annee,u.details.montant,u.details.idSignataire,u.eltChosen.nom,u.eltChosen.civilite,u.eltChosen.email,"EC",1).then(function(e){201!=e.status&&200!=e.status||(console.log("Created in DB  "+e.data),u.successlaunch())},function(e){console.log("Erreur while saving "),console.log("ERROR BUT NO POP UP 1 ")}).finally(function(){}))},function(e){409==e.status?(console.log("Conflict while creating mission EC "),u.erreurConflict()):400==e.status?(console.log("BAd Request while creating mission EC "),u.erreurSurvenue()):401==e.status||402==e.status||403==e.status?(console.log("Non Authorisé while creating mission EC "),u.erreurAuth()):500==e.status&&(console.log("Erreur while creating mission EC "),u.erreurSurvenue())}).finally(function(){}))},u.createRPCOnlyCAC=function(){console.log("creation CAC"),console.log("id:  "+u.details.id),console.log("idclient: "+u.details.idClient),console.log("annee:  "+u.details.annee),console.log("montant: "+u.details.montant),console.log("raison sociale: "+u.details.raisonSociale),console.log("siren:  "+u.details.siren),console.log("signataire:  "+u.details.idSignataire);var t={id:u.details.id,idClient:u.details.idClient,annee:u.details.annee,montant:u.details.montant,siren:u.details.siren,idSignataire:u.details.idSignataire};e.IsConseiller()?(console.log("Non Authorisé Car Conseiller "),e.unAuthPopinOpen()):(console.log("Pas Conseiller "),e.PostCacCreateProject(t).then(function(t){201!=t.status&&200!=t.status||(console.log("Created CAC "+t.data),e.SaveNewMissions(u.details.id,e.getUserInfo().idClientSAP,u.details.annee,u.details.montant,u.details.idSignataire,u.eltChosen.nom,u.eltChosen.civilite,u.eltChosen.email,"CAC",1).then(function(e){((e.status=201)||(e.status=200))&&(console.log("Created in DB  "+e.data),u.successlaunch())},function(e){console.log("Erreur while saving "+JSON.stringify(e)),console.log("ERROR BUT NO POP UP 2 ")}).finally(function(){}))},function(e){409==e.status?(console.log("Conflict "+JSON.stringify(e)),u.erreurConflict()):400==e.status?(console.log("BAd Request"+JSON.stringify(e)),u.erreurSurvenue()):401==e.status||402==e.status||403==e.status?(console.log("Non Authorisé"+JSON.stringify(e)),u.erreurAuth()):500==e.status&&(console.log("Erreur"+JSON.stringify(e)),u.erreurSurvenue())}).finally(function(){}))},u.createRPC=function(){e.IsConseiller()?(console.log("Non Authorisé Car Conseiller "),e.unAuthPopinOpen()):(console.log("Pas Conseiller "),"EC"==u.ec&&(u.details.id=e.generateId(),u.details.idClient=e.getUserInfo().idClientSAP,u.details.raisonSociale=e.getUserInfo().clientName,u.details.idSignataire=u.eltChosen.uniquecsoecid,e.getSirets(e.getUserInfo().idClientSAP).then(function(t){console.log("Id client SAP: "+e.getUserInfo().idClientSAP),console.log("Siret EC response "+t.data),console.log("Siret Ec: "+t.data.Siret),null==t.data.Siret?u.details.siren="":u.details.siren=t.data.Siret.slice(0,9),console.log("Siren EC: "+u.details.siren),u.IsModification&&(console.log("modification in progress EC"),u.modification().then(function(e){console.log("modification done EC"),console.log("deletion OK "+u.DeletionOK),1==u.DeletionOK&&(console.log("starting creation of new table EC"),u.createRPCOnlyEC(),console.log("starting creation of new table EC"))})),0==u.IsModification&&(console.log("creation EC Is not Modif "),u.createRPCOnlyEC())},function(e){console.log("Erreur siren EC")}).finally(function(){})),"CAC"==u.ec&&(u.details.id=e.generateId(),u.details.idClient=e.getUserInfo().idClientSAP,u.details.raisonSociale=e.getUserInfo().clientName,u.details.idSignataire=u.eltChosen.uniquecsoecid,e.getSirets(e.getUserInfo().idClientSAP).then(function(t){console.log("Id client SAP: "+e.getUserInfo().idClientSAP),console.log("Siret CAC response "+t.data),console.log("Siret CAC: "+t.data.Siret),null==t.data.Siret?u.details.siren="":u.details.siren=t.data.Siret.slice(0,9),console.log("Siren CAC: "+u.details.siren),u.IsModification&&(console.log("modification in progress CAC"),u.modification().then(function(e){console.log("modification done CAC"),console.log("deletion OK "+u.DeletionOK),1==u.DeletionOK&&(console.log("starting creation of new table CAC"),u.createRPCOnlyCAC(),console.log("starting creation of new table CAC"))})),0==u.IsModification&&(console.log(" launching  creation CAC"),u.createRPCOnlyCAC())},function(e){console.log("Erreur siren CAC ")}).finally(function(){})))},this.lancement=function(e){console.log("lancement"),u.modal_instance&&u.modal_instance.close(),u.loading=!0,u.modal_instance=t.open({template:a(11),scope:l,backdrop:"static",keyboard:!1}),console.log("before fillDetails"),console.log("annee: "+e.Annee),u.fillDetails(e.Annee,0,"","")},this.changeMission=function(e){u.modal_instance&&u.modal_instance.close(),u.loading=!0,u.IsModification=!0,u.modal_instance=t.open({template:a(12),scope:l,backdrop:"static",keyboard:!1}),console.log("before fillDetails"),console.log("annee: "+e.Annee),console.log("mission Id: "+e.MissionId),console.log("type expert: "+e.TypeExpert),u.mandataireKindToDelete=e.TypeExpert,u.fillDetails(e.Annee,0,e.MissionId,e.TypeExpert)},this.codeActivation=function(e){console.log("codeActivation"),u.modal_instance&&u.modal_instance.close(),u.selectedRpc=e,u.loading=!0,u.IsModification=!0,u.modal_instance=t.open({template:a(13),scope:l,backdrop:"static",keyboard:!1})},u.fillDetails=function(t,a,l,i){u.details.annee=t,e.getAmounts(e.getUserInfo().idClientSAP,t).then(function(e){201!=e.status&&200!=e.status||(console.log(" amount charged "),"undefined"==e.data?u.details.montant=0:u.details.montant=e.data,console.log("montant: "+u.details.montant))},function(e){console.log("failed amount charged  ")}).finally(function(){}),u.details.iddeletion=l,u.details.mandataireKindToDelete=i,console.log("inside fillDetails"),console.log("annee: "+t),console.log("mission Id: "+l),console.log("type expert: mmandataireKindToDelete"+i),console.log("type expert: self.details.mandataireKindToDelete"+u.details.mandataireKindToDelete)},this.validationCode=function(){u.invalidCode=!1,u.loading=!0;var t={MissionId:u.selectedRpc.MissionId,Annee:u.selectedRpc.Annee,IdClient:u.client_number_SAP,ActivationCode:u.mCodeActivation};console.log("validationCode - postData",t),e.activateCode(t).then(function(e){var t=e.data.ResultCode;switch(console.log("validationCode - resultCode",t),t){case r:o("./popInCodeActivationSuccess.html");break;case c:console.log("activationCodeInvalid"),u.invalidCode=!0;break;case s:o("./popInCodeActivationExpired.html");break;case d:o("./popInCodeActivationLocked.html");break;default:o("./popInCodeActivationError.html")}},function(e){o("./popInCodeActivationError.html")}).finally(function(){u.loading=!1})},u.codeFocus=function(){u.invalidCode=!1}}},function(e,t){function a(e,t,a){var l=this;return this.getRpcs=e.getRpcs,this.RpcFileExist=e.RpcFileExist,this.getRpcFile=e.getRpcFile,this.user={numero_client:void 0,id_declarant:void 0},this.getUserInfos=function(){return l.user.numero_client=t.getUserIdSAP(),l.user.id_declarant=t.getUserIdCorrespondent(),l.user.id_SF=t.getUserIdSF(),l.user.idClientSAP=t.getUserIdSAP(),l.user},l.GetExpertsByName=function(t,a){return e.GetExpertByName(t,a)},l.unAuthPopinOpen=function(){a.open()},l.PostExpertsCreateProject=function(t,a,l,i,n,o,r){return e.ExpertsCreateProject(t,a,l,i,n,o,r)},l.ExpertsDeleteProjects=function(t){return console.log("deleting projects id "+t),e.ExpertsDeleteProject(t)},l.ExpertsGetProjects=function(t){return e.ExpertsGetProject(t)},l.GetCacByNames=function(t,a){return e.GetCacByName(t,a)},l.PostCacCreateProject=function(t){return e.CacCreateProject(t)},l.CacDeleteProjects=function(t){return e.CacDeleteProject(t)},l.activateCode=function(t){return e.activateCacCode(t)},l.getAnneesContractualisations=function(t){return e.getAnneesContractualisation(t)},l.getUserInfo=function(){return l.user=t.getUser(),l.user},l.IsConseiller=function(){return t.isConseiller()},l.getSAPCustomed=function(){var e=l.getUserInfo().idClientSAP;if(console.log("sapcustomed: "+l.getUserInfo().idClientSAP),"A"==e.toString().charAt(0)||"a"==e.toString().charAt(0))return console.log("sapcustomed: ADELPHE:  "+l.getUserInfo().idClientSAP),e;if(e.toString().length<10){for(var t=10-e.length,a=0;a<t;a++)e="0"+e;return console.log("sapcustomed: CITEO:  "+l.getUserInfo().idClientSAP),e}},l.generateId=function(){var e=new Date,t=e.getDate(),a=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),l=a[e.getMonth()],i=e.getFullYear(),n=e.getHours()>12?e.getHours()-12:e.getHours()<10?"0"+e.getHours():e.getHours(),o=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),r=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return t<10&&(t="0"+t),e=i+l+t+n+o+r},l.getSiren=function(t){return e.getSiren(t)},l.SaveNewMissions=function(t,a,l,i,n,o,r,c,s,d){return e.SaveNewMission(t,a,l,i,n,o,r,c,s,d)},l.UpdateCancelMissions=function(t){return e.UpdateCancelMission(t)},l.getAmounts=function(t,a){return e.getAmount(t,a)},l.getSirets=function(t){return e.getSiret(t)},l}e.exports=a},function(e,t){e.exports="<div class=mymodal> <h1>{{'labels.declaration.uvc.popin_suppression.TITLE' | translate}}</h1> <a class=close-icon ng-click=historiqueCtrl.closeModalSuppression()></a> <p data-ng-if=!historiqueCtrl.suppresion_ok>{{'labels.declaration.uvc.popin_suppression.ERREUR' | translate}}</p> <p data-ng-if=historiqueCtrl.suppresion_ok>{{'labels.declaration.uvc.popin_suppression.SUCCES' | translate}}</p> </div>"},function(e,t){e.exports="<div class=mymodal> <h1> {{'labels.declaration.rpc.RPC_MERCI' | translate}} </h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p>{{'labels.declaration.rpc.RPC_CONFIRMATION_1' | translate}}</p> <p>{{'labels.declaration.rpc.RPC_CONFIRMATION_2' | translate}}</p> <p>{{'labels.declaration.rpc.RPC_CONFIRMATION_3' | translate}} <a href=/mon-espace/declaration/documents/rpc onclick=location.reload()>{{'labels.declaration.rpc.RPC_CONFIRMATION_4' | translate}}</a></p> </div>"},function(e,t){e.exports="<div class=mymodal> <h1> {{'labels.declaration.rpc.RPC_ERREUR_1' | translate}} </h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p>{{'labels.declaration.rpc.RPC_ERREUR_2' | translate}}</p> </div>"},function(e,t){e.exports="<div class=mymodal> <h1> {{'labels.declaration.rpc.RPC_ERREUR_1' | translate}} </h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p>{{'labels.declaration.rpc.RPC_ERREUR_3' | translate}}<a href=/mon-espace/declaration/accueil>{{'labels.declaration.rpc.RPC_ERREUR_4' | translate}}</a></p> </div>"},function(e,t){e.exports="<div class=mymodal> <h1> {{'labels.declaration.rpc.RPC_ERREUR_SURVENUE' | translate}} </h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> </div>"},function(e,t){e.exports="<div class=mymodal> <h1> {{'labels.declaration.rpc.RPC_ERREUR_IMPOSSIBLE_DE_MODIFIER' | translate}} </h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p>{{'labels.declaration.rpc.RPC_ERREUR_IMPOSSIBLE_DE_MODIFIER_MSG' | translate}}</p> </div>"},function(e,t){e.exports="<div class=mymodal> <h1 data-ng-if=!rpcCtrl.IsModification>{{'labels.declaration.rpc.RPC_LAUNCH_1' | translate}}</h1> <h1 data-ng-if=rpcCtrl.IsModification>{{'labels.declaration.rpc.RPC_LAUNCH_2' | translate}}</h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p><b> {{'labels.declaration.rpc.RPC_TEXT_TOP_BAR' | translate}} </b></p> <div class=ctrl_form> <div id=recherche> <label for=id_recherche id=recherche>&nbsp;</label> <input type=text name=recherche id=id_recherche placeholder=\"{{'labels.declaration.rpc.RPC_SEARCH_BAR' | translate}}\" data-ng-model=rpcCtrl.someVal data-ng-change=rpcCtrl.textChanged()> </div> </div> <div class=table_produits data-ng-show=rpcCtrl.expertsList.length> <table id=choice_expert> <tr> <th>{{'labels.declaration.rpc.RPC_LAUNCH_3' | translate}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th> <th>{{'labels.declaration.rpc.RPC_LAUNCH_4' | translate}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th> <th>{{'labels.declaration.rpc.RPC_LAUNCH_5' | translate}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th> </tr> <tr data-ng-repeat=\"myexpert in rpcCtrl.expertsList\" data-ng-click=rpcCtrl.eltSelected(myexpert) ng-class=\"{'row_selected': myexpert.email===rpcCtrl.eltChosen.email && myexpert.nom===rpcCtrl.eltChosen.nom && myexpert.prenom===rpcCtrl.eltChosen.prenom}\"> <td>{{myexpert.nom}} {{myexpert.prenom}}</td> <td>{{myexpert.adresse}} <br/> {{myexpert.code_postal}} {{myexpert.ville}} </td> <td>{{myexpert.email}}</td> </tr> </table> </div> <p data-ng-if=rpcCtrl.no_contact_found> {{'labels.declaration.rpc.RPC_NO_RESULT_FOUND' | translate}} </p> <button class=btnn id=ajout data-ng-click=rpcCtrl.displayMore() data-ng-disabled=!rpcCtrl.diplayMoreState>{{'labels.declaration.rpc.RPC_LAUNCH_6' | translate}}</button> <button type=submit class=\"suivant btnn\" data-ng-click=rpcCtrl.createRPC() data-ng-model=rpcCtrl.validerState data-ng-disabled=!rpcCtrl.validerState>{{'labels.transverse.BTN_VALIDER' | translate}}</button> <input id=CloseBtn value=\"{{'labels.transverse.BTN_ANNULER' | translate}}\" ng-click=rpcCtrl.closeModal() type=button> </div>"},function(e,t){e.exports="<div class=mymodal> <h1>{{'labels.declaration.rpc_popins.LANCER_MISSION_TITLE' | translate}}</h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p>{{'labels.declaration.rpc_popins.LANCER_MISSION_TEXT_1' | translate}}</p> <p>{{'labels.declaration.rpc_popins.LANCER_MISSION_TEXT_2' | translate}}</p> <p>{{'labels.declaration.rpc_popins.LANCER_MISSION_TEXT_3' | translate}}</p><br/> <p><b>{{'labels.declaration.rpc_popins.LANCER_MISSION_CHOIX_EXPERT' | translate}}</b></p><br/> <input type=radio ng-model=rpcCtrl.ec value=EC /><label class=info-check>{{'labels.declaration.rpc_popins.EC' | translate}} </label> <input type=radio ng-model=rpcCtrl.ec value=CAC /><label class=info-check>{{'labels.declaration.rpc_popins.CAC' | translate}}</label><br/> <br/> <button class=\"suivant btnn\" ng-click=rpcCtrl.ChoixExpert() data-ng-disabled=!rpcCtrl.ec> {{'labels.transverse.BTN_SUIVANT' | translate}} </button> <input id=CloseBtn value=\"{{'labels.transverse.BTN_ANNULER' | translate}}\" ng-click=rpcCtrl.closeModal() type=button> </div> "},function(e,t){e.exports="<div class=mymodal> <h1>{{'labels.declaration.rpc.RPC_CHANGE_1' | translate}}</h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p><b>{{'labels.declaration.rpc.RPC_CHANGE_2' | translate}}</b></p><br/> <input type=radio ng-model=rpcCtrl.ec value=EC /><label class=info-check>{{'labels.declaration.rpc.RPC_CHANGE_3' | translate}}</label> <input type=radio ng-model=rpcCtrl.ec value=CAC /><label class=info-check>{{'labels.declaration.rpc.RPC_CHANGE_4' | translate}}</label><br/> <br/> <button class=\"suivant btnn\" ng-click=rpcCtrl.ChoixExpert() ng-disabled=!rpcCtrl.ec> {{'labels.transverse.BTN_SUIVANT' | translate}} </button> <input id=CloseBtn value=\"{{'labels.transverse.BTN_ANNULER' | translate}}\" ng-click=rpcCtrl.closeModal() type=button> </div>"},function(e,t){e.exports="<div class=mymodal> <form name=codeActivationForm ng-submit=rpcCtrl.validationCode() novalidate> <h1>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_TITLE' | translate}}</h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_TEXT' | translate}}</p> <div> <input type=text name=code placeholder=\"Saisir mon code\" ng-model=rpcCtrl.mCodeActivation ng-focus=rpcCtrl.codeFocus() required><br/> <br/> <div ng-if=rpcCtrl.invalidCode> <label>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_INVALID' | translate}}</label> </div> </div> <button class=\"valider suivant\" type=submit ng-disabled=codeActivationForm.$invalid> {{'labels.transverse.BTN_VALIDER' | translate}} </button> <input id=CloseBtn value=\"{{'labels.transverse.BTN_ANNULER' | translate}}\" ng-click=rpcCtrl.closeModal() type=button> </form> </div> "},function(e,t){e.exports="<div class=tbody_compte> <table id=tbl_rpc> <tbody> <tr data-ng-repeat=\"rpc in rpcCtrl.rpcs | limitTo:3\"> <td><b>{{'labels.declaration.rpc.RPC_INTITULE' | translate}} {{rpc.Annee}}</b></td> <td> <label ng-if=\"rpc.Statut=='1'\">{{'labels.declaration.rpc.RPC_STATUT_1' | translate}}</label> <label ng-if=\"rpc.Statut=='2'\">{{'labels.declaration.rpc.RPC_STATUT_2' | translate}} </label> <label ng-if=\"rpc.Statut==''\">{{'labels.declaration.rpc.RPC_STATUT_A_FAIRE' | translate}} </label> <label ng-if=\"rpc.Statut=='0'\">{{'labels.declaration.rpc.RPC_STATUT_A_VENIR' | translate}} </label> </td> <td> <input type=button class=btn ng-click=rpcCtrl.lancement(rpc) ng-if=\"rpc.Statut==''\" value=\"{{'labels.declaration.rpc.BUTTON_LANCER_MISSION' | translate}}\"/> <input type=button class=btn ng-click=rpcCtrl.changeMission(rpc) ng-if=\"rpc.Statut=='1'\" value=\"{{'labels.declaration.rpc.BUTTON_MODIFIER' | translate}}\"/> <input type=button class=btn ng-click=rpcCtrl.codeActivation(rpc) ng-if=\"rpc.Statut=='1'&&rpc.TypeExpert=='CAC'\" value=\"{{'labels.declaration.rpc.CODE_ACTIVATION' | translate}}\"/> <label ng-if=\"rpc.Statut=='2'&&rpc.Exist==false\">{{'labels.declaration.rpc.RPC_ERROR_OCCUR' | translate}}</label> <a href=\"\" class=acte ng-if=\"rpc.Statut=='2'&&rpc.Exist==true\" ng-click=rpcCtrl.getRpcFile(1,rpc)><div class=pict_visu id=pict-visu-rpc></div></a> <a href=\"\" class=acte ng-if=\"rpc.Statut=='2'&&rpc.Exist==true\" ng-click=rpcCtrl.getRpcFile(2,rpc)><div class=pict_telecharge id=pict-telecharger-rpc></div></a> </td> <td ng-if=\"rpc.Statut=='2'&&rpc.Exist==true\"> </td> </tr> </tbody> </table> </div> "},function(e,t){e.exports=require("jquery")},function(e,t){e.exports="<div class=mymodal> <a class=close-icon ng-click=popupsCtrl.closePopup()></a> <h1>{{'labels.declaration.uvc.popin_confirmation.ERROR_MSG' | translate}}</h1> <div>{{popupsCtrl.messageError | translate}}</div> </div>";
},function(e,t){e.exports="<div class=mymodal> <a class=close-icon ng-click=popupsCtrl.closePopup()></a> <div> <div class=recap_decla> <h1>{{'labels.declaration.uvc.popin_confirmation.TITRE' | translate}}</h1> <p> {{'labels.declaration.uvc.popin_confirmation.LABEL1' | translate}} {{popupsCtrl.RecapDeclaration.Annee}} {{'labels.declaration.uvc.popin_confirmation.LABEL2' | translate}} <span class=chiffre_decla> {{popupsCtrl.contributionTotale | decimalSeparator}} € {{'labels.declaration.uvc.popin_confirmation.HT' | translate}} </span> </p> </div> </div> </div>"},function(e,t){e.exports="<div class=ng-cloak ng-if=accueil_declarationCtrl.isVisible> <span ng-bind-html=accueil_declarationCtrl.declarationBloc></span> <button class=\"trans suivant-noir\" ng-click=accueil_declarationCtrl.goToChoixDeclaration()>{{'labels.declaration.accueil_declaration.BOUTON' | translate}}</button> </div> <div class=ng-cloak ng-if=!accueil_declarationCtrl.isVisible> <span ng-bind-html=accueil_declarationCtrl.notDeclarationBloc></span> </div>"},function(e,t){e.exports="<div class=choix_decla_over> <h1>{{'labels.declaration.choixdeclaration.choix_type_declaration.TITLE' | translate}} {{choixdeclarationCtrl.annee}}</h1> <h3>1.{{'labels.declaration.choixdeclaration.choix_type_declaration.TITLE_DECLARATION_UVC' | translate}}</h3> <p>{{('labels.declaration.choixdeclaration.choix_type_declaration.LABEL_DECLARATION_UVC_SUR_MARCHE' | translate).replace('#year#', choixdeclarationCtrl.annee)}}</p> <form ng-keyup=\"$event.keyCode == 13 && choixdeclarationCtrl.GetChoix()\"> <div ng-show=\"choixdeclarationCtrl.annee>=2016\" class=slider_wrapper> <div ui-slider=\"{range: 'min'}\" min=0 max=100 ng-model=choixdeclarationCtrl.nbuvc></div> <div style=width:16.67%;float:left>.</div> <div style=width:33.33%;float:left;text-align:center>.</div> <div style=width:33.33%;float:left;text-align:center>.</div> <div style=width:16.67%;float:left;text-align:right>.</div> <div style=width:16.67%;float:left>0</div> <div style=width:33.33%;float:left;text-align:center>10 000</div> <div style=width:33.33%;float:left;text-align:center>500 000</div> <div style=width:16.67%;float:left;text-align:right>...</div> <br style=clear:both /><br/> <p ng-show=\"choixdeclarationCtrl.nbuvc < 34\">{{'labels.declaration.choixdeclaration.choix_type_declaration.LABEL_MOINS_10000'| translate}}</p> <p ng-show=\"choixdeclarationCtrl.nbuvc > 33 && choixdeclarationCtrl.nbuvc < 67\">{{'labels.declaration.choixdeclaration.choix_type_declaration.LABEL_ENTRE_10000_50000'| translate}}</p> <p ng-show=\"choixdeclarationCtrl.nbuvc > 66\">{{'labels.declaration.choixdeclaration.choix_type_declaration.LABEL_SUP_500000'| translate}}</p> </div> <div ng-show=\"choixdeclarationCtrl.annee<2016\" class=slider_wrapper> <div ui-slider=\"{range: 'min'}\" min=0 max=100 ng-model=choixdeclarationCtrl.nbuvc></div> <div style=width:20%;float:left>.</div> <div style=width:60%;float:left;text-align:center>.</div> <div style=width:20%;float:left;text-align:right>.</div> <div style=width:20%;float:left>0</div> <div style=width:60%;float:left;text-align:center>180 000</div> <div style=width:20%;float:left;text-align:right>...</div> <br style=clear:both /><br/> <p ng-show=\"choixdeclarationCtrl.nbuvc < 50\">{{'labels.declaration.choixdeclaration.choix_type_declaration.LABEL_MOINS_180000'| translate}}</p> <p ng-show=\"choixdeclarationCtrl.nbuvc >= 50 \">{{'labels.declaration.choixdeclaration.choix_type_declaration.LABEL_SUP_180000'| translate}}</p> </div> <button class=contour ng-click=choixdeclarationCtrl.GetChoix()>{{'labels.transverse.BTN_VALIDER' | translate}}</button> <div class=choix_decla> <div data-ng-repeat=\"choix in choixdeclarationCtrl.html\"> <div ng-show=\"$first && choixdeclarationCtrl.html.length>=1\"> <h4>2.{{'labels.declaration.choixdeclaration.choix_type_declaration.LABEL_DECLARATION_CHOIX_DU_TYPE'| translate}}</h4> <p class=premier_p>{{'labels.declaration.choixdeclaration.choix_type_declaration.LABEL_DECLARATION_CONSEILLE'| translate}}</p> </div> <div class=bloc_choix_wrapper> <input type=radio ng-model=choixdeclarationCtrl.selected_type value={{choix.type}} /> <div class=bloc_choix ng-class=\"{'selected': choixdeclarationCtrl.selected_type == choix.type }\" ng-click=\"choixdeclarationCtrl.selected_type=choix.type\"> <h3>{{choix.titre}} </h3> <p data-ng-bind-html=choix.html></p> </div> <div class=autre_choix ng-show=\"$first && choixdeclarationCtrl.html.length>1\"> <p class=choix_decla_p>{{'labels.declaration.choixdeclaration.choix_type_declaration.LABEL_DECLARATION_AUTRE_CONSEILLE'| translate}}</p> </div> </div> </div> </div> <div class=foot_acces_direct> <ul> <li> <input type=button class=\"btn suivant\" ng-show=\"choixdeclarationCtrl.selected_type != ''\" ng-click=choixdeclarationCtrl.valideChoixDeclaration() value=\"{{'labels.declaration.choixdeclaration.choix_type_declaration.LABEL_DECLARATION_CONTINUER' | translate}}\"/> </li> </ul> </div> </form> </div> "},function(e,t){e.exports="<div class=mymodal> <a class=close-icon ng-click=choixdeclarationCtrl.closeModal()></a> <div class=list_widget> <div class=widget_uvc> <div class=bloc_saisie ng-click=choixdeclarationCtrl.GoToDelarationEnLigne()> <div class=enligne></div> <h4>{{'labels.declaration.choixdeclaration.choix_mode_saisi.TITLE_DECLARATION_LIGNE' | translate}}</h4> </div> <p>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_EN_LIGNE_UN' | translate}} <strong>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_EN_LIGNE_DEUX' | translate}}</strong> {{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_EN_LIGNE_TROIS' | translate}}</p> </div> <div class=widget_uvc> <div class=bloc_saisie ng-click=choixdeclarationCtrl.openExcelOptionsModal()> <div class=excel></div> <h4>{{'labels.declaration.choixdeclaration.choix_mode_saisi.TITLE_DECLARATION_EXCEL' | translate}}</h4> </div> <p>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_SUR_EXCEL_UN' | translate}} <strong>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_SUR_EXCEL_DEUX' | translate}}</strong> {{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_SUR_EXCEL_TROIS' | translate}}</p> </div> </div> </div> "},function(e,t){e.exports="<div class=mymodal> <a class=close-icon ng-click=choixdeclarationCtrl.closeModal()></a> <h1>{{'labels.declaration.choixdeclaration.choix_mode_saisi.TITLE_CHOIX_OPTION_EXCEL' | translate}} </h1> <div class=choix_param_container> <div class=choix_param_langue> <p>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_LANGUE' | translate}} </p> <input type=radio name=langue value=francais ng-model=choixdeclarationCtrl.langue_excel /><label>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_LANGUE_FRANCAIS' | translate}}</label> <input type=radio name=langue value=anglais ng-model=choixdeclarationCtrl.langue_excel /><label>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_LANGUE_ANGLAIS' | translate}}</label> </div> <div class=choix_param_annee> <p>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_ANNEE' | translate}} </p> <input type=radio name=annee value=2007 ng-model=choixdeclarationCtrl.annee_excel /><label>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_ANNEE_EXCEL2007' | translate}}</label> <input type=radio name=annee value=2003 ng-model=choixdeclarationCtrl.annee_excel /><label>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_ANNEE_EXCEL2003' | translate}}</label> </div> </div> <br/> <p> {{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_MSG1' | translate}}&nbsp;<a href=/mon-espace/declaration/accueil>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_MSG2' | translate}}</a>&nbsp;{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_MSG3' | translate}} </p> <input class=btn ng-disabled=\"!choixdeclarationCtrl.langue_excel || !choixdeclarationCtrl.annee_excel \" type=button value=Valider ng-click=choixdeclarationCtrl.sendDeclarationExcel() /> <input id=CloseBtn type=button value=Annuler class=marg_btn ng-click=choixdeclarationCtrl.closeModal()> </div> "},function(e,t){e.exports="<div class=mymodal> <h1>{{'labels.declaration.choixdeclaration.societes_marques.MSG5' | translate}} </h1> <a class=close-icon ng-click=controleecartCtrl.closeModal()></a> <button class=btn ng-click=controleecartCtrl.closeModal()>{{'labels.declaration.choixdeclaration.societes_marques.MSG6' | translate}}</button> </div> "},function(e,t){e.exports="<div id=ControlEcart> <h1>{{'labels.declaration.controle_ecart.title' | translate}} </h1> <p> <br/> {{'labels.declaration.controle_ecart.MSG1' | translate}} <br/>{{'labels.declaration.controle_ecart.MSG2' | translate}} </p> <form name=myForm novalidate> <table> <tr> <td colspan=4> <label class=controlChamp ng-show=\"myForm.motif.$invalid && (controleecartCtrl.form_submitted || myForm.motif.$touched)\"> {{'labels.declaration.controle_ecart.MSG3' | translate}} </label> </td> </tr> <tr> <td> <label> <select name=motif class=selectforcountry ng-options=\"t.Code as t.Libelle for t in controleecartCtrl.MotifEcartTab\" ng-model=controleecartCtrl.selected_motif required> <option value=\"\">{{'labels.declaration.controle_ecart.MSG4' | translate}}</option> </select> </label> <a class=infobulle_uvc style=margin-top:5px> <span class=arrow_box>{{'labels.declaration.controle_ecart.INFOBULLE'|translate}}</span> </a> </td> </tr> <tr> <td> <textarea class=no-border placeholder=\"Commentaires (facultatif)\" rows=5 cols=45 ng-model=controleecartCtrl.commentaire></textarea></td> </tr> </table> <div class=foot_acces_direct> <ul> <li><button id=btn-grey ng-click=controleecartCtrl.goBack()>{{'labels.declaration.controle_ecart.BTN_RETOUR' | translate}}</button></li> <li><a class=btn_sauvegarder ng-click=controleecartCtrl.submit_commentaireSave(myForm)>{{'labels.declaration.controle_ecart.BTN_ENREGISTRER' | translate}}</a></li> <li> <button class=\"btn suivant\" ng-disabled=myForm.$invalid ng-click=controleecartCtrl.submit_commentaire(myForm)>{{'labels.declaration.controle_ecart.BTN_SUIVANT' | translate}} </button> </li> </ul> </div> </form> </div> "},function(e,t){e.exports="<div ng-show=\"declarationforfaitCtrl.step==1\"> <form> <h1>{{'labels.declaration.choixdeclaration.declarationforfait.TITLE_DECLARATION_FORFAIT' | translate}}</h1> <p>{{'labels.declaration.choixdeclaration.declarationforfait.LABEL_DECLARATION_FORFAIT_INFO' | translate}}{{declarationforfaitCtrl.annee}}</p> <p>{{'labels.declaration.choixdeclaration.declarationforfait.LABEL_DECLARATION_FORFAIT_CONT' | translate}}</p> <h3>{{'labels.declaration.choixdeclaration.declarationforfait.LABEL_DECLARATION_FORFAIT_MONTANT' | translate}}</h3> <div class=foot_acces_direct> <ul> <li> <button id=btn-grey onclick='window.location.href=\"/mon-espace/declaration/historique\"'>{{'labels.declaration.uvc.send_mails.LABEL_BTN_NO_VALIDATE' | translate}}</button></li> <li> <button class=suivant ng-click=declarationforfaitCtrl.SaveDeclarationForfait()>{{'labels.declaration.choixdeclaration.declarationforfait.LABEL_DECLARATION_FORFAIT_BTN' | translate}} </button></li> </ul> </div> </form> </div> <div ng-show=\"declarationforfaitCtrl.step=='controle_ecart'\"> <data-controleecart data-declarationid={{declarationforfaitCtrl.RecapDeclaration.IdDeclaration}} onvalidate=\"declarationforfaitCtrl.step=2\" onback=declarationforfaitCtrl.goBackFromControlEcart()></data-controleecart> </div> <div ng-show=\"declarationforfaitCtrl.step==2\" ng-cloak> <form id=mail_form name=mail_form novalidate> <h1><strong>{{'labels.declaration.uvc.send_mails.TITLE' | translate}}</strong></h1> <p>{{'labels.declaration.uvc.send_mails.TITLE_ADD_MSG_1' | translate}} <br/> {{'labels.declaration.uvc.send_mails.TITLE_ADD_MSG_2' | translate}} <br/> <br/> {{'labels.declaration.uvc.send_mails.TITLE_ADD_MSG_3' | translate}}</p> <table class=\"tab_declaration ajout_desti\"> <tr> <td> <img src=/sites/default/files/inline-images/pict_mail.png class=marg-img /><input type=email name=email ng-model=declarationforfaitCtrl.mailinput ng-keyup=\"$event.keyCode == 13 && !mail_form.email.$invalid && !mail_form.email.$error.pattern && declarationforfaitCtrl.addMails()\" ng-pattern=declarationforfaitCtrl.email_pattern autocomplete=off placeholder=\"{{'labels.declaration.uvc.send_mails.PLACEHOLDER_EMAIL' | translate}}\" required> <span ng-show=\"mail_form.email.$invalid && !mail_form.email.$pristine && mail_form.email.$error.pattern\" class=\"help-block error\">{{'labels.declaration.uvc.send_mails.LABEL_ERROR' | translate}}</span> </td> <td></td> </tr> <tr ng-repeat=\"mail in declarationforfaitCtrl.mails\"> <td><input type=email name=email placeholder={{mail}} class=no-border disabled=disabled></td> <td><div ng-click=declarationforfaitCtrl.removeMail(mail) class=pict_delete>&nbsp;</div></td> </tr> </table> <input id=ajout type=button value=\"{{'labels.declaration.uvc.send_mails.LABEL_ADD_RECIPIENTS' | translate}}\" ng-disabled=mail_form.$invalid ng-click=declarationforfaitCtrl.addMails()> <br/> <div class=foot_acces_direct> <ul> <li><input type=button id=btn-grey ng-click=declarationforfaitCtrl.saveMails() value=\"{{'labels.declaration.uvc.send_mails.LABEL_BTN_NO_VALIDATE' | translate}}\"/></li> <li><input type=checkbox ng-model=checked ng-click=selected() /><label class=info-check>{{'labels.declaration.uvc.send_mails.LABEL_CERTIFIE' | translate}}</label></li> <li><input type=button class=btn ng-disabled=!checked ng-click=declarationforfaitCtrl.valideMails() value=\"{{'labels.declaration.uvc.send_mails.LABEL_BTN_VALIDATE' | translate}}\"/></li> </ul> </div> </form> </div> "},function(e,t){e.exports='<div class=mymodal> <div ng-hide=declarationforfaitCtrl.loading> <a class=close-icon href=/mon-espace/declaration/accueil></a> <div ng-show="declarationforfaitCtrl.status_code==200"> <h1>{{\'labels.declaration.uvc.popin_validation.TITLE\' | translate}}</h1> <p>{{\'labels.declaration.uvc.popin_validation.RAPPEL_CONTRIB\' | translate}}<span class=chiffre_decla>{{declarationforfaitCtrl.RecapDeclaration.ContributionTotale | decimalSeparator}} € {{\'labels.declaration.uvc.popin_validation.TAXE\' | translate}}</span></p> <button class=suivant onclick=\'window.location.href="/mon-espace/declaration/accueil"\'> {{\'labels.declaration.uvc.popin_validation.LABEL_BTN_ACCUEIL\' | translate}} </button> </div> <div ng-hide="declarationforfaitCtrl.status_code==200"> <h1>{{\'labels.declaration.uvc.popin_validation.ERROR_MSG\' | translate}}</h1> <div>{{excelCtrl.errors}}</div> </div> </div> <div class=loading_spinner ng-show=declarationforfaitCtrl.loading> <div class=sk-cube-grid> <div class="sk-cube sk-cube1"></div> <div class="sk-cube sk-cube2"></div> <div class="sk-cube sk-cube3"></div> <div class="sk-cube sk-cube4"></div> <div class="sk-cube sk-cube5"></div> <div class="sk-cube sk-cube6"></div> <div class="sk-cube sk-cube7"></div> <div class="sk-cube sk-cube8"></div> <div class="sk-cube sk-cube9"></div> </div> <p>{{\'labels.declaration.uvc.modal.LOADING_MODAL\' | translate}}</p> </div> </div> '},function(e,t){e.exports='<loader type=quarter ng-if=depotDeclarationCtrl.sendingFormFlag covered>Dépôt de la déclaration</loader> <form name=depotDeclarationForm id=depot-declaration-form ng-submit=depotDeclarationCtrl.submit(depotDeclarationForm) novalidate> <div> <label class=exposant for=id_client data-ng-if=depotDeclarationCtrl.form.clientId>Numéro client</label><input data-ng-model=depotDeclarationCtrl.form.clientId type=text name=id_client id=id-client maxlength=40 placeholder="Numéro client" required control-input> <div data-ng-if=depotDeclarationForm.id_client.$touched data-ng-messages=depotDeclarationForm.id_client.$error class="error depot-declaration-error"> <label class=error ng-message=required>Numéro client requis</label> </div> </div> <div> <label class=exposant for=year data-ng-if=depotDeclarationCtrl.form.year>Année</label><input data-ng-model=depotDeclarationCtrl.form.year type=text name=year id=year maxlength=4 placeholder=Année required control-input> <div data-ng-if=depotDeclarationForm.year.$touched data-ng-messages=depotDeclarationForm.year.$error class="error depot-declaration-error"> <label class=error ng-message=required>Année requise</label> </div> </div> <div> <label for=corrective-flag-yes>S\'agit-t-il d\'une corrective de déclaration ?</label> <input data-ng-model=depotDeclarationCtrl.form.correctiveFlag type=radio name=corrective_flag id=corrective-flag-yes data-ng-value=true><label for=corrective-flag-yes>{{\'labels.relationClient.adhesionRestreinte.transverse.RADIO_YES\' | translate}}</label> <input data-ng-model=depotDeclarationCtrl.form.correctiveFlag type=radio name=corrective_flag id=corrective-flag-no data-ng-value=false required><label for=corrective-flag-no>{{\'labels.relationClient.adhesionRestreinte.transverse.RADIO_NO\' | translate}}</label> <div data-ng-if=depotDeclarationForm.corrective_flag.$touched data-ng-messages=depotDeclarationForm.corrective_flag.$error class="error depot-declaration-error"> <label class=error ng-message=required>Vous devez indiquer si c\'est une cerrective de déclaration</label> </div> </div> <div data-ng-if=depotDeclarationCtrl.form.correctiveFlag id=comment-and-motif-bloc> <div> <select id=select-motifs name=motifs ng-model=depotDeclarationCtrl.form.motif data-ng-class="{ \'error\' : corrective_form.motifs.$invalid && historiqueCtrl.corrective_submitted}" required> <option value="">{{\'labels.declaration.uvc.popin_corrective.LABEL_MOTIF\' | translate}}</option> <option ng-repeat="motif in depotDeclarationCtrl.motifsCorrective" value={{motif.Code}}>{{\'motifs_correctives.\'+motif.Code | translate}}</option> </select> </div> <div id=comment-gabarit> <label class=exposant for=comment data-ng-if=depotDeclarationCtrl.form.comment>Commentaire</label><textarea data-ng-model=depotDeclarationCtrl.form.comment name=comment id=dd-comment maxlength=500 placeholder=Commentaire control-input></textarea> </div> </div> <div> <label for=file-upload id=file-button class="contour marg_rgt pointer">{{\'labels.relationClient.adhesionRestreinte.informationsAdministratives.ADD_FILE\' | translate}}</label> <div id=dd-file-link tabindex=-1> <a href="" ng-click="">{{depotDeclarationCtrl.form.fileAttachment.name}}</a> </div> <div id=dd-file-error data-ng-if=depotDeclarationForm.file_upload.$touched data-ng-messages=depotDeclarationForm.file_upload.$error class="error depot-declaration-error"> <label class=error ng-message=fileEmpty>{{\'errors.adhesionRestreinte.ERROR_FILE_REQUIRED\' | translate}}</label> <label class=error ng-message=fileType>Le fichier doit être au format : ZIP ou FDE.</label> <label class=error ng-message=fileSize>{{\'errors.adhesionRestreinte.ERROR_FILE_SIZE\' | translate}}</label> </div> <input type=file data-ng-hide=true id=file-upload name=file_upload ng-model=depotDeclarationCtrl.fakeFile file-upload-control=depotDeclarationCtrl.form.fileAttachment extension-control=depotDeclarationCtrl.extensionsList value="fake value"/> </div> <button type=submit>Envoyer</button> <button type=button ng-click=depotDeclarationCtrl.navigate()>Retour</button> </form>'},function(e,t){e.exports="<div class=mymodal> <h1>{{'labels.declaration.choixdeclaration.societes_marques.MSG5' | translate}} </h1> <a class=close-icon ng-click=entrepriseCtrl.closeModal()></a> <button type=button class=btn ng-click=entrepriseCtrl.closeModal()>{{'labels.declaration.choixdeclaration.societes_marques.MSG6' | translate}}</button> </div> "},function(e,t){e.exports="<div ng-hide=entrepriseCtrl.loading> <div ng-show=\"entrepriseCtrl.step=='controle_ecart'\"> <data-controleecart data-declarationid={{entrepriseCtrl.RecapDeclaration.IdDeclaration}} onvalidate='entrepriseCtrl.step=\"entreprises_marques\"' onback=entrepriseCtrl.goToDeclarationUvcWeb()></data-controleecart> </div> <div class=entreprises_marques ng-show=\"entrepriseCtrl.step=='entreprises_marques'\"> <div class=forms_container> <h1><strong>{{'labels.declaration.choixdeclaration.societes_marques.titre' | translate}}</strong></h1> <h4>{{'labels.declaration.choixdeclaration.societes_marques.societe_MSG1' | translate}}</h4> <p> {{'labels.declaration.choixdeclaration.societes_marques.societe_MSG2' | translate}} &nbsp;? &nbsp; <input class=test data-ng-model=entrepriseCtrl.choix data-ng-value=true name=entreprise type=radio /><label> {{'labels.declaration.choixdeclaration.societes_marques.MSG3' | translate}} </label> <input data-ng-model=entrepriseCtrl.choix data-ng-value=false name=entreprise type=radio /><label>{{'labels.declaration.choixdeclaration.societes_marques.MSG4' | translate}}</label> </p> <form name=myForm novalidate> <div ng-show=entrepriseCtrl.choix> <table> <tr> <td colspan=4><label class=controlChamp ng-show=entrepriseCtrl.msgErreurForEntreprise>{{'labels.declaration.choixdeclaration.societes_marques.LABEL_ERROR_ENTREPRISE' | translate}} </label></td> </tr> <tr> <td><label class=controlChamp ng-show=\"myForm.name.$invalid && entrepriseCtrl.submitted\">{{'labels.declaration.choixdeclaration.societes_marques.LABEL_ERROR_SOCIETE' | translate}}</label></td> <td></td> <td colspan=2><label class=controlChamp ng-show=\"myForm.pays.$invalid && entrepriseCtrl.submitted\">{{'labels.declaration.choixdeclaration.societes_marques.LABEL_ERROR_PAYS' | translate}}</label></td> </tr> <tr> <td> <label class=produit_exposant ng-hide=entrepriseCtrl.hideExposant(entrepriseCtrl.entrepriseinput.nom)>{{'labels.declaration.choixdeclaration.societes_marques.PLACEHOLDER_SOCIETE' | translate}}</label> </td> <td> <label class=produit_exposant ng-hide=entrepriseCtrl.hideExposant(entrepriseCtrl.entrepriseinput.siret)>{{'labels.declaration.choixdeclaration.societes_marques.PLACEHOLDER_SIRET' | translate}} </label> </td> <td> <label class=produit_exposant ng-hide=entrepriseCtrl.hideExposant(entrepriseCtrl.entrepriseinput.pays)>{{'labels.declaration.choixdeclaration.societes_marques.PLACEHOLDER_PAYS' | translate}} </label> </td> </tr> <tr> <td> <input type=text name=name ng-model=entrepriseCtrl.entrepriseinput.nom required placeholder=\"{{'labels.declaration.choixdeclaration.societes_marques.PLACEHOLDER_SOCIETE' | translate}} *\"/> &nbsp; &nbsp; </td> <td> <input type=text name=siret ng-model=entrepriseCtrl.entrepriseinput.siret placeholder=\"{{'labels.declaration.choixdeclaration.societes_marques.PLACEHOLDER_SIRET' | translate}}\"/> &nbsp; &nbsp; </td> <td> <select class=selectforcountry name=pays ng-options=\"t.Code as t.Designation for t in entrepriseCtrl.Pays\" required ng-model=entrepriseCtrl.entrepriseinput.pays> <option value=\"\">{{'labels.declaration.choixdeclaration.societes_marques.PLACEHOLDER_PAYS' | translate}} * </option> </select> </td> <td></td> </tr> <tr ng-repeat=\"e in entrepriseCtrl.entreprises\"> <td> <input type=text placeholder={{e.nom}} class=no-border disabled=disabled> </td> <td> <input type=text placeholder={{e.siret}} class=no-border disabled=disabled> </td> <td> <input type=text placeholder=\"{{'pays.'+e.pays | translate}}\" class=no-border disabled=disabled> </td> <td> <div ng-click=entrepriseCtrl.removeEntreprise(e) class=pict_delete></div> </td> </tr> </table> <input id=ajout type=submit ng-disabled=myForm.$invalid ng-click=entrepriseCtrl.addEntreprise() value=\"{{'labels.declaration.choixdeclaration.societes_marques.societe_AJOUTER_ENTREPRISE' | translate}}\" ng-keyup=\"$event.keyCode == 13 && entrepriseCtrl.addEntreprise()\" value=\"{{'labels.declaration.choixdeclaration.societes_marques.societe_AJOUTER_ENTREPRISE' | translate}}\"/> </div> </form> <hr color=#EFEFEF> <h4>{{'labels.declaration.choixdeclaration.societes_marques.marque_MSG1' | translate}}</h4> <p> {{'labels.declaration.choixdeclaration.societes_marques.marque_MSG2' | translate}} &nbsp;? &nbsp; <input data-ng-model=entrepriseCtrl.choixmarque data-ng-value=true name=marque type=radio /><label>{{'labels.declaration.choixdeclaration.societes_marques.MSG3' | translate}}</label> <input data-ng-model=entrepriseCtrl.choixmarque data-ng-value=false name=marque type=radio /><label>{{'labels.declaration.choixdeclaration.societes_marques.MSG4' | translate}}</label> </p> <form name=myForm1 novalidate> <div ng-show=entrepriseCtrl.choixmarque> <table> <tr> <td><label class=controlChamp ng-show=entrepriseCtrl.msgErreurForMarque>{{'labels.declaration.choixdeclaration.societes_marques.LABEL_ERROR_MARQUE' | translate}} </label></td> <td></td> </tr> <tr> <td> <label class=produit_exposant ng-hide=entrepriseCtrl.hideExposant(entrepriseCtrl.marqueinput)>{{'labels.declaration.choixdeclaration.societes_marques.PLACEHOLDER_MARQUE' | translate}} </label> </td> </tr> <tr> <td> <input ng-keyup=\"$event.keyCode == 13 && entrepriseCtrl.addMarque()\" type=text name=name ng-model=entrepriseCtrl.marqueinput required placeholder=\"{{'labels.declaration.choixdeclaration.societes_marques.PLACEHOLDER_MARQUE' | translate}} *\"/> </td> <td></td> </tr> <tr ng-repeat=\"marque in entrepriseCtrl.marques\"> <td> <input type=text placeholder={{marque}} class=no-border disabled=disabled> </td> <td> <div ng-click=entrepriseCtrl.removeMarque(marque) class=pict_delete></div> </td> </tr> </table> <input id=ajout type=button ng-disabled=myForm1.$invalid value=\"{{'labels.declaration.choixdeclaration.societes_marques.marque_AJOUTER_MARQUE' | translate}}\" ng-click=entrepriseCtrl.addMarque()> </div> </form> </div> <div class=entreprises_marques_footer> <ul> <li> <button id=btn-grey ng-click=entrepriseCtrl.goBack()>{{'labels.declaration.choixdeclaration.societes_marques.BTN_ETAPE_RETOUR' | translate}}</button></li> <li> <a class=btn_sauvegarder ng-click=\"entrepriseCtrl.SaveWithoutAddfalse();entrepriseCtrl.Save(false); entrepriseCtrl.valideEnregistrement()\">{{'labels.declaration.choixdeclaration.societes_marques.BTN_ETAPE_SAUVEGARDER' | translate}} </a></li> <li> <button class=suivant ng-click=\"entrepriseCtrl.submitFromOutSide('myForm')\">{{'labels.declaration.choixdeclaration.societes_marques.BTN_ETAPE_SUIVANTE' | translate}}</button> </li> </ul> </div> </div> </div> "},function(e,t){e.exports="<div class=mymodal> <a class=close-icon ng-click=historiqueCtrl.closeModal()></a> <div ng-show=\"historiqueCtrl.etape_corrective==1\"> <h1>{{'labels.declaration.uvc.popin_corrective.TITRE' | translate}}</h1> <p>{{'labels.declaration.uvc.popin_corrective.LABEL1' | translate}}&nbsp;<strong>{{'labels.declaration.uvc.popin_corrective.LABEL2' | translate}} {{historiqueCtrl.selected_annee}}</strong></p> <p class=question> {{'labels.declaration.uvc.popin_corrective.QUESTION' | translate}} </p> <form name=corrective_form ng-submit=historiqueCtrl.submit_corrective(corrective_form) novalidate> <select name=motifs ng-model=historiqueCtrl.selected_motif data-ng-class=\"{ 'error' : corrective_form.motifs.$invalid && historiqueCtrl.corrective_submitted}\" required> <option value=\"\">{{'labels.declaration.uvc.popin_corrective.LABEL_MOTIF' | translate}}</option> <option ng-repeat=\"motif in historiqueCtrl.motifs_corrective\" value={{motif.Code}}>{{'motifs_correctives.'+motif.Code | translate}}</option> </select> <label class=control-label ng-show=\"corrective_form.motifs.$invalid && (historiqueCtrl.corrective_submitted || corrective_form.motifs.$touched)\">{{'labels.declaration.uvc.popin_corrective.LABEL3' | translate}}</label> <textarea placeholder=\"{{'labels.declaration.uvc.popin_corrective.LABEL_COMMENTAIRE' | translate}}\" rows=7 ng-model=historiqueCtrl.commentaire></textarea> <input id=ValideBtn type=submit value=\"{{'labels.transverse.BTN_SUIVANT' | translate}}\"/> <input id=CloseBtn type=button value=\"{{'labels.transverse.BTN_ANNULER' | translate}}\" ng-click=historiqueCtrl.closeModal() /> </form> </div> <div ng-show=\"historiqueCtrl.etape_corrective==2\"> <h1>{{'labels.declaration.uvc.popin_corrective.TITRE2' | translate}} {{historiqueCtrl.selected_annee}}</h1> <p class=rappel>{{'labels.declaration.uvc.popin_corrective.LABEL4' | translate}} {{historiqueCtrl.selected_annee}} <strong>{{'labels.type_declaration.'+historiqueCtrl.type_declaration | translate}} - {{'labels.mode_declaration.'+historiqueCtrl.mode_saisie | translate}}</strong></p> <p class=question> {{'labels.declaration.uvc.popin_corrective.QUESTION2' | translate}} </p> <form name=modification_form ng-submit=historiqueCtrl.submit_modification(modification_form) novalidate> <input type=radio name=radio_group ng-model=historiqueCtrl.modifier_mode_type_declaration value=true required/>&nbsp;{{'labels.declaration.uvc.popin_corrective.REPONSE_OUI' | translate}} <input type=radio name=radio_group ng-model=historiqueCtrl.modifier_mode_type_declaration value=false required/>&nbsp;{{'labels.declaration.uvc.popin_corrective.REPONSE_NON' | translate}} <label class=control-label ng-show=\"modification_form.radio_group.$invalid && historiqueCtrl.corrective_submitted\">{{'labels.declaration.uvc.popin_corrective.CHAMPS_OBLIGATOIRE' | translate}}</label> <br/> <input id=ValideBtn type=submit value=\"{{'labels.transverse.BTN_SUIVANT' | translate}}\"/> <input id=CloseBtn type=button value=\"{{'labels.transverse.BTN_ANNULER' | translate}}\" ng-click=historiqueCtrl.closeModal() /> </form> </div> </div>"},function(e,t){e.exports="<div class=mymodal> <a class=close-icon ng-click=historiqueCtrl.closeModal()></a> <div class=list_widget ng-show=\"historiqueCtrl.etape_choix_mode_saisie==1\"> <div class=widget_uvc> <div class=bloc_saisie ng-click=historiqueCtrl.GoToDelarationEnLigne()> <div class=enligne></div> <h4>{{'labels.declaration.choixdeclaration.choix_mode_saisi.TITLE_DECLARATION_LIGNE' | translate}}</h4> </div> <p> {{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_EN_LIGNE_UN' | translate}} <strong>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_EN_LIGNE_DEUX' | translate}}</strong> {{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_EN_LIGNE_TROIS' | translate}} </p> </div> <div class=widget_uvc> <div class=bloc_saisie ng-click=\"historiqueCtrl.etape_choix_mode_saisie=2\"> <div class=excel></div> <h4>{{'labels.declaration.choixdeclaration.choix_mode_saisi.TITLE_DECLARATION_EXCEL' | translate}}</h4> </div> <p> {{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_SUR_EXCEL_UN' | translate}} <strong>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_SUR_EXCEL_DEUX' | translate}}</strong> {{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_DECLARATION_SUR_EXCEL_TROIS' | translate}} </p> </div> </div> <div class=options_excel ng-show=\"historiqueCtrl.etape_choix_mode_saisie==2\"> <h1>{{'labels.declaration.choixdeclaration.choix_mode_saisi.TITLE_CHOIX_OPTION_EXCEL' | translate}} </h1> <div class=choix_param_container> <div class=choix_param_langue> <p>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_LANGUE' | translate}} </p> <input type=radio name=langue value=francais ng-model=historiqueCtrl.langue_excel /><label>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_LANGUE_FRANCAIS' | translate}}</label> <input type=radio name=langue value=anglais ng-model=historiqueCtrl.langue_excel /><label>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_LANGUE_ANGLAIS' | translate}}</label> </div> <div class=choix_param_annee> <p>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_ANNEE' | translate}} </p> <input type=radio name=annee value=2007 ng-model=historiqueCtrl.annee_excel /><label>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_ANNEE_EXCEL2007' | translate}}</label> <input type=radio name=annee value=2003 ng-model=historiqueCtrl.annee_excel /><label>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_ANNEE_EXCEL2003' | translate}}</label> </div> </div> <br/> <p> {{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_MSG1' | translate}}&nbsp;<a href=/mon-espace/declaration/accueil>{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_MSG2' | translate}}</a>&nbsp;{{'labels.declaration.choixdeclaration.choix_mode_saisi.LABEL_DECLARATION_FORFAIT_MSG3' | translate}} </p> <input class=btn ng-disabled=\"!historiqueCtrl.langue_excel || !historiqueCtrl.annee_excel\" type=button value=Valider ng-click=historiqueCtrl.sendDeclarationExcel() /> <input id=CloseBtn type=button value=Annuler class=marg_btn ng-click=historiqueCtrl.closeModal()> </div> </div>";
},function(e,t){e.exports="<div class=mymodal> <h1>{{'labels.declaration.uvc.popin_suppression.TITLE' | translate}}</h1> <a class=close-icon ng-click=historiqueCtrl.annuleModal()></a> <div>{{'labels.declaration.uvc.popin_suppression.COMFIRM_REMOVE_DECLARATION' | translate}}</div> <button type=button ng-click=historiqueCtrl.SupprimerDeclaration()>{{'labels.transverse.BTN_SAUVEGARDER' | translate}}</button> <button type=button class=btn-annuler ng-click=historiqueCtrl.annuleModal()>{{'labels.transverse.BTN_ANNULER' | translate}}</button> </div>"},function(e,t){e.exports="<div class=page_historique ng-cloak> <div class=page_historique_content> <table> <thead> <tr> <td colspan=7 style=background-color:transparent> <h1>{{'labels.declaration.historique.TITRE' | translate}}</h1> <p>{{'labels.declaration.historique.DESCRIPTION' | translate}}</p> </td> </tr> <tr> <th width=26%>{{'labels.declaration.historique.COL1' | translate}}</th> <th width=15%>{{'labels.declaration.historique.COL2' | translate}}</th> <th width=15%>{{'labels.declaration.historique.COL3' | translate}}</th> <th width=13%>{{'labels.declaration.historique.COL4' | translate}}</th> <th width=13% class=montant>{{'labels.declaration.historique.COL5' | translate}}</th> <th width=8%></th> <th width=12%></th> </tr> </thead> <tbody> <tr data-ng-repeat=\"declaration in historiqueCtrl.listdeclarations\"> <td> <span class=pict_corrective ng-show={{declaration.Corrective}}></span> <label ng-show={{declaration.Corrective}}>{{'labels.declaration.historique.CORRECTIVE' | translate}}</label> {{'labels.declaration.historique.LABEL_DECLARATION' | translate}} {{declaration.Annee}} </td> <td> <span ng-show=\"declaration.TypeDecla!=''\"> {{'labels.type_declaration.'+declaration.TypeDecla | translate}} </span> <a title=\"{{'labels.declaration.historique.LABEL_MODIFIER' | translate}}\" class=pict_editer ng-show=declaration.LienChangementType href=\"/mon-espace/declaration/choix/#?annee={{declaration.Annee}}\"></a> <label ng-show=\"declaration.TypeDecla==''\">-</label> </td> <td> <span ng-show=\"declaration.ModeSaisie!=''\"> {{'labels.mode_declaration.'+declaration.ModeSaisie | translate}} </span> <a title=\"{{'labels.declaration.historique.LABEL_MODIFIER' | translate}}\" class=pict_editer ng-show=declaration.LienChangementModeSaisie ng-click=historiqueCtrl.ModifierModeSaisie(declaration.IdDeclaration,declaration.Annee,declaration.TypeDecla,declaration.ModeSaisie)></a> <label ng-show=\"declaration.ModeSaisie==''\">-</label><br/> </td> <td data-ng-class=\"{ 'validee' : declaration.Statut=='VALIDEE' }\">{{'labels.statut_declaration.'+declaration.Statut | translate }}</td> <td class=montant> <label ng-show=\"declaration.ContributionTotale!='0'\">{{declaration.ContributionTotale | decimalSeparator }} €</label> <label ng-show=\"declaration.ContributionTotale=='0'\">-</label> </td> <td class=modification> <a title=\"{{'labels.declaration.historique.LABEL_CORRIGER' | translate}}\" class=pict_editer ng-show=declaration.LienModification ng-click=historiqueCtrl.ModifierDeclaration(declaration.IdDeclaration,declaration.Annee,declaration.TypeDecla,declaration.ModeSaisie)></a> <a title=\"{{'labels.declaration.historique.LABEL_ANNULER' | translate}}\" class=pict_delete ng-show=declaration.LienSupprimer ng-click=historiqueCtrl.DemandeSuppressionDeclaration(declaration.IdDeclaration,declaration.Annee,declaration.TypeDecla,declaration.ModeSaisie)></a> </td> <td> <a class=button ng-show=declaration.LienCreation href=\"/mon-espace/declaration/choix/#?annee={{declaration.Annee}}\">{{'labels.declaration.historique.LABEL_SAISIR' | translate}}</a> <a class=button ng-show=declaration.LienTelechargement ng-click=historiqueCtrl.GetLienTelechargement(declaration.TypeDecla,declaration.Annee)>{{'labels.declaration.historique.LABEL_TELECHARGER' | translate}}</a> <a class=button ng-show=declaration.LienFinalisationSectDetail ng-click=historiqueCtrl.GetLienFinalisationSectDetail(declaration.TypeDecla,declaration.ModeSaisie,declaration.Annee)>{{'labels.declaration.historique.LABEL_COMPLETER' | translate}}</a> <a class=button ng-show=declaration.LienFinalisationForfait ng-click=\"historiqueCtrl.GetLienFinalisationForfait(declaration.IdDeclaration,declaration.Annee,declaration.Etape!=null?declaration.Etape:0)\">{{'labels.declaration.historique.LABEL_COMPLETER' | translate}}</a> <a class=button ng-show=declaration.LienFinalisationUVC ng-click=historiqueCtrl.GetLienFinalisationUvc(declaration.Statut,declaration.IdDeclaration,declaration.ModeSaisie,declaration.Etape)>{{'labels.declaration.historique.LABEL_COMPLETER' | translate}}</a> </td> </tr> </tbody> </table> </div> </div> "},function(e,t){e.exports=" <div ng-if=\"historique_widgetCtrl.annee_en_cours != historique_widgetCtrl.AnneesContractualisation\"> <table> <tbody> <tr> <th colspan=1>{{'labels.declaration.historique.TITRE_WIDGET' | translate}}</th> <th colspan=2><a href={{historique_widgetCtrl.url_historique}}>{{'labels.declaration.historique.LIEN_VOIR_TOUT' | translate}}</a></th> </tr> <tr data-ng-repeat=\"declaration in historique_widgetCtrl.listdeclarations | limitTo:3\"> <td>{{'labels.declaration.historique.LABEL_DECLARATION' | translate}} {{declaration.Annee}}</td> <td>{{'labels.statut_declaration.'+declaration.Statut | translate}}</td> <td class=acte><a href={{historique_widgetCtrl.url_historique}}><div class=pict_visu></div></a></td> </tr> </tbody> </table> </div> <div ng-if=\"historique_widgetCtrl.annee_en_cours == historique_widgetCtrl.AnneesContractualisation\"> <table> <tbody> <tr> <th colspan=1>{{'labels.declaration.historique.TITRE_WIDGET' | translate}}</th> <th colspan=2>{{'labels.declaration.historique.LIEN_A_VENIR' | translate}}</th> </tr> </tbody> </table> </div> "},function(e,t){e.exports='<div> <p>Bonjour !</p> <button class="trans suivant-noir" ng-click=lancementrpcCtrl.lancement()>POPIN</button> <button class="trans suivant-noir" ng-click=lancementrpcCtrl.changeMission()>MODIFICATION MISSION</button> </div> '},function(e,t){e.exports="<div class=mymodal> <h1> MERCI ! </h1> <a class=close-icon ng-click=lancementrpcCtrl.closeModal()></a> <p>Un email vient de vous être envoyé confirmant le lancement de la demande de mission RPC, </p> <p>la date de la déclaration concernée et le contact du professionnel que vous avez missionné. </p> <p>Retrouvez votrre demande dans <a href=/mon-espace/declaration/accueil>vos documents.</a></p> </div>"},function(e,t){e.exports="<div class=mymodal> <h1> ERREUR ! </h1> <a class=close-icon ng-click=lancementrpcCtrl.closeModal()></a> <p>Erreur D'Authentification</p> </div>"},function(e,t){e.exports="<div class=mymodal> <h1> ERREUR ! </h1> <a class=close-icon ng-click=lancementrpcCtrl.closeModal()></a> <p>Vous avez déjà lancé une mission RPC. Si vous souhaitez la modifier <a href=/mon-espace/declaration/accueil>cliquez ici</a></p> </div>"},function(e,t){e.exports='<div class=mymodal> <h1 data-ng-if=!lancementrpcCtrl.IsModification>LANCER LA MISSION DE RAPPORT DE PROC�DURES CONVENUES</h1> <h1 data-ng-if=lancementrpcCtrl.IsModification>MODIFIER LA MISSION DE RAPPORT DE PROC�DURES CONVENUES</h1> <a class=close-icon ng-click=lancementrpcCtrl.closeModal()></a> <div class=ctrl_form> <div id=recherche> <label for=id_recherche id=recherche>&nbsp;</label> <input type=text name=recherche id=id_recherche placeholder="{{\'labels.relationClient.choixEntreprise.SEARCH\' | translate}}" data-ng-model=lancementrpcCtrl.someVal data-ng-change=lancementrpcCtrl.textChanged() data-ng-trim=false> </div> </div> <div class=table_produits> <table id=choice_expert> <tr> <th>Nom &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th> <th>Adresse &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th> <th>Adresse e-mail &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th> </tr> <tr data-ng-click=lancementrpcCtrl.eltSelected(myexpert) data-ng-repeat="myexpert in lancementrpcCtrl.expertsList"> <td>{{myexpert.nom}} {{myexpert.prenom}}</td> <td>{{myexpert.adresse}} <br/> {{myexpert.code_postal}} {{myexpert.ville}} </td> <td>{{myexpert.email}}</td> </tr> </table> </div> <button id=ajout data-ng-click=lancementrpcCtrl.displayMore() data-ng-model=lancementrpcCtrl.diplayMoreState data-ng-disabled=!lancementrpcCtrl.diplayMoreState>Afficher plus</button> <button class=suivant data-ng-click=lancementrpcCtrl.createRPC() data-ng-model=lancementrpcCtrl.validerState data-ng-disabled=!lancementrpcCtrl.validerState>VALIDER</button> <button id=CloseBtn data-ng-click=lancementrpcCtrl.closeModal()>Annuler</button> </div>'},function(e,t){e.exports="<div class=mymodal> <h1>LANCER LA MISSION DE RAPPORT DE PROCÉDURES CONVENUES</h1> <a class=close-icon ng-click=lancementrpcCtrl.closeModal()></a> <p>Le RPC est obligatoire dès 2017. Ainsi si vous ne l'avez pas réalisé ces 2 dernières années, vous devez</p> <p>le produire pour la déclaration 2016.</p><br/> <p>Le RPC est un programme de travail établi sous forme de points de contrôle visnat tous les aspects</p> <p>de la démarche déclarative.</p><br/> <p>Véritable outil de diagnostic et d'accompagnement, il vous permet d'identifier facilement les</p> <p>non-conformités de votre déclaration et d'adapter votre processus déclaratif.</p><br/><br/><br/> <p><b>Choisissez l'Expert qui réalisera la mission :</b></p><br/> <input type=radio ng-model=lancementrpcCtrl.ec value=EC /><label class=info-check>Expert Comptable </label> <input type=radio ng-model=lancementrpcCtrl.ec value=CAC /><label class=info-check>Commissaire aux comptes</label><br/> <br/> <button class=suivant ng-click=lancementrpcCtrl.ChoixExpert() ng-disabled=!lancementrpcCtrl.ec> SUIVANT </button> <button ng-click=lancementrpcCtrl.closeModal()> Annuler </button> </div>"},function(e,t){e.exports="<div class=mymodal> <h1>MODIFIER LA MISSION DE RAPPORT DE PROCÉDURES CONVENUES</h1> <a class=close-icon ng-click=lancementrpcCtrl.closeModal()></a> <p><b>Choisissez l'Expert qui réalisera la mission :</b></p><br/> <input type=radio ng-model=lancementrpcCtrl.ec value=EC /><label class=info-check>Expert Comptable </label> <input type=radio ng-model=lancementrpcCtrl.ec value=CAC /><label class=info-check>Commissaire aux comptes</label><br/> <br/> <button class=suivant ng-click=lancementrpcCtrl.ChoixExpert() ng-disabled=!lancementrpcCtrl.ec> SUIVANT </button> <button ng-click=lancementrpcCtrl.closeModal()> Annuler </button> </div>"},function(e,t){e.exports='Recommandation <div class=row> <div class=col-md-3 data-ng-repeat="typeDeclaration in recommandationCtrl.typesDeclarations"> <label>{{typeDeclaration.code}}</label> <p data-ng-bind-html=typeDeclaration.html></p> </div> </div>'},function(e,t){e.exports="<div class=mymodal> <h1>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_ERROR_TITLE' | translate}}</h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_ERROR_TEXT' | translate}}</p> </div> "},function(e,t){e.exports="<div class=mymodal> <h1>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_EXIPRED_TITLE' | translate}}</h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_EXIPRED_TEXT' | translate}}</p> </div> "},function(e,t){e.exports="<div class=mymodal> <h1>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_LOCKED_TITLE' | translate}}</h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_LOCKED_TEXT' | translate}}</p> </div> "},function(e,t){e.exports="<div class=mymodal> <h1>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_SUCCESS_TITLE' | translate}}</h1> <a class=close-icon ng-click=rpcCtrl.closeModal()></a> <p>{{'labels.declaration.rpc_popins.CODE_ACTIVATION_SUCCESS_TEXT' | translate}}</p> </div> "},function(e,t){e.exports="<div class=simulateur> <h1><strong>{{'labels.declaration.choixdeclaration.simulateur.TITLE_SIMULATEUR' | translate}}</strong> </h1> <h5>{{'labels.declaration.choixdeclaration.simulateur.TITLE_SIMULATEUR_CHOIX' | translate}} </h5> <div class=bloc_simulateur> <table> <tr> <td><h4>{{simulateurCtrl.getTypeDeclarationParId('sect').titre}}</h4> <p data-ng-bind-html=\"simulateurCtrl.getTypeDeclarationParId('sect').html\"></p></td> <td><a target=_self class=\"button btn_simul\" href=\"{{simulateurCtrl.getExcelLinkByType('SimulateurSECTORIELLE')}}?display=attachement\">{{simulateurCtrl.orga == 'adelphe' ? ('labels.transverse.DOWNLOAD' | translate) : ''}}</a></td> </tr> </table> <table> <tr> <td><h4>{{simulateurCtrl.getTypeDeclarationParId('uvc').titre}}</h4> <p data-ng-bind-html=\"simulateurCtrl.getTypeDeclarationParId('uvc').html\"></p></td> <td><a target=_self class=\"button btn_simul\" href=\"{{simulateurCtrl.getExcelLinkByType('SimulateurUVC')}}?display=attachement\">{{simulateurCtrl.orga == 'adelphe' ? ('labels.transverse.DOWNLOAD' | translate) : ''}}</a></td> </tr> </table> <table> <tr> <td><h4>{{simulateurCtrl.getTypeDeclarationParId('emb').titre}}</h4> <p data-ng-bind-html=\"simulateurCtrl.getTypeDeclarationParId('emb').html\"></p></td> <td><a target=_self class=\"button btn_simul\" href=\"{{simulateurCtrl.getExcelLinkByType('SimulateurDETAILLEE')}}?display=attachement\">{{simulateurCtrl.orga == 'adelphe' ? ('labels.transverse.DOWNLOAD' | translate) : ''}}</a></td> </tr> </table> </div> </div> "},function(e,t){e.exports="<div class=mymodal> <a class=close-icon ng-click=excelCtrl.closeModal()></a> <h1>{{'labels.declaration.uvc.popin_corrective.TITRE' | translate}}</h1> <p>{{'labels.declaration.uvc.popin_corrective.LABEL1' | translate}}&nbsp;<strong>{{'labels.declaration.uvc.popin_corrective.LABEL2' | translate}} {{excelCtrl.selected_annee}}</strong></p> <p class=question> {{'labels.declaration.uvc.popin_corrective.QUESTION' | translate}} </p> <form name=corrective_form ng-submit=excelCtrl.submit_corrective(corrective_form) novalidate> <select name=motifs ng-model=excelCtrl.selected_motif required> <option value=\"\">{{'labels.declaration.uvc.popin_corrective.LABEL_MOTIF' | translate}}</option> <option ng-repeat=\"motif in excelCtrl.motifs_corrective\" value={{motif.Code}}>{{'motifs_correctives.'+motif.Code | translate}}</option> </select> <label class=control-label ng-show=\"corrective_form.motifs.$invalid && (excelCtrl.corrective_submitted || corrective_form.motifs.$touched)\">veuillez préciser le motif de votre corrective</label> <textarea placeholder=\"{{'labels.declaration.uvc.popin_corrective.LABEL_COMMENTAIRE' | translate}}\" rows=7 ng-model=excelCtrl.commentaire></textarea> <input id=ValideBtn type=submit value=\"{{'labels.transverse.BTN_SUIVANT' | translate}}\"/> <input id=CloseBtn type=button value=\"{{'labels.transverse.BTN_ANNULER' | translate}}\" ng-click=excelCtrl.closeModal() /> </form> </div> "},function(e,t){e.exports="<div class=mymodal> <a class=close-icon ng-click=excelCtrl.closeModal()></a> <h1>{{'labels.declaration.uvc.popin_confirmation.ERROR_MSG' | translate}}</h1> <div>{{'errors.formulaire_upload.'+excelCtrl.custom_error | translate}}</div> </div>"},function(e,t){e.exports="<div class=excel_upload_bloc ng-show=\"excelCtrl.step==1\" ng-cloak> <form id=excel_upload_form_id name=excel_upload_form novalidate> <h1>{{'labels.declaration.uvc.formulaire_upload.TITLE' | translate}}</h1> <h4>{{'labels.declaration.uvc.formulaire_upload.TITLE_SELECT_DECLARATION_TYPE' | translate}}</h4> <p> <input type=radio name=type_declaration ng-model=excelCtrl.type_declaration value=detaillee required/><label>{{'labels.type_declaration.DETAILLEE' | translate}}&nbsp;</label> <input type=radio name=type_declaration ng-model=excelCtrl.type_declaration value=uvc required/><label>{{'labels.type_declaration.UVC' | translate}}&nbsp;</label> <input type=radio name=type_declaration ng-model=excelCtrl.type_declaration value=sectorielle required/><label>{{'labels.type_declaration.SECTORIELLE' | translate}}</label><br/> </p> <label class=control-label ng-show=\"excel_upload_form.type_declaration.$invalid && excelCtrl.submitted\">{{'errors.formulaire_upload.TYPE_DECLARATION_REQUIRED' | translate}}</label> <h4>{{'labels.declaration.uvc.formulaire_upload.TITLE_SELECT_YEAR' | translate}}</h4> <select name=selected_annee ng-model=excelCtrl.selected_annee data-ng-class=\"{ 'error' : excel_upload_form.selected_annee.$invalid  && excelCtrl.submitted}\" required> <option ng-repeat=\"annee in excelCtrl.annees_declaration\" value={{annee}}>{{annee}}</option> </select> <label class=control-label ng-show=\"excel_upload_form.selected_annee.$invalid && (excelCtrl.submitted || excel_upload_form.selected_annee.$touched)\">{{'errors.formulaire_upload.ANNEE_REQUIRED' | translate}}</label> <br/><br/> <label for=file_upload class=\"contour marg_rgt\"> {{'labels.declaration.uvc.formulaire_upload.TITLE_SELECT_FILE' | translate}} </label> <input type=file ng-model=excelCtrl.file_name file-model=excelCtrl.declarationFile data-ng-class=\"{ 'error' : excel_upload_form.file_upload_name.$invalid  && excelCtrl.submitted}\" value=\"upload uxcel\" name=file_upload_name id=file_upload required valid-file/> <label>{{excelCtrl.declarationFile.name}}</label> <label class=control-label ng-show=\"excel_upload_form.file_upload_name.$error.validFile && excelCtrl.submitted\">{{'errors.formulaire_upload.FILE_REQUIRED' | translate}}</label> <br/> <div class=foot_acces_direct> <ul> <li><button ng-click=excelCtrl.submit(excel_upload_form) class=\"btn suivant\">{{'labels.declaration.uvc.formulaire_upload.LABEL_BTN_VALIDATE' | translate}}</button></li> </ul> </div> </form> </div> <div ng-show=\"excelCtrl.step=='controle_ecart'\" ng-cloak> <data-controleecart data-declarationid={{excelCtrl.RecapDeclaration.IdDeclaration}} onvalidate=\"excelCtrl.step=2\" onback=excelCtrl.goBackFromControlEcart()></data-controleecart> </div> <div ng-show=\"excelCtrl.step==2\" ng-cloak> <form id=mail_form name=mail_form novalidate> <h1><strong>{{'labels.declaration.uvc.send_mails.TITLE' | translate}}</strong></h1> <p>{{'labels.declaration.uvc.send_mails.TITLE_ADD_MSG_1' | translate}} <br/> {{'labels.declaration.uvc.send_mails.TITLE_ADD_MSG_2' | translate}} <br/> <br/> {{'labels.declaration.uvc.send_mails.TITLE_ADD_MSG_3' | translate}}</p> <table class=\"tab_declaration ajout_desti\"> <tr> <td> <img src=/sites/default/files/inline-images/pict_mail.png class=marg-img /><input type=email name=email ng-model=excelCtrl.mailinput ng-keyup=\"$event.keyCode == 13 && !mail_form.email.$invalid && !mail_form.email.$error.pattern && excelCtrl.addMails()\" ng-pattern=excelCtrl.email_pattern autocomplete=off placeholder=\"{{'labels.declaration.uvc.send_mails.PLACEHOLDER_EMAIL' | translate}}\" required> <span ng-show=\"mail_form.email.$invalid && !mail_form.email.$pristine && mail_form.email.$error.pattern\" class=\"help-block error\">{{'labels.declaration.uvc.send_mails.LABEL_ERROR' | translate}}</span> </td> <td></td> </tr> <tr ng-repeat=\"mail in excelCtrl.mails\"> <td><input type=email name=email placeholder={{mail}} class=no-border disabled=disabled></td> <td><div ng-click=excelCtrl.removeMail(mail) class=pict_delete>&nbsp;</div></td> </tr> </table> <input id=ajout type=button value=\"{{'labels.declaration.uvc.send_mails.LABEL_ADD_RECIPIENTS' | translate}}\" ng-disabled=mail_form.$invalid ng-click=excelCtrl.addMails()> <br/> <div class=foot_acces_direct> <ul> <li><input type=button id=btn-grey ng-click=excelCtrl.saveMails() value=\"{{'labels.declaration.uvc.send_mails.LABEL_BTN_NO_VALIDATE' | translate}}\"/></li> <li><input type=checkbox ng-model=checked ng-click=selected() /><label class=info-check>{{'labels.declaration.uvc.send_mails.LABEL_CERTIFIE' | translate}}</label></li> <li><input type=button class=btn ng-disabled=!checked ng-click=excelCtrl.valideMails() value=\"{{'labels.declaration.uvc.send_mails.LABEL_BTN_VALIDATE' | translate}}\"/></li> </ul> </div> </form> </div> "},function(e,t){e.exports="<div class=mymodal> <div ng-hide=excelCtrl.loading> <a class=close-icon ng-click=excelCtrl.closeModal()></a> <div ng-show=\"excelCtrl.status_code==200\"> <div class=recap_decla> <h1>{{'labels.declaration.uvc.popin_confirmation.TITRE' | translate}}</h1> <p> {{'labels.declaration.uvc.popin_confirmation.LABEL1' | translate}} {{excelCtrl.RecapDeclaration.Annee}} {{'labels.declaration.uvc.popin_confirmation.LABEL2' | translate}} <span class=chiffre_decla> {{excelCtrl.RecapDeclaration.ContributionTotale | decimalSeparator}} € {{'labels.declaration.uvc.popin_confirmation.HT' | translate}} </span> </p> </div> </div> <div ng-hide=\"excelCtrl.status_code==200\"> <h1>{{'labels.declaration.uvc.popin_confirmation.ERROR_MSG' | translate}}</h1> <div>{{excelCtrl.errors | translate}}</div> </div> <div ng-show=\"excelCtrl.status_code==200\" class=recap_decla> <button id=ValideBtn class=suivant ng-click=excelCtrl.valideModal()>{{'labels.transverse.BTN_VALIDER' | translate}}</button> </div> </div> <div class=loading_spinner ng-show=excelCtrl.loading> <loading></loading> </div> </div>"},function(e,t){e.exports="<div class=mymodal> <div ng-hide=excelCtrl.loading> <a class=close-icon href=/mon-espace/declaration/accueil></a> <div ng-show=\"excelCtrl.status_code==200\"> <h1>{{'labels.declaration.uvc.popin_validation.TITLE' | translate}}</h1> <p>{{'labels.declaration.uvc.popin_validation.RAPPEL_CONTRIB' | translate}}<span class=chiffre_decla>{{excelCtrl.RecapDeclaration.ContributionTotale | decimalSeparator}} € {{'labels.declaration.uvc.popin_validation.TAXE' | translate}}</span></p> <div class=list_widget> <a class=\"widget env_justif\" ng-show=\"{{excelCtrl.RecapDeclaration.Decote==true && excelCtrl.RecapDeclaration.AttestationRecycleValidee==false}}\" href=\"/OldApp/Declaration/EcdJustificatifs?typeDocument=AttestRec\"> {{'labels.declaration.uvc.popin_validation.LABEL_BTN_ATTESTATIONS' | translate}} </a> </div> <button class=suivant onclick='window.location.href=\"/mon-espace/declaration/accueil\"'> {{'labels.declaration.uvc.popin_validation.LABEL_BTN_ACCUEIL' | translate}} </button> </div> <div ng-hide=\"excelCtrl.status_code==200\"> <h1>{{'labels.declaration.uvc.popin_validation.ERROR_MSG' | translate}}</h1> <div>{{excelCtrl.errors}}</div> </div> </div> <div class=loading_spinner ng-show=excelCtrl.loading> <loading></loading> </div> </div>"},function(e,t){e.exports="<div class=mymodal> <a class=close-icon ng-click=ctrl.closeModal()></a> <h3>{{'errors.declaration.UVC_ENCOURS' | translate}}</h3> <button id=ValideBtn ng-click=ctrl.closeModal()>OK</button> </div>"},function(e,t){e.exports="<div class=mymodal> <a class=close-icon ng-click=ctrl.closeModal()></a> <h3>{{'labels.declaration.uvc.popin_produits.MSG_CONFIRMATION' | translate}}</h3> <button id=ValideBtn ng-click=ctrl.confirmDeleteUvc()>{{'labels.declaration.uvc.popin_produits.REPONSE_OUI' | translate}}</button> <input id=CloseBtn type=button value=\"{{'labels.declaration.uvc.popin_produits.REPONSE_NON' | translate}}\" ng-click=ctrl.closeModal() /> </div> "},function(e,t){e.exports="<div class=\"mymodal produits_modal\"> <a class=close-icon ng-click=ctrl.closeModal()></a> <h1>{{'labels.declaration.uvc.popin_produits.TITRE' | translate}}</h1> <p>{{'labels.declaration.uvc.popin_produits.DESCRIPTION' | translate}}</p> <span class=recherche_produit_img></span> <label class=produit_exposant ng-hide=\"ctrl.query=='' || ctrl.query==null\">{{'labels.declaration.uvc.popin_produits.SEARCH_LABEL'|translate}}</label> <input type=text ng-model=ctrl.query placeholder=\"{{'labels.declaration.uvc.popin_produits.SEARCH_LABEL' | translate}}\"/> <div class=table_produits> <table border=1> <tr> <th>{{'labels.declaration.uvc.popin_produits.CODE_PRODUIT' | translate}}</th> <th>{{'labels.declaration.uvc.popin_produits.LIBELLE_PRODUIT' | translate}}</th> </tr> <tr data-ng-repeat=\"p in ctrl.produits | filter:ctrl.query\" ng-click=\"ctrl.code_produit_tmp=p.code\" ng-class=\"{'row_selected': ctrl.code_produit_tmp==p.code}\"> <td>{{p.code}}</td> <td>{{p.libelle}}</td> </tr> </table> </div> <button id=ValideBtn ng-disabled=\"ctrl.code_produit_tmp==''\" ng-click=ctrl.setProduit()>{{'labels.declaration.uvc.popin_produits.BTN_ADD' | translate}}</button> <input id=CloseBtn type=button value=\"{{'labels.declaration.uvc.popin_produits.BTN_ANNULER' | translate}}\" ng-click=ctrl.closeModal() /> </div>"},function(e,t){e.exports="<div class=declaration_web data-ng-if=\"ctrl.id_declaration!='' && !ctrl.error\"> <div class=uvc_form_container> <div class=uvc_form ng-class=\"{'stop_scrolling':ctrl.selectedUVC==undefined}\"> <form id=uvc_web_form_id name=ctrl.uvc_web_form_id novalidate ng-show=\"ctrl.vue=='ecriture'\"> <input ng-change=\"ctrl.produit_spec='0';ctrl.uvc.ProduitId='';ctrl.uvc.NbUvcEmballMenagers=''\" type=radio name=type_produit data-ng-model=ctrl.uvc.Spec data-ng-value=false /><label class=add_uvc_label>{{'labels.declaration.uvc.formulaire.LABEL_ADD_UVC'|translate}}</label> <input type=radio name=type_produit data-ng-model=ctrl.uvc.Spec data-ng-value=true ng-change=\"ctrl.uvc.ProduitId=''\"/> <select ng-options=\"t.id as t.libelle for t in ctrl.list_produits_spec\" ng-class=\"{'produits_spec_not_seleted': !ctrl.uvc.Spec}\" ng-change=\"ctrl.uvc.Spec=true;ctrl.CalculerNbBobinesAlimentaire()\" class=produits_spec name=produits_spec data-ng-model=ctrl.uvc.ProduitId> <option value=\"\" disabled=disabled>{{'labels.declaration.uvc.formulaire.LABEL_ADD_SPEC'|translate}}</option> </select> <a class=infobulle_uvc style=margin-top:5px> <span class=\"arrow_box arrow_box_right\">{{'labels.declaration.uvc.formulaire.INFOBULLE1'|translate}}</span> </a> <br/> <label class=control-label ng-show=\"ctrl.erreurs && ctrl.submitted\">{{'labels.declaration.uvc.formulaire.ERREUR_FORMULAIRE'|translate}}</label> <h3> {{'labels.declaration.uvc.formulaire.TITRE_PRODUIT'|translate}} <a class=infobulle_uvc> <span class=arrow_box>{{'labels.declaration.uvc.formulaire.INFOBULLE2'|translate}}</span> </a> </h3> <label class=produit_exposant ng-hide=\"ctrl.uvc==undefined || ctrl.uvc.Libelle=='' || ctrl.uvc.Libelle==null\">{{'labels.declaration.uvc.formulaire.LABEL_LIBELLE_UVC'|translate}}</label> <input name=uvc_libelle class=uvc_libelle type=text placeholder=\"{{'labels.declaration.uvc.formulaire.LABEL_LIBELLE_UVC'|translate}}\" ng-model=ctrl.uvc.Libelle data-ng-class=\"{ 'error' : ctrl.uvc_web_form_id.uvc_libelle.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.uvc_libelle.$touched)}\" maxlength=50 required/> <label class=control-label ng-show=\"ctrl.uvc_web_form_id.uvc_libelle.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.uvc_libelle.$touched)\">{{'labels.declaration.uvc.formulaire.ERROR_LIBELLE'|translate}}</label> <div ng-click=\"!ctrl.uvc.Spec && ctrl.openModal()\" class=search_product data-ng-class=\"{ 'search_product_error' : ctrl.uvc_web_form_id.produit_id.$invalid && ctrl.submitted}\"> <label class=produit_exposant ng-hide=\"ctrl.uvc==ProduitId || ctrl.uvc.ProduitId=='' || ctrl.uvc.ProduitId==null\">{{'labels.declaration.uvc.formulaire.CODE_PRODUIT'|translate}}</label> <label class=produit_exposant ng-hide=\"ctrl.uvc==ProduitId || ctrl.uvc.ProduitId=='' || ctrl.uvc.ProduitId==null\">{{'labels.declaration.uvc.formulaire.LABEL_LIBELLE_PRODUIT'|translate}}</label> <input type=text name=produit_id required placeholder=\"{{'labels.declaration.uvc.formulaire.CODE_PRODUIT'|translate}}\" ng-model=ctrl.uvc.ProduitId disabled=disabled /> <input type=text placeholder=\"{{'labels.declaration.uvc.formulaire.LABEL_LIBELLE_PRODUIT'|translate}}\" value=\"{{(ctrl.uvc.ProduitId!='' && ctrl.uvc.ProduitId!=null?'produits.'+ctrl.uvc.ProduitId:'') | translate}}\" ng-show=!ctrl.uvc.Spec disabled=disabled /> <input type=text placeholder=\"{{'labels.declaration.uvc.formulaire.LABEL_LIBELLE_PRODUIT'|translate}}\" value=\"{{(ctrl.uvc.ProduitId!='' && ctrl.uvc.ProduitId!=null?'produits_spec.'+ctrl.uvc.ProduitId:'') | translate}}\" ng-show=ctrl.uvc.Spec disabled=disabled /> <span class=select_produit ng-class=\"{'disabled':ctrl.uvc.Spec}\"></span> </div> <label class=control-label ng-show=\"ctrl.uvc_web_form_id.produit_id.$invalid && ctrl.submitted\">{{'labels.declaration.uvc.formulaire.ERROR_PRODUIT'|translate}}</label> <h3> {{'labels.declaration.uvc.formulaire.TITRE_POIDS'|translate}} <span>{{ctrl.uvc.Spec?'labels.declaration.uvc.formulaire.TITRE_POIDS_UNITAIRE_KG':'labels.declaration.uvc.formulaire.TITRE_POIDS_UNITAIRE'|translate}}</span> <a class=infobulle_uvc> <span class=arrow_box> {{'labels.declaration.uvc.formulaire.INFOBULLE3'|translate}} </span> </a> </h3> <span>{{'labels.declaration.uvc.formulaire.LABEL_REMPLIR_PRODUITS'|translate}}</span> <table class=materiaux_inputs> <tr class=title_row> <td style=width:48%><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.acier)>{{'labels.declaration.uvc.Materiaux.acier'|translate}}</label></td> <td style=width:4%></td> <td style=width:48%><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.alum)>{{'labels.declaration.uvc.Materiaux.alum'|translate}}</label></td> </tr> <tr> <td style=width:48%><input name=acier type=number placeholder=\"{{'labels.declaration.uvc.Materiaux.acier'|translate}}\" ng-model=ctrl.uvc.acier ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.acier.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.acier.$touched)}\" materiau/></td> <td style=width:4%></td> <td style=width:48%><input name=alum type=number placeholder=\"{{'labels.declaration.uvc.Materiaux.alum'|translate}}\" ng-model=ctrl.uvc.alum ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.alum.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.alum.$touched)}\" ng-change=ctrl.CalculerNbBobinesAlimentaire() materiau/></td> </tr> <tr class=title_row> <td><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.pcNonBriq)>{{'labels.declaration.uvc.Materiaux.pcNonBriq'|translate}}</label></td> <td></td> <td><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.briq)>{{'labels.declaration.uvc.Materiaux.briq'|translate}}</label></td> </tr> <tr> <td><input type=number name=pcNonBriq placeholder=\"{{'labels.declaration.uvc.Materiaux.pcNonBriq'|translate}}\" ng-model=ctrl.uvc.pcNonBriq ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.pcNonBriq.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.pcNonBriq.$touched)}\" ng-change=ctrl.CalculerNbBobinesAlimentaire() materiau/></td> <td></td> <td><input type=number name=briq placeholder=\"{{'labels.declaration.uvc.Materiaux.briq'|translate}}\" ng-model=ctrl.uvc.briq ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.briq.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.briq.$touched)}\" materiau/></td> </tr> <tr class=title_row> <td><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.petClair)>{{'labels.declaration.uvc.Materiaux.petClair'|translate}}</label></td> <td></td> <td><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.flacon)>{{'labels.declaration.uvc.Materiaux.flacon'|translate}}</label></td> </tr> <tr> <td><input type=number name=petClair placeholder=\"{{'labels.declaration.uvc.Materiaux.petClair'|translate}}\" ng-model=ctrl.uvc.petClair ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.petClair.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.petClair.$touched)}\" materiau/></td> <td></td> <td><input type=number name=flacon placeholder=\"{{'labels.declaration.uvc.Materiaux.flacon'|translate}}\" ng-model=ctrl.uvc.flacon ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.flacon.$invalid && (ctrl.submitted ||ctrl.uvc_web_form_id.flacon.$touched)}\" materiau/></td> </tr> <tr class=title_row> <td><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.autrePlas)>{{'labels.declaration.uvc.Materiaux.autrePlas'|translate}}</label></td> <td></td> <td><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.verre)>{{'labels.declaration.uvc.Materiaux.verre'|translate}}</label></td> </tr> <tr> <td><input type=number name=autrePlas placeholder=\"{{'labels.declaration.uvc.Materiaux.autrePlas'|translate}}\" ng-model=ctrl.uvc.autrePlas ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.autrePlas.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.autrePlas.$touched)}\" ng-change=ctrl.CalculerNbBobinesAlimentaire() materiau/></td> <td></td> <td><input type=number name=verre placeholder=\"{{'labels.declaration.uvc.Materiaux.verre'|translate}}\" ng-model=ctrl.uvc.verre ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.verre.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.verre.$touched)}\" materiau/></td> </tr> <tr class=title_row ng-if=\"ctrl.orgaCommerciale=='adelphe'\"> <td><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.Bois)>{{'labels.declaration.uvc.Materiaux.bois'|translate}}</label></td> <td></td> <td><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.Textile)>{{'labels.declaration.uvc.Materiaux.textile'|translate}}</label></td> </tr> <tr ng-if=\"ctrl.orgaCommerciale=='adelphe'\"> <td><input type=number name=autrePlas placeholder=\"{{'labels.declaration.uvc.Materiaux.bois'|translate}}\" ng-model=ctrl.uvc.Bois ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.bois.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.bois.$touched)}\" materiau/></td> <td></td> <td><input type=number name=textile placeholder=\"{{'labels.declaration.uvc.Materiaux.textile'|translate}}\" ng-model=ctrl.uvc.Textile ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.textile.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.textile.$touched)}\" materiau/></td> </tr> <tr class=title_row> <td><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.autre)>{{'labels.declaration.uvc.Materiaux.autre'|translate}}</label></td> </tr> <tr> <td colspan=3><input type=number name=autre placeholder=\"{{'labels.declaration.uvc.Materiaux.autre'|translate}}\" ng-model=ctrl.uvc.autre ng-pattern=/^[0-9]+(\\.[0-9]{1,4})?$/ step=0.01 min=0 data-ng-class=\"{'error' : ctrl.uvc_web_form_id.autre.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.autre.$touched)}\" materiau/></td> </tr> </table> <input type=hidden name=materiaux_valide ng-model=test0 ng-required=!ctrl.MateriauxValide() /> <label class=control-label ng-show=\"ctrl.uvc_web_form_id.materiaux_valide.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.autre.$touched|| ctrl.uvc_web_form_id.autre.$touched|| ctrl.uvc_web_form_id.verre.$touched|| ctrl.uvc_web_form_id.autrePlas.$touched|| ctrl.uvc_web_form_id.flacon.$touched|| ctrl.uvc_web_form_id.petClair.$touched|| ctrl.uvc_web_form_id.briq.$touched|| ctrl.uvc_web_form_id.pcNonBriq.$touched|| ctrl.uvc_web_form_id.alum.$touched|| ctrl.uvc_web_form_id.acier.$touched || (ctrl.orgaCommerciale=='adelphe' && (ctrl.uvc_web_form_id.bois.$touched || ctrl.uvc_web_form_id.textile.$touched)))\"> {{'labels.declaration.uvc.formulaire.ERROR_MATERIAUX'|translate}} </label> <br/> <input type=hidden name=produits_spec_valide ng-model=test1 ng-required=!ctrl.ProduitSpecValide() /> <label class=control-label ng-show=\"ctrl.uvc_web_form_id.produits_spec_valide.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.autre.$touched|| ctrl.uvc_web_form_id.autre.$touched|| ctrl.uvc_web_form_id.verre.$touched|| ctrl.uvc_web_form_id.autrePlas.$touched|| ctrl.uvc_web_form_id.flacon.$touched|| ctrl.uvc_web_form_id.petClair.$touched|| ctrl.uvc_web_form_id.briq.$touched|| ctrl.uvc_web_form_id.pcNonBriq.$touched|| ctrl.uvc_web_form_id.alum.$touched|| ctrl.uvc_web_form_id.acier.$touched || (ctrl.orgaCommerciale=='adelphe' && (ctrl.uvc_web_form_id.bois.$touched || ctrl.uvc_web_form_id.textile.$touched)))\"> {{'labels.declaration.uvc.formulaire.ERREUR_PRODUIT_SPEC'+ctrl.ProduitSpecError|translate}} </label> <h3> {{'labels.declaration.uvc.formulaire.TITRE_DECOTE'|translate}} <a class=infobulle_uvc> <span class=arrow_box>{{'labels.declaration.uvc.formulaire.INFOBULLE4'|translate}}</span> </a> </h3> {{'labels.declaration.uvc.formulaire.LABEL_PAPIER_CARTON_RECYCLE'|translate}} <div ng-class=\"{'toggle btn btn-primary':ctrl.uvc.Decote,'toggle btn btn-default off': !ctrl.uvc.Decote}\" ng-click=\"ctrl.uvc.Decote=!ctrl.uvc.Decote; ctrl.decote_touched=true\"> <div class=toggle-group> <label class=\"btn btn-primary toggle-on\">{{'labels.declaration.uvc.formulaire.DECOTE_OUI'|translate}}</label> <label class=\"btn btn-default active toggle-off\">{{'labels.declaration.uvc.formulaire.DECOTE_NON'|translate}}</label> <span class=\"toggle-handle btn btn-default\"></span> </div> </div> <input type=hidden name=decote_valide ng-model=test ng-required=\"ctrl.uvc.Decote && (ctrl.uvc.pcNonBriq == null || ctrl.uvc.pcNonBriq == '' || ctrl.uvc.pcNonBriq == 0)\"/> <label class=control-label ng-show=ctrl.uvc_web_form_id.decote_valide.$invalid> {{'labels.declaration.uvc.formulaire.ERROR_DECOTE'|translate}} </label> <div class=bloc_bonus> <h3> {{'labels.declaration.uvc.formulaire.TITRE_BONUS'|translate}} <a class=infobulle_uvc> <span class=arrow_box>{{'labels.declaration.uvc.formulaire.INFOBULLE5'|translate}}</span> </a> </h3> <div style=width:48%;float:left> <label class=produit_exposant ng-hide=\"ctrl.uvc==undefined || ctrl.uvc.BonusReductionId=='' || ctrl.uvc.BonusReductionId==null || ctrl.uvc.BonusReductionId==0\">{{'bonus_reduction.0'|translate}}</label> </div> <div style=width:48%;float:right> <label class=produit_exposant ng-hide=\"ctrl.uvc==undefined || ctrl.uvc.BonusSensibilisationId=='' || ctrl.uvc.BonusSensibilisationId==null || ctrl.uvc.BonusSensibilisationId==0\">{{'bonus_sensibilisation.0'|translate}}</label> </div> <div style=clear:both> <select name=bonus_reduction data-ng-model=ctrl.uvc.BonusReductionId ng-options=\"t.id as t.libelle for t in ctrl.list_bonus_reduction\"> <option value=\"\">{{'bonus_reduction.0'|translate}}</option> </select> </div> <div> <select name=bonus_sensibilisation data-ng-model=ctrl.uvc.BonusSensibilisationId ng-options=\"t.id as t.libelle for t in ctrl.list_bonus_sensibilisation\"> <option value=\"\">{{'bonus_sensibilisation.0'|translate}}</option> </select> </div> </div> <h3> {{'labels.declaration.uvc.formulaire.TITRE_MALUS'|translate}} <a class=infobulle_uvc> <span class=arrow_box>{{'labels.declaration.uvc.formulaire.INFOBULLE6'|translate}}</span> </a> </h3> <table class=table_malus> <tr> <td class=choix_param ng-class=\"{ 'selected_malus' : ctrl.uvc.MalusPerturbateur }\" ng-click=\"ctrl.uvc.MalusPerturbateur=!ctrl.uvc.MalusPerturbateur;ctrl.uvc.MalusSansFiliere=false;\"> {{'labels.declaration.uvc.formulaire.MALUS_PERTURBATEUR'|translate}} </td> <td class=choix_param ng-class=\"{ 'selected_malus' : ctrl.uvc.MalusSansFiliere }\" ng-click=\"ctrl.uvc.MalusSansFiliere=!ctrl.uvc.MalusSansFiliere; ctrl.uvc.MalusPerturbateur=false;\"> {{'labels.declaration.uvc.formulaire.MALUS_SANS_FILIERE'|translate}} </td> </tr> </table> <p class=erreur_non_blocante ng-show=\"(ctrl.uvc.MalusPerturbateur|| ctrl.uvc.MalusSansFiliere) && (ctrl.uvc.BonusSensibilisationId!=0 && ctrl.uvc.BonusSensibilisationId!=unll && ctrl.uvc.BonusSensibilisationId!=undefined)\"> {{'labels.declaration.uvc.formulaire.ERREUR_NON_BLOCANT'|translate}}</p> <h3> {{'labels.declaration.uvc.formulaire.TITRE_NOMBRE_UVC'|translate}} <a class=infobulle_uvc> <span class=arrow_box>{{'labels.declaration.uvc.formulaire.INFOBULLE7'|translate}}</span> </a> </h3> <table class=\"materiaux_inputs nbembtbl\"> <tr class=title_row> <td style=width:48%><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.NbUvcEmballMenagers)>{{'labels.declaration.uvc.formulaire.TITRE_EMB_MENAGER'|translate}}</label></td> <td style=width:4%></td> <td style=width:48%><label class=produit_exposant ng-hide=ctrl.hideExposant(ctrl.uvc.NbUvcEmballNonMenagers)>{{'labels.declaration.uvc.formulaire.TITRE_EMB_NON_MENAGER'|translate}}</label></td> </tr> <tr> <td style=width:48%> <input name=emb_menager ng-disabled=\"ctrl.uvc.Spec && (ctrl.uvc.ProduitId == '150000' ||ctrl.uvc.ProduitId == '160000')\" class=uvc_nombre type=number min=0 onkeypress=\"return event.charCode>=48\" ng-pattern=/^[0-9][^\\.]*$/ placeholder=\"{{'labels.declaration.uvc.formulaire.TITRE_EMB_MENAGER'|translate}}\" ng-model=ctrl.uvc.NbUvcEmballMenagers materiau data-ng-class=\"{ 'error' : ctrl.uvc_web_form_id.emb_menager.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.emb_menager.$touched)}\" required/> </td> <td style=width:4%></td> <td style=width:48%><input class=uvc_nombre type=number min=0 onkeypress=\"return event.charCode>=48\" ng-pattern=/^[0-9][^\\.]*$/ placeholder=\"{{'labels.declaration.uvc.formulaire.TITRE_EMB_NON_MENAGER'|translate}}\" ng-model=ctrl.uvc.NbUvcEmballNonMenagers materiau/></td> </tr> <tr><td colspan=3><label class=control-label ng-show=\"ctrl.uvc_web_form_id.emb_menager.$invalid && (ctrl.submitted || ctrl.uvc_web_form_id.emb_menager.$touched)\">{{'labels.declaration.uvc.formulaire.TITRE_NB_UVC'|translate}}</label></td></tr> </table> <hr/> <h3> {{'labels.declaration.uvc.formulaire.TITRE_TOTAL_UVC'|translate}} </h3> <table class=contributions_table> <tr> <th width=50%>{{'labels.declaration.uvc.formulaire.TITRE_CONTRIBUTION_UNIT_TOTAL'|translate}}</th> <th width=50%>{{'labels.declaration.uvc.formulaire.TITRE_CONTRIBUTION_TOTAL'|translate}}</th> </tr> <tr> <td>{{ctrl.uvc.ContribUnitTotale | decimalSeparator}}</td> <td>{{ctrl.uvc.ContribTotaleLigne | decimalSeparator}}</td> </tr> </table> <br/> <br/> <button class=btn ng-click=ctrl.ValidateUvc(ctrl.uvc_web_form_id)>{{'labels.declaration.uvc.formulaire.BTN_VALIDER_PRODUIT'|translate}}</button> </form> <div id=vue ng-show=\"ctrl.vue=='lecture'\"> {{'labels.declaration.uvc.formulaire.TITRE_UVC_VUE'|translate}} <hr/> <h3>{{'labels.declaration.uvc.formulaire.TITRE_PRODUIT'|translate}}</h3> {{'labels.declaration.uvc.formulaire.LABEL_LIBELLE_UVC'|translate}} : <strong>{{ctrl.uvc.Libelle}}</strong><br/> {{'labels.declaration.uvc.formulaire.CODE_PRODUIT'|translate}} : <strong>{{ctrl.uvc.ProduitId}}</strong><span style=width:100px;display:inline-block></span>{{'labels.declaration.uvc.formulaire.LABEL_LIBELLE_PRODUIT'|translate}} : <strong>{{ctrl.uvc.Spec?'produits_spec.'+ctrl.uvc.ProduitId:'produits.'+ctrl.uvc.ProduitId|translate}}</strong> <hr/> <h3> {{'labels.declaration.uvc.formulaire.TITRE_POIDS'|translate}} <span>{{ctrl.uvc.Spec?'labels.declaration.uvc.formulaire.TITRE_POIDS_UNITAIRE_KG':'labels.declaration.uvc.formulaire.TITRE_POIDS_UNITAIRE'|translate}}</span> </h3> <table class=materiaux_inputs> <tr ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.acier)> <td>{{'labels.declaration.uvc.Materiaux.acier'|translate}} : <strong>{{ctrl.uvc.acier | decimalSeparator}}</strong></td> </tr> <tr ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.alum)> <td>{{'labels.declaration.uvc.Materiaux.alum'|translate}} : <strong>{{ctrl.uvc.alum | decimalSeparator}}</strong></td> </tr> <tr ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.pcNonBriq)> <td> {{'labels.declaration.uvc.Materiaux.pcNonBriq'|translate}} : <strong>{{ctrl.uvc.pcNonBriq | decimalSeparator}}</strong></td> </tr> <tr ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.briq)> <td> {{'labels.declaration.uvc.Materiaux.briq'|translate}} : <strong>{{ctrl.uvc.briq | decimalSeparator}}</strong></td> </tr> <tr ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.petClair)> <td>{{'labels.declaration.uvc.Materiaux.petClair'|translate}} : <strong>{{ctrl.uvc.petClair | decimalSeparator}}</strong></td> </tr> <tr ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.flacon)> <td>{{'labels.declaration.uvc.Materiaux.flacon'|translate}} : <strong>{{ctrl.uvc.flacon | decimalSeparator}}</strong></td> </tr> <tr ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.autrePlas)> <td>{{'labels.declaration.uvc.Materiaux.autrePlas'|translate}} : <strong>{{ctrl.uvc.autrePlas | decimalSeparator}}</strong></td> </tr> <tr ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.verre)> <td>{{'labels.declaration.uvc.Materiaux.verre'|translate}} : <strong>{{ctrl.uvc.verre | decimalSeparator}}</strong></td> </tr> <tr ng-if=\"ctrl.orgaCommerciale=='adelphe'\" ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.Bois)> <td>{{'labels.declaration.uvc.Materiaux.bois'|translate}} : <strong>{{ctrl.uvc.Bois | decimalSeparator}}</strong></td> </tr> <tr ng-if=\"ctrl.orgaCommerciale=='adelphe'\" ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.Textile)> <td>{{'labels.declaration.uvc.Materiaux.textile'|translate}} : <strong>{{ctrl.uvc.Textile | decimalSeparator}}</strong></td> </tr> <tr ng-show=ctrl.ShowMateriauPreview(ctrl.uvc.autre)> <td>{{'labels.declaration.uvc.Materiaux.autre'|translate}} : <strong>{{ctrl.uvc.autre | decimalSeparator}}</strong></td> </tr> </table> <hr/> <h3>{{'labels.declaration.uvc.formulaire.TITRE_DECOTE'|translate}}</h3> {{'labels.declaration.uvc.formulaire.LABEL_DECOTE'|translate}}: <strong>{{ctrl.uvc.Decote?'labels.declaration.uvc.formulaire.DECOTE_OUI':'labels.declaration.uvc.formulaire.DECOTE_NON'|translate}}</strong> <hr/> <h3>{{'labels.declaration.uvc.formulaire.TITRE_BONUS'|translate}}</h3> {{'bonus_reduction.0'|translate}} : <strong>{{ctrl.uvc.BonusReductionId!=null?'bonus_reduction.'+ctrl.uvc.BonusReductionId:''|translate}}</strong><br/> {{'bonus_sensibilisation.0'|translate}} : <strong>{{ctrl.uvc.BonusSensibilisationId!=null?'bonus_sensibilisation.'+ctrl.uvc.BonusSensibilisationId:''|translate}}</strong> <hr/> <h3>{{'labels.declaration.uvc.formulaire.TITRE_MALUS'|translate}}</h3> {{ctrl.uvc.MalusPerturbateur?'labels.declaration.uvc.formulaire.MALUS_PERTURBATEUR':''|translate}} {{ctrl.uvc.MalusSansFiliere?'labels.declaration.uvc.formulaire.MALUS_SANS_FILIERE':''|translate}} <hr/> <h3>{{'labels.declaration.uvc.formulaire.TITRE_NOMBRE_UVC'|translate}}</h3> {{'labels.declaration.uvc.formulaire.TITRE_EMB_MENAGER'|translate}} : <strong>{{ctrl.uvc.NbUvcEmballMenagers | thousandSeparator}}</strong><br/> {{'labels.declaration.uvc.formulaire.TITRE_EMB_NON_MENAGER'|translate}} : <strong>{{ctrl.uvc.NbUvcEmballNonMenagers | thousandSeparator}}</strong> <hr/> <h3>{{'labels.declaration.uvc.formulaire.TITRE_TOTAL_UVC'|translate}}</h3> <table class=contributions_table> <tr> <th width=50%>{{'labels.declaration.uvc.formulaire.TITRE_CONTRIBUTION_UNIT_TOTAL'|translate}}</th> <th width=50%>{{'labels.declaration.uvc.formulaire.TITRE_CONTRIBUTION_TOTAL'|translate}}</th> </tr> <tr> <td>{{ctrl.uvc.ContribUnitTotale | decimalSeparator}}</td> <td>{{ctrl.uvc.ContribTotaleLigne | decimalSeparator}}</td> </tr> </table> </div> <div id=cache ng-show=\"ctrl.selectedUVC==undefined\"></div> </div> </div> <div class=uvc_list_container> <div class=uvc_list> <div class=sort_div> {{'labels.declaration.uvc.formulaire.LABEL_TRI'|translate}} <select name=sort_field ng-model=ctrl.sort_field ng-change=ctrl.sort()> <option value=date selected=selected>{{'labels.declaration.uvc.web.DATE_AJOUT' | translate}}</option> <option value=ordre_alphabetique>{{'labels.declaration.uvc.web.ORDRE_ALPHABETIQUE' | translate}}</option> <option value=montant_contribution_croissant>{{'labels.declaration.uvc.web.MONTANT_CONTRIB_CROISSANT' | translate}}</option> <option value=montant_contribution_decroissant>{{'labels.declaration.uvc.web.MONNAIE_CONTRIB_DECROISSANT' | translate}}</option> </select> </div> <div class=search_div> <span class=recherche_uvc_img ng-click=\"ctrl.search_field.length>0 &&ctrl.search()\"></span> <input type=text placeholder=\"{{'labels.declaration.uvc.formulaire.LABEL_Recherche'|translate}}\" ng-model=ctrl.search_field ng-keyup=\"($event.keyCode == 13 || !ctrl.search_field.length ) && ctrl.search()\"/> </div> <table class=table_emballages> <tr ng-repeat=\"emballage in ctrl.listUvc\" ng-class=\"{'uvc_selected':ctrl.selectedUVC.LigneDeclarationId==emballage.LigneDeclarationId}\"> <td style=width:10%> <span ng-class=\"{'uvc_valide':emballage.Valider,'uvc_non_valide':!emballage.Valider}\"></span> </td> <td> <div style=float:left> <a ng-class=\"{'uvc_lib':ctrl.valide,'uvc_lib_disabled':!ctrl.valide}\" ng-click=\"ctrl.valide && ctrl.selectUvc(emballage)\">{{emballage.Libelle!=''?emballage.Libelle:'labels.declaration.uvc.formulaire.BTN_NEW_UVC' | translate}}</a><br/> <span>{{emballage.NbUvcEmballMenagers | thousandSeparator}}</span> UVC - <span>{{emballage.ContribTotaleLigne | decimalSeparator}} </span> {{'labels.declaration.uvc.formulaire.MONNAIE' | translate}} </div> <a ng-show=\"emballage.Valider && ctrl.valide && !(ctrl.selectedUVC!=undefined&& ctrl.vue=='ecriture')\" ng-click=ctrl.copyUvc(emballage.LigneDeclarationId) class=uvc_duplicate></a> <a ng-show=\"(ctrl.valide ||!emballage.Valider) && (!(ctrl.selectedUVC!=undefined && ctrl.vue=='ecriture'))\" ng-click=ctrl.editUvc(emballage) class=uvc_edit></a> <a ng-show=\"ctrl.valide || ctrl.selectedUVC==undefined || (ctrl.selectedUVC!=undefined && ctrl.selectedUVC.LigneDeclarationId==emballage.LigneDeclarationId)\" ng-click=ctrl.deleteUvc(emballage.LigneDeclarationId,$index) class=uvc_delete></a> <a ng-show=\"ctrl.selectedUVC!=undefined && ctrl.selectedUVC.LigneDeclarationId==emballage.LigneDeclarationId && ctrl.vue=='ecriture' && !emballage.Valider && emballage.Libelle!=''\" ng-click=ctrl.CancelEdition(ctrl.uvc_web_form_id) class=uvc_cancel>{{'labels.declaration.uvc.formulaire.BTN_ANNULER' | translate}}</a> <a ng-show=\"ctrl.selectedUVC!=undefined && ctrl.selectedUVC.LigneDeclarationId==emballage.LigneDeclarationId && ctrl.vue=='ecriture' && !emballage.Valider\" ng-click=ctrl.ValidateUvc(ctrl.uvc_web_form_id) class=uvc_save>{{'labels.declaration.uvc.formulaire.BTN_ENREGISTRER' | translate}}</a> </td> </tr> </table> <div class=bloc_pagination ng-show=\"ctrl.pages.length>1\"> <ul> <li ng-repeat=\"page in ctrl.pages\"> <span ng-class=\"{'selected_page':ctrl.page_index==page}\" ng-click=ctrl.setPage(page);>{{page+1}}</span> </li> </ul> </div> </div> <div class=create_uvc_bloc> <button id=ajout class=create_uvc_btn ng-click=ctrl.AddUvc()>{{'labels.declaration.uvc.formulaire.BTN_ADD_UVC'|translate}}</button> </div> </div> <div class=bottom_bar> {{'labels.declaration.uvc.formulaire.LABEL_CONTRIBUTION'|translate}} {{ctrl.annee}} : <span class=contribution>{{ctrl.contribution_totale | decimalSeparator}} {{'labels.declaration.uvc.formulaire.MONNAIE' | translate}}</span> <span class=ht>{{'labels.declaration.uvc.formulaire.LABEL_HT'|translate}}</span> <button class=\"btn suivant\" ng-disabled=!ctrl.valide ng-click=ctrl.Continue()>{{'labels.declaration.uvc.formulaire.BTN_NEXT_STEP'|translate}}</button> <a class=btn_retour ng-click=ctrl.goBack()>{{'labels.declaration.uvc.formulaire.BTN_ANNULER'|translate}}</a> </div> </div> <div class=creat_declaration_web data-ng-if=\"ctrl.id_declaration=='' || ctrl.error\"> {{'labels.declaration.uvc.formulaire.ERREUR_DECLARATION'|translate}} </div> ";
},function(e,t){e.exports="<div class=mymodal> <div ng-hide=validationCtrl.loading> <a class=close-icon href=/mon-espace/declaration/accueil></a> <div ng-show=\"validationCtrl.status_code==200\"> <h1>{{'labels.declaration.uvc.popin_validation.TITLE' | translate}}</h1> <p>{{'labels.declaration.uvc.popin_validation.RAPPEL_CONTRIB' | translate}}<span class=chiffre_decla>{{validationCtrl.RecapDeclaration.ContributionTotale | decimalSeparator}} € {{'labels.declaration.uvc.popin_validation.TAXE' | translate}}</span></p> <div class=list_widget> <a class=\"widget env_justif\" ng-show=\"{{validationCtrl.RecapDeclaration.Decote==true&&validationCtrl.RecapDeclaration.AttestationRecycleValidee==false}}\" href=\"/OldApp/Declaration/EcdJustificatifs?typeDocument=AttestRec\"> {{'labels.declaration.uvc.popin_validation.LABEL_BTN_ATTESTATIONS' | translate}} </a> </div> <button class=suivant onclick='window.location.href=\"/mon-espace/declaration/accueil\"'> {{'labels.declaration.uvc.popin_validation.LABEL_BTN_ACCUEIL' | translate}} </button> </div> <div ng-hide=\"validationCtrl.status_code==200\"> <h1>{{'labels.declaration.uvc.popin_validation.ERROR_MSG' | translate}}</h1> </div> </div> <div class=loading_spinner ng-show=validationCtrl.loading> <loading></loading> </div> </div>"},function(e,t){e.exports="<div class=bloc_wrapper> <div class=bloc_wrapper_content> <form id=mail_form name=mail_form novalidate> <h1><strong>{{'labels.declaration.uvc.send_mails.TITLE' | translate}}</strong></h1> <p> {{'labels.declaration.uvc.send_mails.TITLE_ADD_MSG_1' | translate}} <br/> {{'labels.declaration.uvc.send_mails.TITLE_ADD_MSG_2' | translate}} <br/> <br/> {{'labels.declaration.uvc.send_mails.TITLE_ADD_MSG_3' | translate}} </p> <table class=\"tab_declaration ajout_desti\"> <tr> <td> <img src=/sites/default/files/inline-images/pict_mail.png class=marg-img /><input type=email name=email ng-model=validationCtrl.mailinput ng-keyup=\"$event.keyCode == 13 && !mail_form.email.$invalid && !mail_form.email.$error.pattern && validationCtrl.addMails()\" ng-pattern=validationCtrl.email_pattern autocomplete=off placeholder=\"{{'labels.declaration.uvc.send_mails.PLACEHOLDER_EMAIL' | translate}}\" required> <span ng-show=\"mail_form.email.$invalid && !mail_form.email.$pristine && mail_form.email.$error.pattern\" class=\"help-block error\">{{'labels.declaration.uvc.send_mails.LABEL_ERROR' | translate}}</span> </td> <td></td> </tr> <tr ng-repeat=\"mail in validationCtrl.mails\"> <td><input type=email name=email placeholder={{mail}} class=no-border disabled=disabled></td> <td><div ng-click=validationCtrl.removeMail(mail) class=pict_delete>&nbsp;</div></td> </tr> </table> <input id=ajout type=button value=\"{{'labels.declaration.uvc.send_mails.LABEL_ADD_RECIPIENTS' | translate}}\" ng-disabled=mail_form.$invalid ng-click=validationCtrl.addMails()> <br/> </form> </div> <div class=bottom_bar> <ul> <li><input type=button id=btn-grey ng-click=validationCtrl.saveMails() value=\"{{'labels.declaration.uvc.send_mails.LABEL_BTN_NO_VALIDATE' | translate}}\"/></li> <li><input type=checkbox ng-model=checked ng-click=selected() /><label class=info-check>{{'labels.declaration.uvc.send_mails.LABEL_CERTIFIE' | translate}}</label></li> <li><input type=button class=btn ng-disabled=!checked ng-click=validationCtrl.valideMails() value=\"{{'labels.declaration.uvc.send_mails.LABEL_BTN_VALIDATE' | translate}}\"/></li> </ul> </div> </div>"},function(e,t){e.exports="<div ng-if=widgetrpcCtrl.runRpcFlag> <a class=slogan>{{'labels.declaration.rpcFaqWidget.RUN_RPC' | translate}}</a> </div> <div ng-if=\"widgetrpcCtrl.faqFlag && widgetrpcCtrl.ecoContextFlag\"> <div class=cursor onclick='window.location.href=\"/mon-espace/faq/accueil#declaration\"'> <h3>{{'labels.declaration.rpcFaqWidget.FAQ_TITLE_1' | translate}}</h3> <p class=slogan>{{'labels.declaration.rpcFaqWidget.FAQ_SLOGAN_1' | translate}}<br/> {{'labels.declaration.rpcFaqWidget.FAQ_SLOGAN_2' | translate}}</p> <button class=\"trans suivant\" onclick='window.location.href=\"/mon-espace/faq/accueil#declaration\"'>{{'labels.declaration.rpcFaqWidget.FAQ_TEXT_1' | translate}}<br/> {{'labels.declaration.rpcFaqWidget.FAQ_TEXT_2' | translate}}</button></div> </div> <div ng-if=\"widgetrpcCtrl.faqFlag && widgetrpcCtrl.adelpheContextFlag\" class=cursor onclick='window.location.href=\"/mon-espace/faq/accueil#declaration\"'> <h3 class=ng-binding>{{'labels.declaration.rpcFaqWidget.FAQ_TITLE' | translate}}</h3> <button class=\"trans suivant\" onclick='window.location.href=\"/mon-espace/faq/accueil#declaration\"'>{{'labels.declaration.rpcFaqWidget.FAQ_TEXT_1' | translate}}<br/> {{'labels.declaration.rpcFaqWidget.FAQ_TEXT_2' | translate}}</button> </div> "},function(e,t){e.exports="<div> <div class=cursor onclick='window.location.href=\"/mon-espace/declaration/excel/uvc\"'> <h3>{{'labels.declaration.choixdeclaration.widget_upload.titre' | translate}}</h3> <h4 class=slogan>{{'labels.declaration.choixdeclaration.widget_upload.DEPOT_FICHIER' | translate}}</h4> <p>{{'labels.declaration.choixdeclaration.widget_upload.MSG1' | translate}}</p> <button class=\"trans suivant-noir\" onclick='window.location.href=\"/mon-espace/declaration/excel/uvc\"'> {{'labels.declaration.choixdeclaration.widget_upload.MSG2' | translate}} </button> </div> </div> "},function(e,t,a){var l=a(62),i="declaration.commons";angular.module(i,[]),angular.module(i).factory("popupsService",["$uibModal","$q",l]),e.exports=i},function(e,t){e.exports=function(e){this.messageError=e.messageError,this.contributionTotale=e.contributionTotale,this.closePopup=function(t){"reject"==t?e.controlModal("reject"):e.controlModal("resolve")}}},function(e,t,a){e.exports=function(e,t){var l=this,i=a(61);this.controlModal=function(e){switch(e){case"resolve":console.log("resolve modal : ",e),l.modal.close(),l.deferedModal.resolve();break;case"reject":console.log("reject modal : ",e),l.modal.close(),l.deferedModal.reject("test")}};var n=function(a){return l.deferedModal=t.defer(),console.log("into function"),l.modal=e.open({template:a,controller:["popupsService",i],controllerAs:"popupsCtrl",backdrop:"static",keyboard:!1}),l.deferedModal.promise};return this.openDepotDeclarationFailure=function(e){l.messageError=e;var t=a(16);return n(t)},this.openDepotDeclarationSuccess=function(e){l.contributionTotale=e;var t=a(17);return n(t)},this}},function(e,t,a){var l=a(64),i=a(65),n="declaration.resources";angular.module(n,[]),angular.module(n).factory(l.name,l.dependencies),angular.module(n).factory(i.name,i.dependencies),e.exports=n},function(e,t){function a(){this.name="declarationResource",this.dependencies=["$http","$window"],this.resource=function(e,t){var a={};return a.getListTemplateDeclarationExcel=function(){var t="/content/templates_declaration_excel";return e({method:"GET",url:t})},a.sendDeclarationUvcXml=function(t,a,l,i,n,o,r,c){console.log("sendDeclarationUvcXml : file =",t);var s="/declarationApp/p/clients/"+a+"/declarations/"+i,d=new FormData;return d.append("file",t),d.append("flag_corrective",n),d.append("motif",o),d.append("commentaire",r),d.append("id_declaration",c),d.append("DeclarantID",l),e.post(s,d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},a.getAnneesDeclaration=function(t){var a="/declarationApp/p/clients/"+t+"/AnneesDeclaration";return e({method:"GET",url:a})},a.getAnneesDeclaree=function(t){var a="/declarationApp/p/clients/"+t+"/AnneesDeclaree";return e({method:"GET",url:a})},a.getMotifsCorrective=function(){var t="/declarationApp/p/declarations/motifs_correctives";return e({method:"GET",url:t})},a.getHistoriqueDeclaration=function(t,a){console.log("get declaration historique");var l="/declarationApp/p/clients/"+t+"/declarations?vue="+a;return e({method:"GET",url:l})},a.getUrl_historique_declaration="/mon-espace/declaration/historique",a.RpcFileExist=function(t,a){console.log("get rpc file declaration");var l="/api/clients/"+t+"/rpc_isExist/"+a;return e({method:"GET",url:l})},a.getRpcFile=function(t,a){console.log("get rpc file attachement declaration: "+t+" "+a);var l="/api/clients/"+t+"/rpc/"+a;return e({method:"GET",url:l})},a.GetCacByName=function(t,a){var l="/externalApi/p/cacAPI/annuaire/cacpp?nom="+t+"&max_num="+a;return e({method:"GET",url:l})},a.CacCreateProject=function(t){console.log("in service sent  "+t);var a="/externalApi/p/cacAPIprojects/eo-notification/missions";return e({method:"POST",url:a,data:t})},a.CacDeleteProject=function(t){var a="/externalApi/p/cacAPIprojects/eo-notification/missions/"+t;return e({method:"DELETE",url:a})},a.GetExpertByName=function(t,a){var l="/externalApi/p/ecAPI/csoec/getEcByName?nom="+t+"&max_num="+a;return e({method:"GET",url:l})},a.ExpertsCreateProject=function(t,a,l,i,n,o,r){console.log(t,a,l,i,n,o,r);var c="/externalApi/p/ecAPIprojects/api/eco-organisme/projects",s="id="+t+"&raisonSociale="+n+"&idClient="+a+"&idSignataire="+r+"&montant="+i+"&annee="+l+"&siren="+o;return e({method:"POST",url:c,headers:{"content-type":"application/x-www-form-urlencoded"},data:s})},a.ExpertsDeleteProject=function(t){var a="/externalApi/p/ecAPIprojects/api/eco-organisme/projects/"+t;return e({method:"DELETE",url:a,headers:{"content-type":"application/x-www-form-urlencoded"}})},a.ExpertsGetProject=function(t){var a="/externalApi/p/ecAPIprojects/api/eco-organisme/projects/"+t;return e({method:"GET",url:a,headers:{"content-type":"application/x-www-form-urlencoded"}})},a.getSiren=function(t){var a="/declarationApp/p/rpcs/getsiren/"+t;return e({method:"GET",url:a})},a.SaveNewMission=function(t,a,l,i,n,o,r,c,s,d){var u="/declarationApp/p/rpcs/saveNewMission",p=new FormData;return p.append("idMission",t),p.append("clientNumber",a),p.append("annee",l),p.append("contribTotal",i),p.append("signataire",n),p.append("nom",o),p.append("civilite",r),p.append("email",c),p.append("typeexpert",s),p.append("statut",d),e({method:"POST",url:u,data:p,transformRequest:angular.identity,headers:{"Content-Type":void 0}})},a.UpdateCancelMission=function(t){var a="/declarationApp/p/rpcs/UpdateCancelMission/"+t;return e({method:"DELETE",url:a})},a.getAmount=function(t,a){var l="/declarationApp/p/rpcs/getSimulatedAmount/"+t+"/"+a;return e({method:"GET",url:l})},a.getSiret=function(t){var a="/PortailApp/Clients/"+t;return e({method:"GET",url:a})},a.getChoixTypesDeclaration=function(t,a,l){var i="/declarationApp/p/clients/"+l+"/declarationsRecommandees/"+t+"/"+a;return e({method:"GET",url:i})},a.getFichierExcelUvc=function(e,a,l){var i="/declarationApp/p/clients/"+l+"/templateUvc/"+e+"/"+a;t.location.href=i},a.getContenuBloc=function(){var t="/content/choix_type_decla";return e({method:"GET",url:t})},a.getDeclarationStatus=function(){console.log("get declaration drupal");var t="/content/declaration_statut";return e({method:"GET",url:t})},a.InitialiserDeclarationUVC=function(t,a,l){var i="/declarationApp/p/clients/"+t+"/initialiser_declarations/"+l+"?DeclarantID="+a;return e({method:"POST",url:i,data:{DeclarantID:a},transformRequest:angular.identity,headers:{"Content-Type":void 0}})},a.SaveDeclarationForfait=function(t,a,l,i,n,o){var r="/declarationApp/p/clients/"+t+"/declarations/forfait/"+l,c=new FormData;return c.append("flag_corrective",i),c.append("motif",n),c.append("commentaire",o),c.append("DeclarantID",a),e.post(r,c,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},a.SupprimerDeclaration=function(t,a,l,i,n){if(null==a){var o="/declarationApp/p/clients/"+t+"/annee/"+l+"/suppressionold";return e({method:"DELETE",url:o})}var o="/declarationApp/p/declarations/"+a+"/suppressionnew";return e({method:"DELETE",url:o})},a.getContenuSimulateurExcel=function(){var t="/content/simulateur";return e({method:"GET",url:t})},a.getExcelLinks=function(){var t="/content/files_excel";return e({method:"GET",url:t})},a.sendDeclarationAR=function(t,a,l){console.log("sendDeclarationAR: mails =",t),console.log("idDeclaration: ",a);var i="/declarationApp/p/declarations/"+a+"/validation/"+l+"/?mails="+t;return e({method:"POST",data:{mails:t},url:i,transformRequest:angular.identity,headers:{"Content-Type":void 0}})},a.saveMailsAR=function(t,a){console.log("saveMailsAR: mails =",t),console.log("idDeclaration: ",a);var l="/declarationApp/p/declarations/"+a+"/mails/?mails="+t;return e({method:"POST",data:{mails:t},url:l,transformRequest:angular.identity,headers:{"Content-Type":void 0}})},a.findMailsAR=function(t){var a="/declarationApp/p/declarations/"+t+"/mails";return e({method:"GET",url:a})},a.getRecap=function(t){var a="/declarationApp/p/declarations/"+t;return e({method:"GET",url:a})},a.getAnneeDeclarationAsaisir=function(t){var a="/declarationApp/p/clients/"+t+"/declarations_a_saisir/";return e({method:"GET",url:a})},a.getTemplateExcelSectDetail=function(e,t,a,l){console.log("getTemplateExcelSectDetail",e,t);var i=!1;"2007"==a&&(i=!0);var n="";n="sectorielle"==t?"/OldApp/Declaration/EcdExport?type=Secto&annee="+e+"&mode=PreRempli&isExcel2007OrMore="+i+"&lang="+l:"/OldApp/Declaration/EcdExport?type=Detaille&annee="+e+"&mode=PreRempli&isExcel2007OrMore="+i+"&lang="+l;var o=document.createElement("form");o.method="post",o.action=n,document.body.appendChild(o),o.submit()},a.GetLienTelechargementSectDetail=function(e,a){var l;l="DETAILLEE"==e?"/OldApp/Declaration/EcdExport?type=Detaille&mode=Histo&annee="+a:"/OldApp/Declaration/EcdExport?type=Secto&mode=Histo&annee="+a,t.location.href=l},a.GetLienTelechargementUVC=function(e,a){var l="/declarationApp/p/clients/"+e+"/telechargementUvc/"+a+"/FR";t.location.href=l},a.getListUvc=function(t,a,l,i,n){var o="/declarationApp/p/declarations/"+t+"/getListUVC/"+a+"/"+l+"?search="+i+"&lastpage="+n;return e({method:"GET",url:o})},a.getListUVC_firstLoad=function(t){var a="/declarationApp/p/declarations/"+t+"/getListUVC_firstLoad";return e({method:"GET",url:a})},a.goToChoixDeclaration=function(e){var a="/mon-espace/declaration/choix/#?annee="+e;t.location.href=a},a.goToUploadExcel=function(e,a){var l="/mon-espace/declaration/excel/uvc/#?annee="+a+"&id_declaration="+e;t.location.href=l},a.goToUploadExcel2=function(e,t){var a="/mon-espace/declaration/excel/uvc/#?annee="+t+"&id_declaration="+e,l=document.createElement("form");l.method="post",l.action=a,document.body.appendChild(l),l.submit()},a.goToDeclarationWeb=function(e,l,i,n,o,r){console.log("id_declaration, annee, type_declaration, flag_corrective, motif, commentaire",e+"-"+l+"-"+i+"-"+n+"-"+o+"-"+r);var c="";"uvc"==i?(c="/mon-espace/declaration/web/uvc/#?annee="+l+"&id_declaration="+e,t.location.href=c):a.postDeclarationWebSectDetail(l,i,n,o,r)},a.postDeclarationWebSectDetail=function(e,t,a,l,i){console.log("postDeclarationWebSectDetail"),console.log(e,t,a,l,i);var n="";n="sectorielle"==t.toLowerCase()?"/OldApp/Declaration/EcdSecto":"/OldApp/Declaration/EcdDetaillee";var o=document.createElement("form");o.method="post",o.action=n;var r=document.createElement("input");r.setAttribute("name","annee"),r.setAttribute("value",e),o.appendChild(r);var c=document.createElement("input");c.setAttribute("name","flag_corrective"),c.setAttribute("value",a),o.appendChild(c);var s=document.createElement("input");s.setAttribute("name","motif"),s.setAttribute("value",l),o.appendChild(s);var d=document.createElement("input");d.setAttribute("name","commentaire"),d.setAttribute("value",i),o.appendChild(d),document.body.appendChild(o),o.submit()},a.goToDelarationForfait=function(e){var a="/mon-espace/declaration/forfait/#?annee="+e;t.location.href=a},a.GetLienFinalisationForfait=function(e,a,l){var i="";i=4==l?"/mon-espace/declaration/forfait/#?annee="+a+"&id_declaration="+e+"&action=control_ecart":"/mon-espace/declaration/forfait/#?annee="+a+"&id_declaration="+e+"&action=validation",t.location.href=i},a.goToAccueilDeclaration=function(){var e="/mon-espace/declaration/accueil";t.location.href=e},a.getAnneesContractualisation=function(t){var a="/declarationApp/p/clients/"+t+"/GetAnneeContractualisation";return e({method:"GET",url:a})},a.goToHistoriqueDeclaration=function(){var e="/mon-espace/declaration/historique";t.location.href=e},a.SaveSocietesMarques=function(t,a,l,i){var n="/declarationApp/p/declarations/"+t+"/societes_marques/?continue="+i;return e({method:"POST",url:n,data:angular.toJson({marque:l,soc:a})})},a.getPays=function(){var t="/declarationApp/p/pays";return e({method:"GET",url:t})},a.getListEntreprise=function(t){var a="/declarationApp/p/declarations/"+t+"/getListEntreprise/";return e({method:"GET",url:a})},a.getListMarque=function(t){var a="/declarationApp/p/declarations/"+t+"/getListMarque/";return e({method:"GET",url:a})},a.getProduits=function(){var t="/declarationApp/p/produits";return e({method:"GET",url:t})},a.getProduitsSpec=function(){var t="/declarationApp/p/produits_spec";return e({method:"GET",url:t})},a.CreateDeclarationUvcWeb=function(t,a,l,i,n,o){var r="/declarationApp/p/clients/"+t+"/declaration_uvc_web/"+l,c=new FormData;return c.append("flag_corrective",i),c.append("motif",n),c.append("commentaire",o),c.append("DeclarantID",a),e.post(r,c,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},a.goToDeclarationUvcWeb=function(e){var a="/mon-espace/declaration/web/uvc/#?id_declaration="+e;t.location.href=a},a.AddUvcWeb=function(t){var a="/declarationApp/p/declarations/"+t+"/add_uvc_web";return e({method:"POST",url:a,data:{id_declaration:t}})},a.copyUvc=function(t){var a="/declarationApp/p/lignesDeclaration/"+t+"/copy_uvc_web";return e({method:"GET",url:a})},a.UpdateUvcWeb=function(t){var a="/declarationApp/p/lignesDeclaration/update_uvc_web";return e({method:"POST",url:a,data:t})},a.CancelEdition=function(t){var a="/declarationApp/p/lignesDeclaration/set_valide_uvc_web/"+t;return e({method:"POST",url:a,data:{LigneDeclarationId:t}})},a.InvalidateUvcWeb=function(t){var a="/declarationApp/p/lignesDeclaration/invalidate_uvc_web/"+t;return e({method:"POST",url:a,data:{LigneDeclarationId:t}})},a.deleteUvc=function(t){var a="/declarationApp/p/lignesDeclaration/"+t+"/delete_uvc_web";return e({method:"DELETE",url:a})},a.CalculerNbBobinesAlimentaire=function(t){var a="/declarationApp/p/CalculerNbBobinesAlimentaire";return e({method:"POST",url:a,data:t})},a.checkEtape=function(t,a){var l="/declarationApp/p/declarations/"+t+"/etape/"+a;return e({method:"GET",url:l})},a.ValidateDeclaWeb=function(t){var a="/declarationApp/p/declarations/validate/"+t;return e({method:"POST",url:a,data:{id_declaration:t}})},a.goToMarquesSocietes=function(e){var a="/mon-espace/declaration/web/uvc/entreprises-marques/#?id_declaration="+e;t.location.href=a},a.goToValidationDecWeb=function(e){var a="/mon-espace/declaration/web/uvc/validation/#?id_declaration="+e;t.location.href=a},a.getAnneesContractualisation=function(t){var a="/declarationApp/p/clients/"+t+"/GetAnneeContractualisation";return e({method:"GET",url:a})},a.getMotifEcart=function(){var t="/declarationApp/p/MotifsEcart";return e({method:"GET",url:t})},a.SendCommentaire=function(t,a,l,i){var n="/declarationApp/p/declarations/"+t+"/ControleEcart/",o=new FormData;return o.append("go_to_next_step",l),o.append("selected_motif",i),o.append("commentaire",a),o.append("declarationid",t),e.post(n,o,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},a.getControleEcart=function(t){var a="/declarationApp/declarations/"+t+"/VariationControleEcart";return e({method:"GET",url:a})},a.getMotifCommentaireControleEcart=function(t){var a="/declarationApp/p/declarations/"+t+"/getControleEcart";return e({method:"GET",url:a})},a.getRpcs=function(t){var a="/declarationApp/p/rpcs/"+t+"/getLast";return e({method:"GET",url:a})},a.activateCacCode=function(t){var a="/declarationApp/p/rpcs/validatecode";return e({method:"POST",url:a,headers:{"content-type":"application/json;charset=UTF-8"},data:t})},a.sentDeclaration=function(t){console.log("declaration form to sent : ",t);var a="/declarationApp/p/clients/{ClientID}/DeclarationsConseiller/{Annee}",l=new FormData;return l.append("file",t.fileAttachment),l.append("id_declaration",t.declarationId),l.append("DeclarantID",t.declarantId),l.append("commentaire",t.comment),l.append("motif",t.motif),l.append("flag_corrective",t.correctiveFlag),e({method:"POST",url:a.replace("{ClientID}",t.clientId).replace("{Annee}",t.year),data:l,transformRequest:angular.identity,headers:{"Content-Type":void 0}})},a.getMotifs=function(){var t="/declarationApp/p/declarations/motifs_correctives_conseiller";return e({method:"GET",url:t})},a.goBack=function(){t.history.back()},a},this.dependencies.push(this.resource)}e.exports=new a},function(e,t){function a(){this.name="recommandationResource",this.dependencies=["$http"],this.resource=function(e){var t={};return t},this.dependencies.push(this.resource)}e.exports=new a},function(e,t,a){var l=a(67),i=a(68),n="declaration.accueil";angular.module(n,[]),angular.module(n).service("accueil_declarationService",["declarationResource","userService",i]),angular.module(n).controller("accueil_declarationCtrl",["accueil_declarationService","$window",l]),angular.module(n).component("accueilDeclaration",{template:a(18),controller:"accueil_declarationCtrl",controllerAs:"accueil_declarationCtrl",bindings:{}}),e.exports=n},function(e,t){e.exports=function(e,t,a){var l=this;l.user=e.getUserInfo(),this.$onInit=function(){console.log("initialisation status declaration"),e.getDeclarationBloc().then(function(){l.declarationBloc=e.declarationBloc,l.notDeclarationBloc=e.notDeclarationBloc}),e.getAnneesContractualisation(l.user.numero_client).then(function(e){l.AnneesContractualisation=e.data,console.log("AnneesContractualisation :",l.AnneesContractualisation)},function(e){}).finally(function(){})},l.annee,l.isVisible=!1;var i=new Date,n=i.getFullYear();e.getAnneeDeclarationAsaisir(e.getNumeroClient()).then(function(e){console.log("annee en cours:",n),console.log("getAnneeDeclarationAsaisir: ",e),l.annee=e.data,""!=l.annee&&n!=l.AnneesContractualisation&&(l.isVisible=!0)}),l.goToChoixDeclaration=function(){var e="/mon-espace/declaration/choix#?annee="+l.annee;t.location.href=e}}},function(e,t){function a(e,t){var a=this;const l="declaration a faire",i="pas de declaration a faire";a.getAnneeDeclarationAsaisir=e.getAnneeDeclarationAsaisir,a.getAnneesContractualisation=e.getAnneesContractualisation,a.user={numero_client:void 0,id_declarant:void 0,id_SF:void 0},this.getUserInfo=function(){return a.user.numero_client=t.getUserIdSAP(),a.user.id_declarant=t.getUserIdCorrespondent(),a.user.id_SF=t.getUserIdSF(),a.user},this.getNumeroClient=function(){return t.getUserIdSAP()},this.getDeclarationBloc=function(){return console.log("Service initialisation status declaration"),e.getDeclarationStatus().then(function(e){var o=t.getLanguage();console.log("success : ",e);var r=t.searchInArray(e.data,n,{lang:o,declarationStatus:l}),c=t.searchInArray(e.data,n,{lang:o,declarationStatus:i});a.declarationBloc=r.body[0].value,a.notDeclarationBloc=c.body[0].value,console.log("declaration : ",a.declarationBloc),console.log("pas de declaration : ",a.notDeclarationBloc)},function(e){console.log("failure : ",e)})};var n=function(e){return e.langcode[0].value==this.lang&&e.title[0].value==this.declarationStatus};return a}e.exports=a},function(e,t,a){(function(t){var l=a(70),i=a(71),n="declaration.choixdeclaration";angular.module(n,[]),angular.module(n).service("choixdeclarationService",["declarationResource","userService",i]),angular.module(n).controller("choixdeclarationCtrl",["choixdeclarationService","$uibModal","$scope","$location","$window",l]),angular.module(n).component("choixdeclaration",{template:a(19),controller:"choixdeclarationCtrl",controllerAs:"choixdeclarationCtrl",bindings:{}}),angular.module(n).value("uiSliderConfig",{}).directive("uiSlider",["uiSliderConfig","$timeout",function(e,a){return e=e||{},{require:"ngModel",compile:function(){var l=function(l,i,n,o){function r(e,t){return t?parseFloat(e):parseInt(e,10)}function c(){i.hasClass("ui-slider")&&i.slider("destroy")}var s=angular.copy(l.$eval(n.uiSlider)),d=angular.extend(s||{},e),u={min:null,max:null},p=["min","max","step","lowerBound","upperBound"],m=!angular.isUndefined(n.useDecimals),v=angular.isDefined(d.updateOn)?d.updateOn:"slide",_=function(){angular.isArray(o.$viewValue)&&d.range!==!0&&(console.warn("Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true."),d.range=!0),angular.forEach(p,function(e){angular.isDefined(n[e])&&(d[e]=r(n[e],m))}),i.slider(d),_=angular.noop};angular.forEach(p,function(e){n.$observe(e,function(t){t&&(_(),d[e]=r(t,m),i.slider("option",e,r(t,m)),o.$render())})}),n.$observe("disabled",function(e){_(),i.slider("option","disabled",!!e)}),l.$watch(n.uiSlider,function(e){_(),void 0!==e&&i.slider("option",e)},!0),a(_,0,!0),i.bind(v,function(e,a){var n;if(a.values){var r=a.values.slice();d.lowerBound&&r[0]<d.lowerBound&&(r[0]=Math.max(r[0],d.lowerBound)),d.upperBound&&r[1]>d.upperBound&&(r[1]=Math.min(r[1],d.upperBound)),r[0]===a.values[0]&&r[1]===a.values[1]||(n=!0,a.values=r)}else{var c=a.value;d.lowerBound&&c<d.lowerBound&&(c=Math.max(c,d.lowerBound)),d.upperBound&&c>d.upperBound&&(c=Math.min(c,d.upperBound)),c!==a.value&&(n=!0,a.value=c)}if(o.$setViewValue(a.values||a.value),t(a.handle).find(".ui-slider-tip").text(a.value),l.$apply(),n)return setTimeout(function(){i.slider("value",a.values||a.value)},0),!1}),o.$render=function(){_();var e=d.range===!0?"values":"value";if(d.range===!0||!isNaN(o.$viewValue)||o.$viewValue instanceof Array?d.range&&!angular.isDefined(o.$viewValue)&&(o.$viewValue=[0,0]):o.$viewValue=0,d.range===!0){if(o.$viewValue&&angular.isString(o.$viewValue)&&1===(o.$viewValue.match(/,/g)||[]).length){var t=o.$viewValue.split(",");o.$viewValue=[Number(t[0]),Number(t[1])]}angular.isDefined(d.min)&&d.min>o.$viewValue[0]&&(o.$viewValue[0]=d.min),angular.isDefined(d.max)&&d.max<o.$viewValue[1]&&(o.$viewValue[1]=d.max),o.$viewValue[0]>o.$viewValue[1]&&(u.min>=o.$viewValue[1]&&(o.$viewValue[1]=u.min),u.max<=o.$viewValue[0]&&(o.$viewValue[0]=u.max)),u.min=o.$viewValue[0],u.max=o.$viewValue[1]}i.slider(e,o.$viewValue)},l.$watch(n.ngModel,function(){d.range===!0?(o.$render(),t(i).find(".ui-slider-tip").each(function(e,a){t(a).text(o.$viewValue[e])})):t(i).find(".ui-slider-tip").text(o.$viewValue)},!0),l.$on("$destroy",c),i.one("$destroy",c)},i=function(e,l,i,n){var o=angular.extend({},e.$eval(i.uiSlider)),r=["min","max","step","tick","tip"];if(angular.forEach(r,function(e){angular.isDefined(i[e])&&(o[e]=i[e])}),angular.isDefined(o.tick)&&angular.isDefined(o.step))for(var c=parseInt((parseInt(o.max)-parseInt(o.min))/parseInt(o.step)),s=c;s>=0;s--){var d=s/c*100+"%";t("<div/>").addClass("ui-slider-tick").appendTo(l).css({left:d})}angular.isDefined(o.tip)&&a(function(){var e=l.find(".ui-slider-handle");e&&e.length>1&&n.$viewValue&&angular.isArray(n.$viewValue)?(t(e[0]).append('<div class="ui-slider-tip">'+n.$viewValue[0]+"</div>"),t(e[1]).append('<div class="ui-slider-tip">'+n.$viewValue[1]+"</div>")):l.find(".ui-slider-handle").append('<div class="ui-slider-tip">'+n.$viewValue+"</div>")},10)};return{pre:l,post:i}}}}]),e.exports=n}).call(t,a(15))},function(e,t,a){e.exports=function(e,t,l,n,o){var r=this;r.typesDeclarationsTextes=[],r.choix=[],r.html=[],r.selected_type,r.type_declaration,r.modal_instance,r.annee_excel="",r.langue_excel="",r.nbuvc,r.step=1,r.RecapDeclaration,r.declarationFile,r.errors,r.modal_instance,r.status_code,r.mails=[],r.mailinput,r.email_pattern=/^[a-zA-Z0-9_.-]*@[a-zA-Z0-9_.-]*\.[a-zA-Z]{2,}$/,r.langue=e.getLanguage(),r.user=e.getUserInfo(),r.annee=n.search().annee,r.annee>=2016?r.nbuvc=83:r.nbuvc=25,this.GetChoix=function(){var t=r.nbuvc;t=r.annee>=2016?r.nbuvc<34?1e4:r.nbuvc>33&&r.nbuvc<67?5e5:500001:r.nbuvc<50?18e4:180001,console.log("self.nbuvc converted_value",t),e.getChoixTypesDeclaration(t,r.annee,r.user.numero_client).then(function(e){for(console.log("success",e),r.html=[],r.choix=[],r.choix=e.data.split(","),r.selected_type=r.choix[0],j=0;j<r.choix.length;j++)r.html.push(r.getTypeDeclarationParId(r.choix[j]))})},e.contenu().then(function(e){for(var t in e.data)e.data[t].body&&e.data[t].title&&(console.log("response.data[index].langcode[0].value",e.data[t].langcode[0].value),r.typesDeclarationsTextes.push({titre:e.data[t].title[0].value,html:e.data[t].body[0].value,type:e.data[t].field_type_decla[0].value}));console.log("self.typesDeclarationsTextes",r.typesDeclarationsTextes)}),this.GoToDelarationEnLigne=function(){r.selected_motif=sessionStorage.getItem("motif_corrective"),r.commentaire=sessionStorage.getItem("commentaire_corrective"),null!=r.selected_motif?r.flag_corrective=1:r.flag_corrective=0,"forfait"==r.selected_type?e.goToDelarationForfait(r.annee):"uvc"==r.selected_type?e.CreateDeclarationUvcWeb(r.user.numero_client,r.user.id_declarant,r.annee,1==r.flag_corrective,r.selected_motif,r.commentaire).then(function(t){console.log("submit - ok : "+JSON.stringify(t)),e.goToDeclarationWeb(t.data,r.annee,r.selected_type,r.flag_corrective,r.selected_motif,r.commentaire)},function(e){console.error("submit - error : "+JSON.stringify(e))}).finally(function(){}):e.goToDeclarationWeb("",r.annee,r.selected_type,r.flag_corrective,r.selected_motif,r.commentaire)},this.getTypeDeclarationParId=function(e){for(i=0;i<r.typesDeclarationsTextes.length;i++)if(r.typesDeclarationsTextes[i].type==e)return r.typesDeclarationsTextes[i]},this.valideChoixDeclaration=function(){console.log("valideChoixDeclaration",r.vue,",",r.selected_type),"forfait"!=r.selected_type?r.modal_instance=t.open({template:a(20),scope:l,backdrop:"static",keyboard:!1}):this.GoToDelarationEnLigne()},this.openExcelOptionsModal=function(){r.annee_excel="",r.langue_excel="",r.modal_instance.close(),r.modal_instance=t.open({template:a(21),scope:l,backdrop:"static",keyboard:!1})},this.closeModal=function(){r.modal_instance.close()},this.sendDeclarationExcel=function(){"uvc"==r.selected_type?(e.InitialiserDeclarationUVC(r.user.numero_client,r.user.id_declarant,r.annee).then(function(e){console.log("submit - ok : "+JSON.stringify(e))},function(e){console.error("submit - error : "+JSON.stringify(e))}).finally(function(){}),e.getFichierExcelUvc(r.annee_excel,r.langue_excel,r.user.numero_client)):(console.log("excel "+r.selected_type),r.eco_langue="FR","anglais"==r.langue_excel&&(r.eco_langue="EN"),e.getTemplateExcelSectDetail(r.annee,r.selected_type,r.annee_excel,r.eco_langue))},this.$onInit=function(){r.selected_type=n.search().type,"undefined"==typeof r.selected_type?r.selected_type="":r.selected_type=r.selected_type.toLowerCase(),r.vue=n.search().vue,console.log("typeof self.vue",typeof r.vue),"mode_saisie"==r.vue&&this.valideChoixDeclaration(),console.log(r.vue,r.selected_type)}}},function(e,t){function a(e,t){var a=this;return a.getChoixTypesDeclaration=e.getChoixTypesDeclaration,a.contenu=e.getContenuBloc,a.getFichierExcelUvc=e.getFichierExcelUvc,a.InitialiserDeclarationUVC=e.InitialiserDeclarationUVC,a.goToDeclarationWeb=e.goToDeclarationWeb,a.goToDelarationForfait=e.goToDelarationForfait,a.getTemplateExcelSectDetail=e.getTemplateExcelSectDetail,a.CreateDeclarationUvcWeb=e.CreateDeclarationUvcWeb,a.user={numero_client:void 0,id_declarant:void 0},this.getUserInfo=function(){return a.user.numero_client=t.getUserIdSAP(),a.user.id_declarant=t.getUserIdCorrespondent(),console.log(a.user),a.user},a.getLanguage=function(){return t.getLanguage},a}e.exports=a},function(e,t,a){var l=a(73),i=a(74),n="declaration.controleecart";angular.module(n,[]);angular.module(n,[]);angular.module(n).service("controleecartService",["declarationResource","userService",i]),angular.module(n).controller("controleecartCtrl",["controleecartService","$location","$uibModal","$filter","$scope","userService",l]),angular.module(n).component("controleecart",{template:a(23),controller:"controleecartCtrl",controllerAs:"controleecartCtrl",bindings:{declarationid:"@",onvalidate:"&",onback:"&"}}),e.exports=n},function(e,t,a){e.exports=function(e,t,l,i,n,o){var r=this;r.motifs="",r.commentaire="",
r.selected_motif="",r.modal_instance,r.user=e.getUserInfo(),r.form_submitted,r.id_dec=t.search().id_dec,"undefined"==typeof r.id_dec&&(r.id_dec=t.search().id_declaration),r.action=t.search().action,console.log("id_dec "+r.id_dec),console.log("action "+r.action),this.$onInit=function(){e.getMotifEcart().then(function(e){r.MotifEcartTab=[];for(var t in e.data)r.MotifEcartTab.push({EcartMotifId:e.data[t].EcartMotifId,Code:e.data[t].Code,Libelle:i("translate")("motifs_controle_ecart."+e.data[t].Code)})},function(e){}).finally(function(){}),"undefined"!=typeof r.id_dec&&"undefined"!=typeof r.action&&"control_ecart"==r.action&&e.getMotifCommentaireControleEcart(r.id_dec).then(function(e){console.log("getMotifCommentaireControleEcart ok:",e.data),r.selected_motif=e.data.motif,r.commentaire=e.data.commentaire},function(e){console.error("erreur getMotifCommentaireControleEcart:",e)}).finally(function(){})},this.SendCommentaire=function(t){e.SendCommentaire(r.declarationid,r.commentaire,t,r.selected_motif).then(function(e){console.log("retour ....",e),console.log("submit - ok : "+JSON.stringify(e)),r.status_code=200},function(e){console.error("submit - error : "+JSON.stringify(e))}).finally(function(){})},this.submit_commentaire=function(e){r.form_submitted=!0,e.$valid&&(this.SendCommentaire(!0),r.commentaire="",this.onvalidate())},this.submit_commentaireSave=function(e){r.form_submitted=!0,e.$valid&&(this.SendCommentaire(!1),this.valideEnregistrement())},this.goBack=function(){this.onback()},this.valideEnregistrement=function(){r.modal_instance&&r.modal_instance.close(),r.modal_instance=l.open({template:a(22),scope:n,backdrop:"static",keyboard:!1})},this.closeModal=function(){r.modal_instance.close()}}},function(e,t){function a(e,t){var a=this;return a.getMotifEcart=e.getMotifEcart,a.SendCommentaire=e.SendCommentaire,a.goBack=e.goBack,a.getMotifCommentaireControleEcart=e.getMotifCommentaireControleEcart,a.user={numero_client:void 0,id_declarant:void 0,id_SF:void 0},this.getUserInfo=function(){return a.user.numero_client=t.getUserIdSAP(),a.user.id_declarant=t.getUserIdCorrespondent(),a.user.id_SF=t.getUserIdSF(),a.user},a}e.exports=a},function(e,t,a){var l=a(76),i=a(77),n="declaration.declarationforfait";angular.module(n,[]),angular.module(n).service("declarationforfaitService",["declarationResource","userService",i]),angular.module(n).controller("declarationforfaitCtrl",["declarationforfaitService","$uibModal","$scope","$location","$window",l]),angular.module(n).component("declarationforfait",{template:a(24),controller:"declarationforfaitCtrl",controllerAs:"declarationforfaitCtrl",bindings:{}}),e.exports=n},function(e,t,a){e.exports=function(e,t,l,i,n){function o(e,t){for(var a=t.length,l=0;l<a;l++)if(t[l]==e)return l;return-1}var r=this;r.step=1,r.mails=[],r.mailinput,r.email_pattern=/^[a-zA-Z0-9_.-]*@[a-zA-Z0-9_.-]*\.[a-zA-Z]{2,}$/,r.RecapDeclaration,r.modal_instance,r.status_code,r.loading,r.user=e.getUserInfo(),r.annee=i.search().annee,r.selected_motif,r.commentaire,r.flag_corrective,r.id_declaration=i.search().id_declaration,r.action=i.search().action,r.annee=i.search().annee,r.first_load=!0,"undefined"!=typeof r.id_declaration&&("undefined"!=typeof r.action&&"control_ecart"==r.action?r.step="controle_ecart":r.step=2,e.getRecap(r.id_declaration).then(function(e){r.RecapDeclaration=e.data},function(e){console.error("getRecap - error : "+JSON.stringify(e))}).finally(function(){})),this.SaveDeclarationForfait=function(){r.selected_motif=sessionStorage.getItem("motif_corrective"),r.commentaire=sessionStorage.getItem("commentaire_corrective"),null!=r.selected_motif?r.flag_corrective=!0:r.flag_corrective=!1,e.SaveDeclarationForfait(r.user.numero_client,r.user.id_declarant,r.annee,r.flag_corrective,r.selected_motif,r.commentaire).then(function(t){r.RecapDeclaration=t.data,console.log("submit - ok : "+JSON.stringify(t)),r.RecapDeclaration=t.data,sessionStorage.removeItem("motif_corrective"),sessionStorage.removeItem("commentaire_corrective"),e.getControleEcart(r.RecapDeclaration.IdDeclaration).then(function(e){r.first_load=!1,console.log("retour getControleEcart",e),"OK"==e.data?r.step="controle_ecart":r.step=2},function(e){r.step=2}).finally(function(){})},function(e){console.error("submit - error : "+JSON.stringify(e))}).finally(function(){})},this.addMails=function(){console.debug(r.mailinput),o(r.mailinput,r.mails)==-1&&r.mails.push(r.mailinput),console.debug(r.mails),r.mailinput=""},this.removeMail=function(e){for(var t=this.mails.length-1;t>=0;t--)this.mails[t]===e&&this.mails.splice(t,1)},this.valideMails=function(){"undefined"!=typeof r.RecapDeclaration&&(r.modal_instance&&r.modal_instance.close(),r.loading=!0,r.modal_instance=t.open({template:a(25),scope:l,backdrop:"static",keyboard:!1}),e.sendDeclarationAR(r.mails.join(),r.RecapDeclaration.IdDeclaration,r.user.id_SF).then(function(t){console.log("SF: "+r.user.id_SF),console.debug("recap declaration join "+r.RecapDeclaration.IdDeclaration),e.saveMailsAR(r.mails.join(),r.RecapDeclaration.IdDeclaration).then(function(e){r.status_code=200},function(e){r.status_code=e.status,r.errors=e.data,r.mails=[]}).finally(function(){r.mails=[],r.loading=!1})},function(e){403==e.status?r.modal_instance.close():(r.status_code=e.status,r.errors=e.data,r.mails=[],r.loading=!1)}).finally(function(){r.mails=[]}))},this.saveMails=function(){e.saveMailsAR(r.mails.join(),r.RecapDeclaration.IdDeclaration).then(function(e){r.status_code=200,r.step=1},function(e){r.status_code=e.status,r.errors=e.data}).finally(function(){})},this.goBackFromControlEcart=function(){r.first_load?e.goBack():r.step=1}}},function(e,t){function a(e,t){var a=this;return a.SaveDeclarationForfait=e.SaveDeclarationForfait,a.getRecap=e.getRecap,a.goToChoixDeclaration=e.goToChoixDeclaration,a.sendDeclarationAR=e.sendDeclarationAR,a.saveMailsAR=e.saveMailsAR,a.getControleEcart=e.getControleEcart,a.goBack=e.goBack,a.user={numero_client:void 0,id_declarant:void 0},this.getUserInfo=function(){return a.user.numero_client=t.getUserIdSAP(),a.user.id_declarant=t.getUserIdCorrespondent(),a.user.id_SF=t.getUserIdSF(),a.user},a}e.exports=a},function(e,t,a){var l=a(79),i=a(80),n="declaration.depotDeclaration";angular.module(n,[]),angular.module(n).factory("depotDeclarationService",["declarationResource","popupsService",i]),angular.module(n).controller("depotDeclarationCtrl",["depotDeclarationService","userService",l]),angular.module(n).component("depotDeclaration",{template:a(26),controller:"depotDeclarationCtrl",controllerAs:"depotDeclarationCtrl",bindings:{}}),e.exports=n},function(e,t){e.exports=function(e,t){var a=this;this.extensionsList=["zip","fde"],this.$onInit=function(){e.getMotifs().then(function(e){console.log("get motifs success : ",e),a.motifsCorrective=e.data},function(e){console.log("get motifs failure : ",e)})},this.submit=function(t){return console.log("formulaire : ",t),t.$invalid||!t.$valid?(console.log("invalid form : show errors"),i(t),l("depot-declaration-form"),void console.log("complete errors showing")):(a.sendingFormFlag=!0,console.log("submit clicked !!"),angular.isUndefined(a.form.comment)&&(a.form.comment=""),angular.isUndefined(a.form.motif)&&(a.form.motif=""),angular.isUndefined(a.form.comment)&&(a.form.comment=""),angular.isUndefined(a.form.declarantId)&&(a.form.declarantId=""),angular.isUndefined(a.form.declarationId)&&(a.form.declarationId=""),void e.submit(a.form).then(function(){a.sendingFormFlag=!1}))};var l=function(e){var t=document.getElementById(e).querySelector(".ng-invalid");"file-upload"==t.id?document.getElementById("file-link").focus():t.focus()},i=function(e){console.log("formulaire : ",e);for(var t in e)angular.isObject(e[t])&&e[t].hasOwnProperty("$touched")&&e[t].$untouched&&(e[t].$setTouched(),e[t].$$parseAndValidate())};this.navigate=function(){window.location="/accueil-conseiller"}}},function(e,t){e.exports=function(e,t){return this.submit=function(a){return e.sentDeclaration(a).then(function(e){console.log("sent declaration success : ",e),t.openDepotDeclarationSuccess(e.data.ContributionTotale)},function(e){console.log("sent declaration failure : ",e),400==e.status&&t.openDepotDeclarationFailure(e.data)})},this.getMotifs=function(){return e.getMotifs()},this}},function(e,t,a){var l=a(82),i=a(83),n="declaration.entreprise";angular.module(n,[]);angular.module(n,[]);angular.module(n).service("entrepriseService",["declarationResource","userService",i]),angular.module(n).controller("entrepriseCtrl",["entrepriseService","$location","$uibModal","$scope","$filter",l]),angular.module(n).component("entreprise",{template:a(28),controller:"entrepriseCtrl",controllerAs:"entrepriseCtrl",bindings:{}}),e.exports=n},function(e,t,a){e.exports=function(e,t,l,i,n,o){var r=this;r.RecapDeclaration,r.entreprises=[],r.marques=[],r.choix=!1,r.choixmarque=!1,r.user=e.getUserInfo(),console.log("self.user::",r.user),this.entrepriseinput={nom:"",siret:"",pays:""},this.marqueinput="",r.submitted,r.msgErreurForMarque,r.msgErreurForEntreprise,r.msgerreursiret,r.step="",r.loading=!0,r.controleEcart=!1,this.$onInit=function(){r.id_declaration=t.search().id_declaration,r.action=t.search().action,"undefined"==typeof r.id_declaration&&(r.id_declaration=""),"undefined"==typeof r.action&&(r.action="control_ecart"),e.getRecap(r.id_declaration).then(function(t){r.RecapDeclaration=t.data,"control_ecart"==r.action?e.getControleEcart(r.RecapDeclaration.IdDeclaration).then(function(e){console.log("retour getControleEcart",e),"OK"==e.data?(r.step="controle_ecart",r.controleEcart=!0):r.step="entreprises_marques"},function(e){r.step="entreprises_marques"}).finally(function(){r.loading=!1}):r.step="entreprises_marques"},function(e){}).finally(function(){r.loading=!1}),e.getListEntreprise(r.id_declaration).then(function(e){console.log("mesentreprisesinbd :",e.data),r.entreprises=e.data,r.entreprises.length>0&&(r.choix=!0),console.log(r.entreprises)},function(e){console.error("mesentreprisesinbd - error : "+JSON.stringify(e))}).finally(function(){}),e.getListMarque(r.id_declaration).then(function(e){console.log("getListMarque :",e.data),r.marques=e.data,r.marques.length>0&&(r.choixmarque=!0),console.log(r.marques)},function(e){console.error("getListMarque - error : "+JSON.stringify(e))}).finally(function(){}),e.getPays().then(function(e){r.Pays=[];for(var t in e.data)r.Pays.push({Code:e.data[t].Code,Designation:n("translate")("pays."+e.data[t].Code)})},function(e){}).finally(function(){})},this.valideEnregistrement=function(){r.modal_instance&&r.modal_instance.close(),r.modal_instance=l.open({template:a(27),scope:i,backdrop:"static",keyboard:!1})},this.closeModal=function(){r.modal_instance.close()},this.hideExposant=function(e){return""==e||null==e},this.SaveWithoutAdd=function(){""!=r.entrepriseinput.nom&&""!=r.entrepriseinput.pays&&(this.addEntreprise(),r.entreprises.length>0&&this.Save(!0)),""!=r.marqueinput&&(this.addMarque(),r.marques.length>0&&this.Save(!0))},this.SaveWithoutAddfalse=function(){""!=r.entrepriseinput.nom&&""!=r.entrepriseinput.pays&&(this.addEntreprise(),r.entreprises.length>0&&this.Save(!1)),""!=r.marqueinput&&(this.addMarque(),r.marques.length>0&&this.Save(!1))},this.submitFromOutSide=function(e){""!=r.entrepriseinput.nom&&""!=r.entrepriseinput.pays?this.SaveWithoutAdd():""==r.entrepriseinput.nom&&""==r.entrepriseinput.pays?this.Save(!0):r.submitted=!0},this.Save=function(t){e.SaveSocietesMarques(r.id_declaration,r.entreprises,r.marques,t).then(function(a){t&&e.goToValidationDecWeb(r.id_declaration)},function(e){}).finally(function(){})},this.goToDeclarationUvcWeb=function(){e.goToDeclarationUvcWeb(r.id_declaration)},this.goBack=function(){r.controleEcart?r.step="controle_ecart":e.goBack()},this.removeEntreprise=function(e){for(var t=this.entreprises.length-1;t>=0;t--)this.entreprises[t]===e&&this.entreprises.splice(t,1)},this.addMarque=function(){this.inArrayMarque(r.marqueinput,r.marques)==-1?(r.marques.push(r.marqueinput),r.marqueinput="",r.msgErreurForMarque=!1):r.msgErreurForMarque=!0},this.addEntreprise=function(){this.inArrayEntreprise(r.entrepriseinput,r.entreprises)==-1?(r.entreprises.push(r.entrepriseinput),r.entrepriseinput={nom:"",siret:"",pays:""},r.msgErreurForEntreprise=!1):r.msgErreurForEntreprise=!0},this.inArrayMarque=function(e,t){for(var a=t.length,l=0;l<a;l++)if(t[l]==e)return l;return-1},this.inArrayEntreprise=function(e,t){var a=t.length;r.tab2=[],angular.copy(t,r.tab2),console.log("tab2:",r.tab2);for(var l=0;l<a;l++){if(JSON.stringify(r.tab2[l])==JSON.stringify(e))return l;console.log("mon tab",r.tab2[l]),console.log("element ",e)}return-1},this.removeMarque=function(e){for(var t=this.marques.length-1;t>=0;t--)this.marques[t]===e&&this.marques.splice(t,1)}}},function(e,t){function a(e,t){var a=this;return a.getPays=e.getPays,a.getRecap=e.getRecap,a.SaveSocietesMarques=e.SaveSocietesMarques,a.goToValidationDecWeb=e.goToValidationDecWeb,a.goToDeclarationUvcWeb=e.goToDeclarationUvcWeb,a.goToHistoriqueDeclaration=e.goToHistoriqueDeclaration,a.checkEtape=e.checkEtape,a.getListEntreprise=e.getListEntreprise,a.getListMarque=e.getListMarque,a.goBack=e.goBack,a.getControleEcart=e.getControleEcart,a.user={numero_client:void 0,id_declarant:void 0,id_SF:void 0},this.getUserInfo=function(){return a.user.numero_client=t.getUserIdSAP(),a.user.id_declarant=t.getUserIdCorrespondent(),a.user.id_SF=t.getUserIdSF(),a.user},a}e.exports=a},function(e,t,a){var l=a(85),i=a(86),n="declaration.historique";angular.module(n,[]),angular.module(n).service("historiqueService",["declarationResource","userService","unauthorizedPopInService",i]),angular.module(n).controller("historiqueCtrl",["historiqueService","$uibModal","$scope","$window",l]),angular.module(n).component("historiqueDeclaration",{template:a(32),controller:"historiqueCtrl",controllerAs:"historiqueCtrl",bindings:{}}),angular.module(n).filter("decimalSeparator",function(){return function(e){try{var t=e.toLocaleString("fr-FR");return 1==t.split(",").length?t+=",00":2==t.split(",").length&&1==t.split(",")[1].length&&(t+="0"),t}catch(t){return e}}}),e.exports=n},function(e,t,a){e.exports=function(e,t,l,i){var n=this;n.selected_declaration_id,n.type_declaration,n.mode_saisie,n.selected_annee,n.modal_instance,n.selected_motif="",n.motifs_corrective={},n.corrective_submitted=!1,n.commentaire="",n.etape_corrective=1,n.modifier_mode_type_declaration,n.listdeclarations=[],n.url_historique=e.getUrl_historique_declaration,n.user=e.getUserInfo(),n.etape_choix_mode_saisie=1,n.suppresion_ok=!1,e.getHistoriqueDeclaration(n.user.numero_client,"page").then(function(e){n.listdeclarations=e.data}),e.getMotifsCorrective().then(function(e){n.motifs_corrective=e.data,console.log("getMotifsCorrective - ok")},function(e){console.error("getMotifsCorrective - error : "+JSON.stringify(e))}).finally(function(){}),this.ModifierDeclaration=function(e,i,o,r){n.selected_declaration_id=e,n.selected_annee=i,n.type_declaration=o,n.mode_saisie=r,n.modal_instance=t.open({template:a(29),scope:l,backdrop:"static",keyboard:!1})},this.DemandeSuppressionDeclaration=function(e,i,o,r){n.selected_declaration_id=e,n.selected_annee=i,n.type_declaration=o,n.mode_saisie=r,n.modal_instance=t.open({template:a(31),scope:l,backdrop:"static",keyboard:!1})},this.SupprimerDeclaration=function(){e.IsConseiller()?(console.log("Non Authoris� Car Conseiller "),n.modal_instance.close(),e.unAuthPopinOpen()):(console.log("Pas Conseiller "),n.modal_instance.close(),e.SupprimerDeclaration(n.user.numero_client,n.selected_declaration_id,n.selected_annee,n.type_declaration,n.mode_saisie).then(function(e){console.log("suppression ok"),n.suppresion_ok=!0,n.modal_instance=t.open({template:a(4),scope:l,backdrop:"static",keyboard:!1})},function(e){console.log("suppression erreur"),n.suppresion_ok=!1,n.modal_instance=t.open({template:a(4),scope:l,backdrop:"static",keyboard:!1})}).finally(function(){}))},this.submit_corrective=function(e){n.corrective_submitted=!0,e.$valid&&(n.etape_corrective=2,n.corrective_submitted=!1)},this.submit_modification=function(t){n.corrective_submitted=!0,t.$valid&&(sessionStorage.setItem("annee_corrective",n.selected_annee),sessionStorage.setItem("motif_corrective",n.selected_motif),sessionStorage.setItem("commentaire_corrective",n.commentaire),"true"==n.modifier_mode_type_declaration?e.goToChoixDeclaration(n.selected_annee):"EXCEL"==n.mode_saisie?e.goToUploadExcel(n.selected_declaration_id,n.selected_annee):"FORFAIT"==n.type_declaration?e.goToDelarationForfait(n.selected_annee):"UVC"==n.type_declaration?e.CreateDeclarationUvcWeb(n.user.numero_client,n.user.id_declarant,n.selected_annee,!0,n.selected_motif,n.commentaire).then(function(t){console.log("submit - ok : "+JSON.stringify(t)),e.goToDeclarationWeb(t.data,n.selected_annee,"uvc",!0,n.selected_motif,n.commentaire)},function(e){console.error("submit - error : "+JSON.stringify(e))}).finally(function(){}):e.goToDeclarationWeb(n.selected_declaration_id,n.selected_annee,n.type_declaration,1,n.selected_motif,n.commentaire))},this.annuleModal=function(){n.modal_instance.close()},this.closeModal=function(){n.type_declaration=null,n.selected_annee=null,n.modal_instance.close(),n.selected_motif="",n.corrective_submitted=!1,n.commentaire="",n.etape_corrective=1,n.modifier_mode_type_declaration="",n.etape_choix_mode_saisie=1,n.suppresion_ok=!1},this.closeModalSuppression=function(){n.type_declaration=null,n.selected_annee=null,n.modal_instance.close(),n.selected_motif="",n.corrective_submitted=!1,n.commentaire="",n.etape_corrective=1,n.modifier_mode_type_declaration="",n.etape_choix_mode_saisie=1,n.mode_saisie=null,n.suppresion_ok=!1,console.log("closeModalSuppression"),e.getHistoriqueDeclaration(n.user.numero_client,"page").then(function(e){n.listdeclarations=e.data}),e.getMotifsCorrective().then(function(e){n.motifs_corrective=e.data,console.log("getMotifsCorrective - ok")},function(e){console.error("getMotifsCorrective - error : "+JSON.stringify(e))}).finally(function(){})},this.GetLienTelechargement=function(t,a){"UVC"==t?e.GetLienTelechargementUVC(n.user.numero_client,a):e.GetLienTelechargementSectDetail(t,a)},this.GetLienFinalisationUvc=function(e,t,a,l){var n;console.log("ModeSaisie,etape:"+a+"-"+l),"EXCEL"==a?"EN_COURS"==e?n="undefined"!=typeof l&&4==l?"/mon-espace/declaration/excel/uvc/#?id_dec="+t+"&action=control_ecart":"/mon-espace/declaration/excel/uvc/#?id_dec="+t+"&action=ajout_destinataire":"INITIALISEE"==e&&(n="/mon-espace/declaration/excel/uvc/#?id_dec="+t+"&action=completer"):n="/mon-espace/declaration/web/uvc/#?id_declaration="+t,i.location.href=n},this.GetLienFinalisationSectDetail=function(t,a,l){e.postDeclarationWebSectDetail(l,t,0,"","").then(function(e){},function(e){alert("GetLienFinalisationSectDetail - error : "+l+","+t)})},this.GetLienFinalisationForfait=function(t,a,l){e.GetLienFinalisationForfait(t,a,l)},n.annee_excel="",n.langue_excel="",n.eco_langue="",this.ModifierModeSaisie=function(e,i,o,r){n.selected_declaration_id=e,n.selected_annee=i,n.type_declaration=o.toLowerCase(),n.mode_saisie=r,n.modal_instance=t.open({template:a(30),scope:l,backdrop:"static",keyboard:!1})},this.sendDeclarationExcel=function(){"uvc"==n.type_declaration?(e.InitialiserDeclarationUVC(n.user.numero_client,n.user.id_declarant,n.selected_annee).then(function(e){console.log("submit - ok : "+JSON.stringify(e))},function(e){console.error("submit - error : "+JSON.stringify(e))}).finally(function(){}),e.getFichierExcelUvc(n.annee_excel,n.langue_excel,n.user.numero_client)):(console.log("excel "+n.type_declaration),n.eco_langue="FR","anglais"==n.langue_excel&&(n.eco_langue="EN"),e.getTemplateExcelSectDetail(n.selected_annee,n.type_declaration,n.annee_excel,n.eco_langue))},this.GoToDelarationEnLigne=function(){null!=n.selected_motif?n.flag_corrective=1:n.flag_corrective=0,"forfait"==n.type_declaration?e.goToDelarationForfait(n.selected_annee):"uvc"==n.type_declaration?e.CreateDeclarationUvcWeb(n.user.numero_client,n.user.id_declarant,n.selected_annee,1==n.flag_corrective,n.selected_motif,n.commentaire).then(function(t){console.log("submit - ok : "+JSON.stringify(t)),e.goToDeclarationWeb(t.data,n.selected_annee,n.type_declaration,n.flag_corrective,n.selected_motif,n.commentaire)},function(e){console.error("submit - error : "+JSON.stringify(e))}).finally(function(){}):e.goToDeclarationWeb("",n.selected_annee,n.type_declaration,n.flag_corrective,n.selected_motif,n.commentaire)}}},function(e,t){function a(e,t,a){var l=this;return l.getHistoriqueDeclaration=e.getHistoriqueDeclaration,l.getUrl_historique_declaration=e.getUrl_historique_declaration,l.getMotifsCorrective=e.getMotifsCorrective,l.goToChoixDeclaration=e.goToChoixDeclaration,l.goToUploadExcel=e.goToUploadExcel,l.postDeclarationWebSectDetail=e.postDeclarationWebSectDetail,l.GetLienFinalisationForfait=e.GetLienFinalisationForfait,l.GetLienTelechargementSectDetail=e.GetLienTelechargementSectDetail,l.GetLienTelechargementUVC=e.GetLienTelechargementUVC,l.getFichierExcelUvc=e.getFichierExcelUvc,l.InitialiserDeclarationUVC=e.InitialiserDeclarationUVC,l.goToDeclarationWeb=e.goToDeclarationWeb,l.goToDelarationForfait=e.goToDelarationForfait,l.getTemplateExcelSectDetail=e.getTemplateExcelSectDetail,l.CreateDeclarationUvcWeb=e.CreateDeclarationUvcWeb,l.SupprimerDeclaration=e.SupprimerDeclaration,l.user={numero_client:void 0,id_declarant:void 0,id_SF:void 0},this.getUserInfo=function(){return l.user.numero_client=t.getUserIdSAP(),l.user.id_declarant=t.getUserIdCorrespondent(),l.user.id_SF=t.getUserIdSF(),l.user},l.IsConseiller=function(){return t.isConseiller()},l.unAuthPopinOpen=function(){a.open()},l}e.exports=a},function(e,t,a){var l=a(88),i=a(89),n="declaration.historique_widget";angular.module(n,[]),angular.module(n).service("historique_widgetService",["declarationResource","userService",i]),angular.module(n).controller("historique_widgetCtrl",["historique_widgetService",l]),angular.module(n).component("historiqueDeclarationWidget",{template:a(33),controller:"historique_widgetCtrl",controllerAs:"historique_widgetCtrl",bindings:{}}),e.exports=n},function(e,t){e.exports=function(e){var t=this;this.$onInit=function(){var a=new Date;t.annee_en_cours=a.getFullYear(),console.log("annee en cours historique_widget",t.annee_en_cours),e.getAnneesContractualisation(e.getNumeroClient()).then(function(e){t.AnneesContractualisation=e.data[0],console.log("AnneesContractualisation historique_widget:",t.AnneesContractualisation),console.log("condit 1",t.annee_en_cours==t.AnneesContractualisation)},function(e){}).finally(function(){}),t.listdeclarations=[],t.url_historique=e.getUrl_historique_declaration,e.getHistoriqueDeclaration(e.getNumeroClient(),"widget").then(function(e){t.listdeclarations=e.data})}}},function(e,t){function a(e,t){var a=this;return a.getHistoriqueDeclaration=e.getHistoriqueDeclaration,a.getUrl_historique_declaration=e.getUrl_historique_declaration,a.getAnneesContractualisation=e.getAnneesContractualisation,this.getNumeroClient=function(){return t.getUserIdSAP()},a}e.exports=a},function(e,t,a){var l=a(91),i=a(92),n="declaration.lancementrpc";angular.module(n,[]);angular.module(n,[]);angular.module(n).service("lancementrpcService",["declarationResource","userService",i]),angular.module(n).controller("lancementrpcCtrl",["lancementrpcService","$location","$uibModal","$scope","$filter",l]),angular.module(n).component("lancementrpc",{template:a(34),controller:"lancementrpcCtrl",controllerAs:"lancementrpcCtrl",bindings:{}}),e.exports=n},function(e,t,a){e.exports=function(e,t,l,i,n){var o=this;o.modal_instance;var r=2,c=20;o.diplayMoreState=!1,o.maxToDisplayMultiplicator=1,o.validerState=!1,o.eltModel="",o.someVal="",o.result="",o.expertsList=[],o.expertsListTemp=[],o.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0,ville:void 0},o.details={id:void 0,idClient:void 0,annee:void 0,montant:void 0,raisonSociale:void 0,siren:void 0,idSignataire:void 0,iddeletion:void 0,mandataireKindToDelete:void 0},o.IsModification=!1,o.DeletionOK=!1,this.$onInit=function(){},this.erreurAuth=function(){o.modal_instance&&o.modal_instance.close(),o.loading=!0,o.modal_instance=l.open({template:a(36),scope:i,backdrop:"static",keyboard:!1})},o.erreurConflict=function(){o.modal_instance&&o.modal_instance.close(),o.loading=!0,o.modal_instance=l.open({template:a(37),scope:i,backdrop:"static",keyboard:!1})},o.successlaunch=function(){o.modal_instance&&o.modal_instance.close(),o.loading=!0,o.modal_instance=l.open({template:a(35),scope:i,backdrop:"static",keyboard:!1})},this.ChoixExpert=function(){console.log("test : "+o.ec+" modif ? :  "+o.IsModification),o.modal_instance&&o.modal_instance.close(),o.modal_instance=l.open({template:a(38),scope:i,backdrop:"static",keyboard:!1})},this.closeModal=function(){o.expertsList.length=0,o.diplayMoreState=!1,o.validerState=!1,o.maxToDisplayMultiplicator=1,o.ec="",o.someVal="",o.result="",o.expertsList.length=0,o.expertsListTemp.length=0,o.modal_instance.close(),o.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0,ville:void 0},o.IsModification=!1,o.DeletionOK=!1,o.details={id:void 0,idClient:void 0,annee:void 0,montant:void 0,raisonSociale:void 0,siren:void 0,idSignataire:void 0,iddeletion:void 0,mandataireKindToDelete:void 0}},o.textChanged=function(){o.expertsList.length=0,o.expertsListTemp.length=0,o.diplayMoreState=!1,o.validerState=!1,o.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0},o.maxToDisplayMultiplicator=1,o.someVal.length>=r?("EC"==o.ec&&e.GetExpertsByName(o.someVal,c*o.maxToDisplayMultiplicator).then(function(e){if(console.log("REPONSE : ",e.data),o.expertsList.length=0,o.diplayMoreState=!1,e.status=200){if(Array.isArray(e.data.contacts))for(var t in e.data.contacts)o.expertsList.push({adresse:e.data.contacts[t].adresse,civilite:e.data.contacts[t].civilite,code_postal:e.data.contacts[t].code_postal,email:e.data.contacts[t].email,nom:e.data.contacts[t].nom,prenom:e.data.contacts[t].prenom,qualite:e.data.contacts[t].qualite,uniquecsoecid:e.data.contacts[t].uniquecsoecid});else o.expertsList.push({adresse:e.data.contacts.adresse,civilite:e.data.contacts.civilite,code_postal:e.data.contacts.code_postal,email:e.data.contacts.email,nom:e.data.contacts.nom,prenom:e.data.contacts.prenom,qualite:e.data.contacts.qualite,uniquecsoecid:e.data.contacts.uniquecsoecid});"false"==e.data.fin&&(o.diplayMoreState=!0)}else(e.status=204)&&console.log("no contact found")},function(e){console.error(" - error : "+JSON.stringify(e))}).finally(function(){}),"CAC"==o.ec&&e.GetCacByNames(o.someVal,c*o.maxToDisplayMultiplicator).then(function(e){if(console.log("CAC REPONSE : ",e.data),o.expertsList.length=0,o.diplayMoreState=!1,e.status=200){if(Array.isArray(e.data.data))for(var t=0;t<e.data.data.length;t++)o.expertsList.push({adresse:e.data.data[t].adresse,civilite:e.data.data[t].civilite,code_postal:e.data.data[t].code_postal,email:e.data.data[t].email,nom:e.data.data[t].nom,prenom:e.data.data[t].prenom,ville:e.data.data[t].ville,id:e.data.data[t].id});0==e.data.fin&&(o.diplayMoreState=!0,console.log("self.displaymorestate  "+o.diplayMoreState))}else(e.status=400)&&console.log("Bad Request")},function(e){console.error(" error : "+JSON.stringify(response.data))}).finally(function(){})):(o.result="",o.expertsList.length=0,o.expertsListTemp.length=0,o.diplayMoreState=!1,o.validerState=!1,o.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0},o.maxToDisplayMultiplicator=1)},o.displayMore=function(){o.maxToDisplayMultiplicator=o.maxToDisplayMultiplicator+1,o.diplayMoreState=!1,o.validerState=!1,o.eltChosen={adresse:void 0,civilite:void 0,code_postal:void 0,email:void 0,nom:void 0,prenom:void 0,qualite:void 0,uniquecsoecid:void 0,ville:void 0},o.expertsListTemp.length=0,o.someVal.length>=r?("EC"==o.ec&&e.GetExpertsByName(o.someVal,c*o.maxToDisplayMultiplicator).then(function(e){if(console.log("EC REPONSE : ",e.data),e.status=200){if(Array.isArray(e.data.contacts)){for(var t in e.data.contacts)o.expertsListTemp.push({adresse:e.data.contacts[t].adresse,civilite:e.data.contacts[t].civilite,code_postal:e.data.contacts[t].code_postal,email:e.data.contacts[t].email,nom:e.data.contacts[t].nom,prenom:e.data.contacts[t].prenom,qualite:e.data.contacts[t].qualite,uniquecsoecid:e.data.contacts[t].uniquecsoecid});for(var a=c*(o.maxToDisplayMultiplicator-1);a<o.expertsListTemp.length;a++)o.expertsList.push(o.expertsListTemp[a])}"false"==e.data.fin&&(o.diplayMoreState=!0)}else(e.status=204)&&console.log("no contact found")},function(e){console.error(" - error : "+JSON.stringify(e))}).finally(function(){}),"CAC"==o.ec&&e.GetCacByNames(o.someVal,c*o.maxToDisplayMultiplicator).then(function(e){if(console.log("CAC REPONSE : ",e.data),e.status=200){if(Array.isArray(e.data.data)){for(var t=0;t<e.data.data.length;t++)o.expertsListTemp.push({adresse:e.data.data[t].adresse,civilite:e.data.data[t].civilite,code_postal:e.data.data[t].code_postal,email:e.data.data[t].email,nom:e.data.data[t].nom,prenom:e.data.data[t].prenom,ville:e.data.data[t].ville,id:e.data.data[t].id});for(var a=c*(o.maxToDisplayMultiplicator-1);a<o.expertsListTemp.length;a++)o.expertsList.push(o.expertsListTemp[a])}0==e.data.fin&&(o.diplayMoreState=!0)}else(e.status=400)&&console.log("Bad Request")},function(e){console.error(" error : "+JSON.stringify(response.data))}).finally(function(){})):o.result=""},o.eltSelected=function(e){o.validerState=!0,o.eltChosen.adresse=e.adresse,o.eltChosen.civilite=e.civilite,o.eltChosen.code_postal=e.code_postal,o.eltChosen.email=e.email,o.eltChosen.nom=e.nom,o.eltChosen.prenom=e.prenom,o.eltChosen.qualite=e.qualite,o.eltChosen.uniquecsoecid=e.uniquecsoecid,o.eltChosen.ville=e.ville,console.log("Selected is "+o.eltChosen.nom+"  "+o.eltChosen.uniquecsoecid)},o.modification=function(){o.mandataireKindToDelete="EC","EC"==o.mandataireKindToDelete?e.ExpertsDeleteProjects(o.details.iddeletion).then(function(t){(t.status=200)&&(console.log("Deleted EC "+JSON.stringify(t.data)),o.DeletionOK=!0,console.log("deletion OK "+o.DeletionOK),e.UpdateCancelMissions(o.details.iddeletion).then(function(e){(e.status=200)&&console.log("UPDATED IN DB EC "+JSON.stringify(e.data))},function(e){(e.status=404)&&(console.log("Bad Request EC "+JSON.stringify(e)),o.erreurConflict()),(e.status=401)&&console.log("Non Authoris� EC "+JSON.stringify(e)),(t.status=500)&&(console.log("Erreur EC "+JSON.stringify(e)),o.erreurAuth())}).finally(function(){}))},function(e){(e.status=404)&&(console.log("Bad Request EC "+JSON.stringify(e)),o.erreurConflict()),(e.status=401)&&(console.log("Non Authoris� EC "+JSON.stringify(e)),o.erreurAuth()),(response.status=500)&&(console.log("Erreur EC "+JSON.stringify(e)),o.erreurConflict())}).finally(function(){}):"CAC"==o.mandataireKindToDelete&&e.CacDeleteProjects(o.details.iddeletion).then(function(t){(t.status=200)&&(console.log("Deleted CAC "+JSON.stringify(t.data)),o.DeletionOK=!0,e.UpdateCancelMissions(o.details.iddeletion).then(function(e){(e.status=200)&&console.log("UPDATED IN DB EC "+JSON.stringify(e.data))},function(e){(e.status=404)&&(console.log("Bad Request EC "+JSON.stringify(e)),o.erreurConflict()),(e.status=401)&&(console.log("Non Authoris� EC "+JSON.stringify(e)),o.erreurAuth()),(t.status=500)&&(console.log("Erreur EC "+JSON.stringify(e)),o.erreurConflict())}).finally(function(){}))},function(e){(e.status=404)&&(console.log("Bad Request EC "+JSON.stringify(e)),o.erreurConflict()),(e.status=401)&&(console.log("Non Authoris� EC "+JSON.stringify(e)),o.erreurAuth()),(response.status=500)&&(console.log("Erreur EC "+JSON.stringify(e)),o.erreurConflict())}).finally(function(){})},o.createRPCOnlyEC=function(){console.log("creation EC"),e.PostExpertsCreateProject(o.details.id,o.details.idClient,o.details.annee,o.details.montant,o.details.raisonSociale,o.details.siren,o.details.idSignataire).then(function(t){
(t.status=201)&&(console.log("Created  "+t.data),e.SaveNewMissions(o.details.id,o.details.idClient,o.details.annee,o.details.montant,o.details.idSignataire,o.eltChosen.nom,o.eltChosen.email,"EC",1).then(function(e){((e.status=201)||(e.status=200))&&console.log("Created in DB  "+e.data)},function(e){console.log("Erreur while saving ")}).finally(function(){}),o.successlaunch())},function(e){(e.status=409)?(console.log("Conflict while creating mission EC "),o.erreurConflict()):(e.status=400)?console.log("BAd Request while creating mission EC "):(e.status=401)?(console.log("Non Authoris� while creating mission EC "),o.erreurAuth()):(e.status=500)&&console.log("Erreur while creating mission EC ")}).finally(function(){})},o.createRPCOnlyCAC=function(){console.log("creation CAC"),e.PostCacCreateProject(o.details.id,o.details.idClient,o.details.annee,o.details.montant,o.details.raisonSociale,o.details.siren,o.details.idSignataire).then(function(t){(t.status=201)&&(console.log("Created CAC "+t.data),e.SaveNewMissions(o.details.id,o.details.idClient,o.details.annee,o.details.montant,o.details.idSignataire,o.eltChosen.nom,o.eltChosen.email,"CAC",1).then(function(e){((e.status=201)||(e.status=200))&&console.log("Created in DB  "+e.data)},function(e){console.log("Erreur while saving ")}).finally(function(){}),o.successlaunch())},function(e){(e.status=409)&&(console.log("Conflict "),o.erreurConflict()),(response.status=400)&&console.log("BAd Request"),(response.status=401)&&(console.log("Non Authoris�"),this.erreurAuth()),(response.status=500)&&console.log("Erreur")}).finally(function(){})},o.createRPC=function(){"EC"==o.ec&&(o.details.id="ATEST12",o.details.annee="2016",o.details.montant="79000",o.details.iddeletion="ATEST11",o.details.idClient=e.getSAPCustomed(),o.details.raisonSociale="CITEO",o.details.idSignataire=o.eltChosen.uniquecsoecid,o.details.siren=602045288,o.IsModification&&(console.log("modification in progress EC"),o.modification().then(function(e){console.log("modification done EC"),console.log("deletion OK "+o.DeletionOK),1==o.DeletionOK&&(console.log("starting creation of new table EC"),o.createRPCOnlyEC(),console.log("starting creation of new table EC"))})),0==o.IsModification&&(console.log("creation EC"),o.createRPCOnlyEC())),"CAC"==o.ec&&(o.details.id="ATEST",o.details.annee="2016",o.details.montant="79000",o.iddeletion="TESTINGGG",o.details.idClient=e.getSAPCustomed(),o.details.raisonSociale="CITEO",o.details.idSignataire=o.eltChosen.uniquecsoecid,o.details.siren=602045288,o.IsModification&&(console.log("modification in progress CAC"),o.modification().then(function(e){console.log("modification done CAC"),console.log("deletion OK "+o.DeletionOK),1==o.DeletionOK&&(console.log("starting creation of new table CAC"),o.createRPCOnlyCAC(),console.log("starting creation of new table CAC"))})),0==o.IsModification&&(console.log("DONE creation CAC"),o.createRPCOnlyCAC()))},this.lancement=function(){o.modal_instance&&o.modal_instance.close(),o.loading=!0,o.modal_instance=l.open({template:a(39),scope:i,backdrop:"static",keyboard:!1})},this.changeMission=function(){o.modal_instance&&o.modal_instance.close(),o.loading=!0,o.IsModification=!0,o.modal_instance=l.open({template:a(40),scope:i,backdrop:"static",keyboard:!1})},o.fillDetails=function(e,t,a,l,i){o.details.id="TESTINGG",o.details.annee="2016",o.details.montant="79000",o.details.iddeletion="TESTINGG",o.details.mandataireKindToDelete="EC"}}},function(e,t){function a(e,t){var a=this;return a.GetExpertsByName=function(t,a){return e.GetExpertByName(t,a)},a.PostExpertsCreateProject=function(t,a,l,i,n,o,r){return e.ExpertsCreateProject(t,a,l,i,n,o,r)},a.ExpertsDeleteProjects=function(t){return console.log("deleting projects id "+t),e.ExpertsDeleteProject(t)},a.ExpertsGetProjects=function(t){return e.ExpertsGetProject(t)},a.GetCacByNames=function(t,a){return e.GetCacByName(t,a)},a.PostCacCreateProject=function(t,a,l,i,n,o,r){return e.CacCreateProject(t,a,l,i,n,o,r)},a.CacDeleteProjects=function(t){return e.CacDeleteProject(t)},a.getUserInfo=function(){return a.user=t.getUser(),a.user},a.getSAPCustomed=function(){var e="521846";if(a.test="eco",a.test.valueOf()=="eco".valueOf()&&e.toString().length<10)for(var t=10-e.length,l=0;l<t;l++)e="0"+e;return e},a.generateId=function(){var e=new Date,t=e.getDate(),a=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),l=a[e.getMonth()],i=e.getFullYear(),n=e.getHours()>12?e.getHours()-12:e.getHours()<10?"0"+e.getHours():e.getHours(),o=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),r=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return t<10&&(t="0"+t),e=i+l+t+n+o+r},a.getSiren=function(t){return e.getSiren(t)},a.SaveNewMissions=function(t,a,l,i,n,o,r,c,s){return e.SaveNewMission(t,a,l,i,n,o,r,c,s)},a.UpdateCancelMissions=function(t){return e.UpdateCancelMission(t)},a}e.exports=a},function(e,t,a){var l=a(94),i=a(95),n="declaration.recommandation";angular.module(n,[]),angular.module(n).controller("recommandationCtrl",["recommandationService",l]),angular.module(n).factory("recommandationService",["declarationResource",i]),angular.module(n).component("recommandation",{template:a(41),controller:"recommandationCtrl",controllerAs:"recommandationCtrl",bindings:{}}),e.exports=n},function(e,t){e.exports=function(e){var t=this;t.typesDeclarations=[],e.recommandations().then(function(e){for(var a in e.data)e.data[a].body&&e.data[a].field_code_type_decla&&(e.data[a].body[0].value=e.data[a].body[0].value.replace('src="','src="http://eead-dev-front.northeurope.cloudapp.azure.com/'),t.typesDeclarations.push({html:e.data[a].body[0].value,code:e.data[a].field_code_type_decla[0].value}))})}},function(e,t){function a(e){var t=this;return t.recommandations=e.getListTypesDeclaration,t}e.exports=a},function(e,t,a){var l=a(97),i=a(98),n="declaration.simulateur";angular.module(n,[]),angular.module(n).service("simulateurService",["declarationResource",i]),angular.module(n).controller("simulateurCtrl",["simulateurService","userService",l]),angular.module(n).component("simulateur",{template:a(46),controller:"simulateurCtrl",controllerAs:"simulateurCtrl",bindings:{}}),e.exports=n},function(e,t){e.exports=function(e,t){var a=this;a.selected_type,a.typesSimulateurs=[],a.typesSimulateursTextes=[],a.type,a.files_urls=[],this.$onInit=function(){a.orga=t.getOrgaCommerciale()},e.getContenuSimulateurExcel().then(function(e){for(var t in e.data)e.data[t].body&&e.data[t].title&&a.typesSimulateurs.push({titre:e.data[t].title[0].value,html:e.data[t].body[0].value,type:e.data[t].field_type_simulateur[0].value})}),e.getExcelLinks().then(function(e){for(var t in e.data)e.data[t].field_name&&e.data[t].field_upload_excel&&a.files_urls.push({type:e.data[t].field_name[0].value,url:e.data[t].field_upload_excel[0].url});console.log("elf.files_urls",a.files_urls)}),this.getTypeDeclarationParId=function(e){for(i=0;i<a.typesSimulateurs.length;i++)if(a.typesSimulateurs[i].type==e)return a.typesSimulateurs[i]},this.getExcelLinkByType=function(e){for(i=0;i<a.files_urls.length;i++)if(a.files_urls[i].type==e)return a.files_urls[i].url}}},function(e,t){function a(e){var t=this;return t.getContenuSimulateurExcel=e.getContenuSimulateurExcel,t.getExcelLinks=e.getExcelLinks,t}e.exports=a},function(e,t,a){var l=a(100),i=a(101),n="declaration.uvc.excel";angular.module(n,["ui.bootstrap"]),angular.module(n).service("excelService",["declarationResource","userService",i]),angular.module(n).controller("excelCtrl",["excelService","$uibModal","$scope","$location",l]),angular.module(n).component("uvcExcel",{template:a(49),controller:"excelCtrl",controllerAs:"excelCtrl",bindings:{}}),angular.module(n).directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,a,l){var i=e(l.fileModel),n=i.assign;a.bind("change",function(){t.$apply(function(){n(t,a[0].files[0])})})}}}]),angular.module(n).directive("validFile",function(){return{require:"ngModel",link:function(e,t,a,l){l.$setValidity("validFile",""!=t.val()),t.bind("change",function(){l.$setValidity("validFile",""!=t.val()),e.$apply(function(){l.$setViewValue(t.val()),l.$render()})})}}}),e.exports=n},function(e,t,a){(function(t){e.exports=function(e,l,i,n){function o(e,t){for(var a=t.length,l=0;l<a;l++)if(t[l]==e)return l;return-1}var r=this;r.RecapDeclaration,r.declarationFile,r.errors,r.loading,r.modal_instance,r.status_code,r.mails=[],r.step=1,r.mailinput,r.email_pattern=/^[a-zA-Z0-9_.-]*@[a-zA-Z0-9_.-]*\.[a-zA-Z]{2,}$/,r.type_declaration,r.annees_declaration={},r.annees_declaree={},r.selected_annee,r.submitted,r.file_name,r.user=e.getUserInfo(),r.id_dec,r.action,r.selected_motif="",r.motifs_corrective={},r.corrective_submitted,r.commentaire="",r.id_dec=n.search().id_dec,r.action=n.search().action,console.log("id_dec "+r.id_dec),console.log("action "+r.action),r.controleEcart=!1,this.loadData=function(){e.getAnneesDeclaration(r.user.numero_client).then(function(e){r.annees_declaration=e.data,
//!pour selectionner par d�faut l'ann�e n-1
r.selected_annee=r.annees_declaration[0].toString(),console.log("getAnneesDeclaration - ok : "+JSON.stringify(e))},function(e){console.error("getAnneesDeclaration - error : "+JSON.stringify(e))}).finally(function(){}),e.getAnneesDeclaree(r.user.numero_client).then(function(e){r.annees_declaree=e.data,console.log("getAnneesDeclaree - ok : "+JSON.stringify(e))},function(e){console.error("getAnneesDeclaree - error : "+JSON.stringify(e))}).finally(function(){}),e.getMotifsCorrective().then(function(e){r.motifs_corrective=e.data,console.log("getMotifsCorrective - ok : "+JSON.stringify(e))},function(e){console.error("getMotifsCorrective - error : "+JSON.stringify(e))}).finally(function(){})},"undefined"!=typeof r.id_dec&&"undefined"!=typeof r.action?"ajout_destinataire"==r.action?(e.findMailsAR(r.id_dec).then(function(e){console.log("id_dec findMailsAR:"+r.id_dec),console.log("action findMailsAR: "+r.action),r.mails=e.data,console.log("findMailsAR : "+JSON.stringify(e))},function(e){console.error("findMailsAR - error : "+JSON.stringify(e)),r.status_code=e.status,r.errors=e.data}).finally(function(){}),e.getRecap(r.id_dec).then(function(e){console.log("id_dec getRecap :"+r.id_dec),console.log("action getRecap : "+r.action),r.RecapDeclaration=e.data,console.log("getRecap : "+JSON.stringify(e))},function(e){console.error("getRecap - error : "+JSON.stringify(e)),r.status_code=e.status,r.errors=e.data}).finally(function(){}),r.step=2):"control_ecart"==r.action?(e.getRecap(r.id_dec).then(function(e){console.log("id_dec getRecap :"+r.id_dec),console.log("action getRecap : "+r.action),r.RecapDeclaration=e.data,console.log("getRecap : "+JSON.stringify(e))},function(e){console.error("getRecap - error : "+JSON.stringify(e)),r.status_code=e.status,r.errors=e.data}).finally(function(){}),r.step="controle_ecart",r.controleEcart=!0):r.loadData():(r.id_dec="",r.loadData()),this.submit_corrective=function(e){r.corrective_submitted=!0,e.$valid&&("uvc"==r.type_declaration?this.ExcelUpload(!0):this.SendExcelSectDetail(!0))},r.custom_error="",this.submit=function(e){if(r.submitted=!0,e.$valid){if(r.selected_annee<2016&&"uvc"==r.type_declaration)return r.custom_error="ERREUR_UVC",r.modal_instance=l.open({template:a(48),scope:i,backdrop:"static",keyboard:!1}),!1;if(r.selected_motif=sessionStorage.getItem("motif_corrective"),r.commentaire=sessionStorage.getItem("commentaire_corrective"),null!=r.selected_motif?r.flag_corrective=!0:r.flag_corrective=!1,o(r.selected_annee,r.annees_declaree)!=-1&&0==r.flag_corrective)return r.modal_instance=l.open({template:a(47),scope:i,backdrop:"static",keyboard:!1}),!1;"uvc"==r.type_declaration?this.ExcelUpload(r.flag_corrective):this.SendExcelSectDetail(r.flag_corrective)}},this.ExcelUpload=function(n){r.modal_instance&&r.modal_instance.close(),r.mails=[],r.loading=!0,r.modal_instance=l.open({template:a(50),scope:i,backdrop:"static",keyboard:!1}),e.sendDeclarationUvcXml(r.declarationFile,r.user.numero_client,r.user.id_declarant,r.selected_annee,n,r.selected_motif,r.commentaire,r.id_dec).then(function(e){console.log("submit - ok : "+JSON.stringify(e)),r.RecapDeclaration=e.data,r.loading=!1,r.status_code=200,t("#fileMobile").val(""),r.declarationFile=null},function(e){r.status_code=e.status,r.loading=!1,console.error("submit - error : "+JSON.stringify(e)),r.errors=e.data,t("#file_upload").val(""),r.declarationFile=null,403==e.status&&r.modal_instance.close()}).finally(function(){})},this.closeModal=function(){r.declarationFile=null,t("#file_upload").val(""),r.file_name=null,r.submitted=!1,r.type_declaration=null,r.selected_annee=null,r.modal_instance.close(),r.selected_motif="",r.corrective_submitted=!1,r.commentaire=""},this.valideModal=function(){e.getControleEcart(r.RecapDeclaration.IdDeclaration).then(function(e){console.log("retour getControleEcart",e),"OK"==e.data?(r.step="controle_ecart",r.controleEcart=!0):r.step=2},function(e){r.step=2}).finally(function(){}),r.modal_instance.close()},this.addMails=function(){o(r.mailinput,r.mails)==-1&&r.mails.push(r.mailinput),r.mailinput=""},this.removeMail=function(e){for(var t=this.mails.length-1;t>=0;t--)this.mails[t]===e&&this.mails.splice(t,1)},this.valideMails=function(){"undefined"!=typeof r.RecapDeclaration&&(r.modal_instance&&r.modal_instance.close(),r.loading=!0,r.modal_instance=l.open({template:a(51),scope:i,backdrop:"static",keyboard:!1}),e.sendDeclarationAR(r.mails.join(),r.RecapDeclaration.IdDeclaration,r.user.id_SF).then(function(e){console.log("SF: "+r.user.id_SF),console.debug("recap declaration 1 "+r.RecapDeclaration.IdDeclaration),console.debug("recap declaration join "+r.RecapDeclaration.IdDeclaration),console.debug("Decote "+r.RecapDeclaration.Decote),console.log("submit - ok : "+JSON.stringify(e)),r.loading=!1,r.status_code=200,r.declarationMails=null},function(e){r.status_code=e.status,r.loading=!1,console.error("submit - error : "+JSON.stringify(e)),r.errors=e.data,r.mails=null}).finally(function(){}),e.saveMailsAR(r.mails.join(),r.RecapDeclaration.IdDeclaration).then(function(e){r.status_code=200},function(e){r.status_code=e.status,r.errors=e.data,r.mails=null,r.loading=!1}).finally(function(){}))},this.saveMails=function(){e.saveMailsAR(r.mails.join(),r.RecapDeclaration.IdDeclaration).then(function(t){r.status_code=200,r.controleEcart?r.step="controle_ecart":e.goToHistoriqueDeclaration()},function(e){r.status_code=e.status,r.errors=e.data,r.mails=null,r.loading=!1}).finally(function(){})},this.SendExcelSectDetail=function(e){var t="";t="sectorielle"==r.type_declaration?"/OldApp/Declaration/EcdUpload?type=Secto&annee="+r.selected_annee:"/OldApp/Declaration/EcdUpload?type=Detaille&annee="+r.selected_annee;var a=document.getElementById("excel_upload_form_id");a.action=t,a.method="post",a.enctype="multipart/form-data";var l=document.createElement("input");l.setAttribute("name","flag_corrective"),l.setAttribute("value",e),l.setAttribute("type","hidden"),a.appendChild(l);var i=document.createElement("input");i.setAttribute("name","motif"),i.setAttribute("value",r.selected_motif),i.setAttribute("type","hidden"),a.appendChild(i);var n=document.createElement("input");n.setAttribute("name","commentaire"),n.setAttribute("value",r.commentaire),n.setAttribute("type","hidden"),a.appendChild(n),a.submit()},this.goBackFromControlEcart=function(){var t=document.referrer;t.indexOf("historique")!==-1?e.goBack():e.goToUploadExcel2(r.RecapDeclaration.IdDeclaration,r.RecapDeclaration.Annee)}}}).call(t,a(15))},function(e,t){function a(e,t){var a=this;return a.sendDeclarationUvcXml=e.sendDeclarationUvcXml,a.sendDeclarationAR=e.sendDeclarationAR,a.saveMailsAR=e.saveMailsAR,a.findMailsAR=e.findMailsAR,a.getRecap=e.getRecap,a.getAnneesDeclaration=e.getAnneesDeclaration,a.getAnneesDeclaree=e.getAnneesDeclaree,a.getMotifsCorrective=e.getMotifsCorrective,a.sendExcelSectDetail=e.sendExcelSectDetail,a.goToHistoriqueDeclaration=e.goToHistoriqueDeclaration,a.getControleEcart=e.getControleEcart,a.goToUploadExcel=e.goToUploadExcel,a.goToUploadExcel2=e.goToUploadExcel2,a.goBack=e.goBack,this.user={numero_client:void 0,id_declarant:void 0},this.getUserInfo=function(){return a.user.numero_client=t.getUserIdSAP(),a.user.id_declarant=t.getUserIdCorrespondent(),a.user.id_SF=t.getUserIdSF(),a.user},a}e.exports=a},function(e,t,a){var l=a(103),i=a(99),n="declaration.uvc";angular.module(n,[l,i]),e.exports=n},function(e,t,a){var l=a(104),i=a(105),n="declaration.uvc.web";angular.module(n,["ui.bootstrap"]);angular.module(n).service("webService",["declarationResource","userService",i]),angular.module(n).controller("webCtrl",["webService","$uibModal","$filter","$location","$scope",l]),angular.module(n).component("uvcWeb",{template:a(55),controller:"webCtrl",controllerAs:"ctrl"}),angular.module(n).filter("decimalSeparator",function(){return function(e){try{var t=e.toLocaleString("fr-FR");return 1==t.split(",").length?t+=",00":2==t.split(",").length&&1==t.split(",")[1].length&&(t+="0"),t}catch(t){return e}}}),angular.module(n).filter("thousandSeparator",function(){return function(e){try{var t=e.toLocaleString("fr-FR");return t}catch(t){return e}}}),e.exports=n},function(e,t,a){e.exports=function(e,t,l,i,n){var o=this;o.error=!1,o.search_field="",o.sort_field="date",o.page_index=0,o.decote_touched=!1,o.erreurs=!1,o.selectedUVC=void 0,o.uvc=void 0,o.modal_instance,o.submitted=!1,o.contribution_totale=0,o.orgaCommerciale=e.orgaCommerciale,this.$onInit=function(){o.id_declaration=i.search().id_declaration,o.valide=!1,"undefined"==typeof o.id_declaration?o.id_declaration="":e.getRecap(o.id_declaration).then(function(e){o.annee=e.data.Annee,o.contribution_totale=e.data.ContributionTotale,o.hideForm(),o.getListUVC_firstLoad()},function(e){o.error=!0,console.log("self.error = true")}).finally(function(){})},o.getListUVC_firstLoad=function(){e.getListUVC_firstLoad(o.id_declaration).then(function(e){console.log("getListUVC_firstLoad - ok",e.data),o.listUvc=e.data.lignes_uvc,o.valide=e.data.valide,o.uvc_en_cours=e.data.uvc_en_cours,o.pages=[];for(var t=0;t<e.data.pages;t++)o.pages.push(t);if(o.valide)e.data.lignes_uvc.length>0&&(o.selectedUVC=e.data.lignes_uvc[0],o.uvc=angular.copy(o.selectedUVC),o.vue="lecture");else{o.page_index=e.data.page-1,console.log("response.data.uvc_en_cours",e.data.uvc_en_cours);for(var t=0,a=e.data.lignes_uvc.length;t<a;t++)e.data.lignes_uvc[t].LigneDeclarationId==e.data.id_uvc_en_cours&&(o.selectedUVC=e.data.lignes_uvc[t]);console.log("self.selectedUVC",o.selectedUVC),o.uvc=angular.copy(o.selectedUVC),o.vue="ecriture"}},function(e){console.error("getListUVC_firstLoad - error : "+JSON.stringify(e))}).finally(function(){})},o.getlistUvc=function(t,a){var l=document.querySelector("div.uvc_form");l.scrollTop=0,e.getlistUvcService(o.id_declaration,o.page_index,o.sort_field,o.search_field,a).then(function(e){console.log("getlistUvc - ok",e.data),o.listUvc=e.data.lignes_uvc,o.valide=e.data.valide,o.uvc_en_cours=e.data.uvc_en_cours,o.pages=[];for(var l=0;l<e.data.pages;l++)o.pages.push(l);a?(o.page_index=o.pages.length-1,o.selectedUVC=e.data.lignes_uvc[e.data.lignes_uvc.length-1],o.uvc=angular.copy(o.selectedUVC)):null!=t&&(o.selectedUVC=t,o.uvc=angular.copy(t)),console.log("self.selectedUVC",o.selectedUVC),console.log("self.uvc",o.uvc)},function(e){console.error("getlistUvcService - error : "+JSON.stringify(e))}).finally(function(){})},o.editUvc=function(t){e.InvalidateUvcWeb(t.LigneDeclarationId).then(function(e){o.selectUvc(t),o.vue="ecriture",o.selectedUVC.Valider=!1,o.valide=!1,o.uvc_en_cours=!0},function(e){console.error("selectUvc - error : "+JSON.stringify(e))}).finally(function(){})},o.selectUvc=function(e){o.vue="lecture";var t=document.querySelector("div.uvc_form");t.scrollTop=0,o.submitted=!1,o.selectedUVC=e,o.selectedUVC.valider=!1,o.uvc=angular.copy(e)},o.AddUvc=function(){o.uvc_en_cours?this.Alert():(o.vue="ecriture",e.AddUvcWeb(o.id_declaration).then(function(e){o.sort_field="date",o.search_field="",o.getlistUvc(e.data,!0),console.log("AddUvc - ok")},function(e){console.error("AddUvc - error : "+JSON.stringify(e))}).finally(function(){}))},o.copyUvc=function(t){o.valide?(o.vue="ecriture",e.copyUvcService(t).then(function(e){o.sort_field="date",o.search_field="",o.getlistUvc(e.data,!0),console.log("copyUvc - ok")},function(e){console.error("copyUvc - error : "+JSON.stringify(e))}).finally(function(){})):alert(l("translate")("errors.declaration.UVC_ENCOURS"))},o.search=function(){o.hideForm(),o.page_index=0,o.getlistUvc(null,!1)},o.sort=function(){o.hideForm(),o.page_index=0,o.getlistUvc(null,!1)},o.setPage=function(e){o.hideForm(),o.page_index=e,o.getlistUvc(null,!1)},o.deleteUvc=function(e,t){o.id_ligne_to_delete=e,o.index_ligne_to_delete=t,this.openDeleteModal()},o.confirmDeleteUvc=function(){this.closeModal();var t=o.index_ligne_to_delete,a=o.id_ligne_to_delete;console.log("delete ok",t),o.hideForm(),e.deleteUvc(a).then(function(e){console.debug("response "+e.data),o.contribution_totale=e.data.Contribution_Totale,0==t&&1==o.listUvc.length&&o.page_index>0&&(o.page_index=o.page_index-1),o.getlistUvc(null,!1)},function(e){}).finally(function(){})},e.getProduits().then(function(e){o.produits=[];for(var t in e.data)o.produits.push({code:e.data[t],libelle:l("translate")("produits."+e.data[t])});console.log("getProduits - ok")},function(e){console.error("getProduits - error : "+JSON.stringify(e))}).finally(function(){}),this.openModal=function(){o.modal_instance=t.open({template:a(54),scope:n,backdrop:"static",keyboard:!1})},this.closeModal=function(){o.code_produit_tmp="",o.modal_instance.close()},this.openDeleteModal=function(){o.modal_instance=t.open({template:a(53),scope:n,backdrop:"static",animation:!1,keyboard:!1})},this.Alert=function(){o.modal_instance=t.open({template:a(52),scope:n,backdrop:"static",animation:!1,keyboard:!1})},this.setProduit=function(){o.uvc.ProduitId=o.code_produit_tmp,o.code_produit_tmp="",o.modal_instance.close()},this.CalculerNbBobinesAlimentaire=function(){!o.uvc.Spec||"150000"!=o.uvc.ProduitId&&"160000"!=o.uvc.ProduitId||e.CalculerNbBobinesAlimentaire(o.uvc).then(function(e){o.uvc.NbUvcEmballMenagers=e.data.NbUvcEmballMenagers,console.log("CalculerNbBobinesAlimentaire:",e.data)},function(e){console.error("CalculerNbBobinesAlimentaire - error : "+JSON.stringify(e))}).finally(function(){})},this.ValidateUvc=function(t){if(o.submitted=!0,t.$valid)o.erreurs=!1,console.log("self.uvc",o.uvc),e.UpdateUvcWeb(o.uvc).then(function(e){o.uvc.Valider=!0,o.uvc_en_cours=!1,o.contribution_totale=e.data.Contribution_Totale,o.uvc.ContribTotaleLigne=e.data.Contribution_Totale_ligne,o.uvc.ContribUnitTotale=e.data.Contribution_Untaire_Totale_ligne,o.selectedUVC.Libelle=o.uvc.Libelle,o.selectedUVC.ContribTotaleLigne=o.uvc.ContribTotaleLigne,o.selectedUVC.ContribUnitTotale=o.uvc.ContribUnitTotale,o.selectedUVC.Valider=!0,o.selectedUVC.ProduitId=o.uvc.ProduitId,o.selectedUVC.Spec=o.uvc.Spec,o.selectedUVC.Decote=o.uvc.Decote,o.selectedUVC.MalusPerturbateur=o.uvc.MalusPerturbateur,o.selectedUVC.MalusSansFiliere=o.uvc.MalusSansFiliere,o.selectedUVC.NbUvcEmballMenagers=o.uvc.NbUvcEmballMenagers,o.selectedUVC.NbUvcEmballNonMenagers=o.uvc.NbUvcEmballNonMenagers,o.selectedUVC.BonusReductionId=o.uvc.BonusReductionId,o.selectedUVC.BonusSensibilisationId=o.uvc.BonusSensibilisationId,o.selectedUVC.acier=o.uvc.acier,o.selectedUVC.alum=o.uvc.alum,o.selectedUVC.pcNonBriq=o.uvc.pcNonBriq,o.selectedUVC.briq=o.uvc.briq,o.selectedUVC.autrePlas=o.uvc.autrePlas,o.selectedUVC.flacon=o.uvc.flacon,o.selectedUVC.petClair=o.uvc.petClair,o.selectedUVC.verre=o.uvc.verre,o.selectedUVC.autre=o.uvc.autre,"adelphe"==o.orgaCommerciale&&(o.selectedUVC.Bois=o.uvc.Bois,o.selectedUVC.Textile=o.uvc.Textile),console.log("UpdateUvcWeb - ok",e.data),o.valide=!0,o.vue="lecture",o.submitted=!1,o.uvc_web_form_id.uvc_libelle.$touched=!1,o.uvc_web_form_id.autre.$touched=!1,o.uvc_web_form_id.verre.$touched=!1,o.uvc_web_form_id.autrePlas.$touched=!1,o.uvc_web_form_id.flacon.$touched=!1,o.uvc_web_form_id.petClair.$touched=!1,o.uvc_web_form_id.briq.$touched=!1,o.uvc_web_form_id.pcNonBriq.$touched=!1,o.uvc_web_form_id.alum.$touched=!1,o.uvc_web_form_id.acier.$touched=!1;var t=document.querySelector("div.uvc_form");t.scrollTop=0},function(e){console.error("UpdateUvcWeb - error : "+JSON.stringify(e))}).finally(function(){});else{var a=document.querySelector("div.uvc_form");a.scrollTop=0,o.erreurs=!0}},this.goBack=function(){e.goBack()},this.CancelEdition=function(){e.CancelEdition(o.uvc.LigneDeclarationId).then(function(e){console.log("CancelEdition - ok",e.data),o.selectedUVC.Valider=!0,o.uvc=angular.copy(o.selectedUVC),o.valide=!0,o.uvc_en_cours=!1,o.vue="lecture",o.submitted=!1,o.uvc_web_form_id.uvc_libelle.$touched=!1,o.uvc_web_form_id.autre.$touched=!1,o.uvc_web_form_id.verre.$touched=!1,o.uvc_web_form_id.autrePlas.$touched=!1,o.uvc_web_form_id.flacon.$touched=!1,o.uvc_web_form_id.petClair.$touched=!1,o.uvc_web_form_id.briq.$touched=!1,o.uvc_web_form_id.pcNonBriq.$touched=!1,o.uvc_web_form_id.alum.$touched=!1,o.uvc_web_form_id.acier.$touched=!1;var t=document.querySelector("div.uvc_form");t.scrollTop=0},function(e){console.error("CancelEdition - error : "+JSON.stringify(e))}).finally(function(){})},this.hideForm=function(){o.uvc={Libelle:"",ProduitId:"",Spec:!1,Decote:!1,MalusPerturbateur:!1,MalusSansFiliere:!1,NbUvcEmballMenagers:"",NbUvcEmballNonMenagers:"",BonusReductionId:0,BonusSensibilisationId:0,acier:0,alum:0,pcNonBriq:0,briq:0,autrePlas:0,flacon:0,petClair:0,verre:0,autre:0,Textile:0,Bois:0,ContribUnitTotale:0,ContribTotaleLigne:0,Valider:!1},o.selectedUVC=void 0,o.vue="ecriture",o.submitted=!1,o.uvc_web_form_id.uvc_libelle.$setUntouched()},this.hideExposant=function(e){return void 0==o.uvc||""==e||null==e},this.Continue=function(){e.ValidateDeclaWeb(o.id_declaration).then(function(t){e.goToMarquesSocietes(o.id_declaration)},function(e){}).finally(function(){})},this.list_bonus_reduction=[{id:1,libelle:l("translate")("bonus_reduction.1")},{id:4,libelle:l("translate")("bonus_reduction.4")},{id:5,libelle:l("translate")("bonus_reduction.5")},{id:6,libelle:l("translate")("bonus_reduction.6")},{id:61,libelle:l("translate")("bonus_reduction.61")},{id:64,libelle:l("translate")("bonus_reduction.64")},{id:65,libelle:l("translate")("bonus_reduction.65")},{id:66,libelle:l("translate")("bonus_reduction.66")}],this.list_bonus_sensibilisation=[{id:1,libelle:l("translate")("bonus_sensibilisation.1")},{id:2,libelle:l("translate")("bonus_sensibilisation.2")},{id:3,libelle:l("translate")("bonus_sensibilisation.3")},{id:4,libelle:l("translate")("bonus_sensibilisation.4")},{id:5,libelle:l("translate")("bonus_sensibilisation.5")},{id:6,libelle:l("translate")("bonus_sensibilisation.6")},{id:7,libelle:l("translate")("bonus_sensibilisation.7")}],this.list_produits_spec=[{id:"130000",libelle:l("translate")("produits_spec.130000")},{id:"140000",libelle:l("translate")("produits_spec.140000")},{id:"150000",libelle:l("translate")("produits_spec.150000")},{id:"160000",libelle:l("translate")("produits_spec.160000")}],this.MateriauxValide=function(){return void 0!=o.uvc&&(""!=o.uvc.acier&&0!=o.uvc.acier&&null!=o.uvc.acier||""!=o.uvc.alum&&0!=o.uvc.alum&&null!=o.uvc.alum||""!=o.uvc.pcNonBriq&&0!=o.uvc.pcNonBriq&&null!=o.uvc.pcNonBriq||""!=o.uvc.briq&&0!=o.uvc.briq&&null!=o.uvc.briq||""!=o.uvc.autrePlas&&0!=o.uvc.autrePlas&&null!=o.uvc.autrePlas||""!=o.uvc.flacon&&0!=o.uvc.flacon&&null!=o.uvc.flacon||""!=o.uvc.petClair&&0!=o.uvc.petClair&&null!=o.uvc.petClair||""!=o.uvc.verre&&0!=o.uvc.verre&&null!=o.uvc.verre||""!=o.uvc.autre&&0!=o.uvc.autre&&null!=o.uvc.autre||"adelphe"==o.orgaCommerciale&&""!=o.uvc.Bois&&0!=o.uvc.Bois&&null!=o.uvc.Bois||"adelphe"==o.orgaCommerciale&&""!=o.uvc.Textile&&0!=o.uvc.Textile&&null!=o.uvc.Textile)},this.ProduitSpecValide=function(){if(void 0==o.uvc||"150000"!=o.uvc.ProduitId&&"160000"!=o.uvc.ProduitId)return!0;var e=0;return""!=o.uvc.alum&&0!=o.uvc.alum&&null!=o.uvc.alum&&e++,""!=o.uvc.pcNonBriq&&0!=o.uvc.pcNonBriq&&null!=o.uvc.pcNonBriq&&e++,""!=o.uvc.autrePlas&&0!=o.uvc.autrePlas&&null!=o.uvc.autrePlas&&e++,e>1?(o.ProduitSpecError="1",!1):0==e?(o.ProduitSpecError="2",!1):!(""!=o.uvc.acier&&0!=o.uvc.acier&&null!=o.uvc.acier||""!=o.uvc.acier&&0!=o.uvc.acier&&null!=o.uvc.acier||""!=o.uvc.briq&&0!=o.uvc.briq&&null!=o.uvc.briq||""!=o.uvc.flacon&&0!=o.uvc.flacon&&null!=o.uvc.flacon||""!=o.uvc.petClair&&0!=o.uvc.petClair&&null!=o.uvc.petClair||""!=o.uvc.verre&&0!=o.uvc.verre&&null!=o.uvc.verre||"adelphe"==o.orgaCommerciale&&""!=o.uvc.Bois&&0!=o.uvc.Bois&&null!=o.uvc.Bois||"adelphe"==o.orgaCommerciale&&""!=o.uvc.Textile&&0!=o.uvc.Textile&&null!=o.uvc.Textile)||(o.ProduitSpecError="3",!1)},this.ShowMateriauPreview=function(e){return console.log("materiau:",e),console.log("ShowMateriauPreview:",void 0!=o.uvc&&""!=e&&0!=e&&null!=e),void 0!=o.uvc&&""!=e&&0!=e&&null!=e}}},function(e,t){function a(e,t){var a=this;return a.getListUVC_firstLoad=e.getListUVC_firstLoad,a.getlistUvcService=e.getListUvc,a.AddUvcWeb=e.AddUvcWeb,a.copyUvcService=e.copyUvc,a.deleteUvc=e.deleteUvc,a.goBack=e.goBack,a.checkEtape=e.checkEtape,a.getProduits=e.getProduits,a.getProduitsSpec=e.getProduitsSpec,a.UpdateUvcWeb=e.UpdateUvcWeb,a.CancelEdition=e.CancelEdition,a.InvalidateUvcWeb=e.InvalidateUvcWeb,a.ValidateDeclaWeb=e.ValidateDeclaWeb,a.goToMarquesSocietes=e.goToMarquesSocietes,a.getRecap=e.getRecap,a.CalculerNbBobinesAlimentaire=e.CalculerNbBobinesAlimentaire,this.orgaCommerciale=t.getOrgaCommerciale(),this.user={numero_client:void 0,id_declarant:void 0},this.getUserInfo=function(){return a.user.numero_client=t.getUserIdSAP(),a.user.id_declarant=t.getUserIdCorrespondent(),a.user},a}e.exports=a},function(e,t,a){var l=a(107),i=a(108),n="declaration.validation";angular.module(n,["ui.bootstrap"]),angular.module(n).service("validationService",["declarationResource","userService",i]),angular.module(n).controller("validationCtrl",["validationService","$uibModal","$scope","$location",l]),angular.module(n).component("validation",{template:a(57),controller:"validationCtrl",controllerAs:"validationCtrl",bindings:{}}),angular.module(n).directive("materiau",function(){return{require:"ngModel",link:function(e,t,a,l){l.$formatters.push(function(e){return 0==e?"":e})}}}),e.exports=n},function(e,t,a){e.exports=function(e,t,l,i){function n(e,t){for(var a=t.length,l=0;l<a;l++)if(t[l]==e)return l;return-1}var o=this;o.RecapDeclaration,o.errors,o.loading=!0,o.modal_instance,o.status_code,o.mails=[],o.step=1,o.mailinput,o.email_pattern=/^[a-zA-Z0-9_.-]*@[a-zA-Z0-9_.-]*\.[a-zA-Z]{2,}$/,o.user=e.getUserInfo(),o.id_declaration=i.search().id_declaration,"undefined"==typeof o.id_declaration&&(o.id_declaration=""),console.log("IF self.id_declaration",o.id_declaration),this.$onInit=function(){e.getRecap(o.id_declaration).then(function(e){console.log("id_dec getRecap :"+o.id_declaration),o.RecapDeclaration=e.data,console.log("getRecap : "+JSON.stringify(e))},function(e){console.error("getRecap - error : "+JSON.stringify(e)),o.status_code=e.status,console.log("On init status_code: "+o.status_code),console.log("getRecap: "+o.status_code),o.errors=e.data}).finally(function(){})},this.addMails=function(){n(o.mailinput,o.mails)==-1&&o.mails.push(o.mailinput),o.mailinput=""},this.removeMail=function(e){for(var t=this.mails.length-1;t>=0;t--)this.mails[t]===e&&this.mails.splice(t,1)},this.valideMails=function(){o.modal_instance=t.open({template:a(56),scope:l,backdrop:"static",keyboard:!1}),e.sendDeclarationAR(o.mails.join(),o.id_declaration,o.user.id_SF).then(function(t){e.saveMailsAR(o.mails.join(),o.id_declaration).then(function(e){o.status_code=200,o.loading=!1,o.declarationMails=null},function(e){o.status_code=e.status,console.log("Validemails saveMailsAR status code: "+o.status_code),o.errors=e.data,o.mails=null,o.loading=!1}).finally(function(){})},function(e){403==e.status?o.modal_instance.close():(o.status_code=e.status,console.log("Validemails sendDeclarationAR status code: "+o.status_code),o.loading=!1,console.error("submit - error : "+JSON.stringify(e)),o.errors=e.data,o.mails=null)}).finally(function(){})},this.saveMails=function(){e.saveMailsAR(o.mails.join(),o.id_declaration).then(function(t){o.status_code=200,console.log("saveMails status code: "+o.status_code),e.goBack()},function(e){o.status_code=e.status,console.log("saveMails: "+o.status_code),o.errors=e.data,o.mails=null}).finally(function(){})}}},function(e,t){function a(e,t){var a=this;return a.sendDeclarationUvcXml=e.sendDeclarationUvcXml,a.sendDeclarationAR=e.sendDeclarationAR,a.saveMailsAR=e.saveMailsAR,a.findMailsAR=e.findMailsAR,a.getRecap=e.getRecap,a.getAnneesDeclaration=e.getAnneesDeclaration,a.getAnneesDeclaree=e.getAnneesDeclaree,a.getMotifsCorrective=e.getMotifsCorrective,a.sendExcelSectDetail=e.sendExcelSectDetail,a.goToHistoriqueDeclaration=e.goToHistoriqueDeclaration,a.checkEtape=e.checkEtape,a.goBack=e.goBack,this.user={numero_client:void 0,id_declarant:void 0},this.getUserInfo=function(){return a.user.numero_client=t.getUserIdSAP(),a.user.id_declarant=t.getUserIdCorrespondent(),a.user.id_SF=t.getUserIdSF(),a.user},a}e.exports=a},function(e,t,a){var l=a(93),i=a(102),n=a(69),o=a(84),r=a(87),c=a(66),s=a(96),d=a(81),u=a(75),p=a(113),m=a(90),v=a(106),_=a(72),g=a(1),f=a(110),b=a(78);angular.module("declaration.views",[o,l,i,n,r,c,s,u,p,m,v,d,_,f,g,b])},function(e,t,a){var l=a(111),i=a(112),n="declaration.widgetrpc";angular.module(n,[]);angular.module(n,[]);angular.module(n).service("widgetrpcService",["declarationResource","userService","$q",i]),angular.module(n).controller("widgetrpcCtrl",["widgetrpcService","userService",l]),angular.module(n).component("widgetrpc",{template:a(58),controller:"widgetrpcCtrl",controllerAs:"widgetrpcCtrl",bindings:{}}),e.exports=n},function(e,t){e.exports=function(e,t){var a=this;const l="block-bloc-4-declaration-faq-declaration",i="bloc-widgetrpc-modified",n="bloc-widgetfaq-modified",o="adelphe",r="pointer",c="/mon-espace/declaration/documents/rpc";var a=this;this.$onInit=function(){t.getOrgaCommerciale()==o?a.adelpheContextFlag=!0:a.ecoContextFlag=!0,console.log("on Init widget rpc !!"),e.checkRPC().then(function(){a.runRpcFlag=e.runRpcFlag,s(a.runRpcFlag),a.faqFlag=!a.runRpcFlag,console.log("rpc widget controller flag : ",a.runRpcFlag)})};var s=function(e){e?d(l,i,e):d(l,n)},d=function(e,t,a){var l=document.getElementById(e);l&&(l.id=t),a&&(l.classList.add(r),l.onclick=function(){window.location=c})}}},function(e,t){function a(e,t,a){const l="VALIDEE",i=6e4,n=1,o=2;var r=this,c=t.getUserIdSAP();this.checkRPC=function(){var i=a.defer();return e.getHistoriqueDeclaration(c,"page").then(function(a){var n=(new Date).getFullYear()-1;r.lastDeclaration=t.searchInArray(a.data,function(e){return e.Annee==n&&e.Statut==l}),console.log("declaration historique : ",a,r.lastDeclaration,n),e.getRpcs(c).then(function(e){var t=e.data;console.log("get rpcs success : ",t),r.runRpcFlag=s(r.lastDeclaration,t),console.log("rpc widget Service flag : ",r.runRpcFlag)},function(e){r.runRpcFlag=!1,console.log("get rpcs failure : ",e)}).finally(function(){i.resolve()})},function(e){r.runRpcFlag=!1,console.log("get declaration historique failure : ",e),i.resolve()}),i.promise};var s=function(e,t){if(console.log("in verify data for rpc function : ",e,t),console.log("valid status : ",l,"montant max : ",i),!e||e.ContributionTotale<i)return!1;for(var a=0;a<t.length;a++){var r=t[a];if(console.log("rpc value : ",r),r.Statut==n||r.Statut==o)return!1}return!0};return r.user={numero_client:void 0,id_declarant:void 0,id_SF:void 0},this.getUserInfo=function(){return r.user.numero_client=t.getUserIdSAP(),r.user.id_declarant=t.getUserIdCorrespondent(),r.user.id_SF=t.getUserIdSF(),r.user},r}e.exports=a},function(e,t,a){var l=a(114),i=a(115),n="declaration.widgetupload";angular.module(n,[]);angular.module(n,[]);angular.module(n).service("widgetuploadService",["declarationResource","userService",i]),angular.module(n).controller("widgetuploadCtrl",["widgetuploadService","$location","$uibModal","$scope","$document",l]),angular.module(n).component("widgetupload",{template:a(59),controller:"widgetuploadCtrl",controllerAs:"widgetuploadCtrl",bindings:{}}),e.exports=n},function(e,t){e.exports=function(e,t,a,l,i,n){var o=this;o.modal_instance,o.AnneesContractualisation,o.user=e.getUserInfo();const r="block-bloc-6-declaration-depot-fichier-excel";this.$onInit=function(){var t=new Date,a=t.getFullYear();e.getAnneesContractualisation(o.user.numero_client).then(function(e){if(o.AnneesContractualisation=e.data,console.log("$onInit : annee en cours:",a),console.log("$onInit _ promise : AnneesContractualisation :",o.AnneesContractualisation),o.AnneesContractualisation<a){console.log("$onInit _ promise : display block-bloc-6-declaration-depot-fichier-excel");var t=document.getElementById(r);t&&(t.style.cssText="display: block !important"),console.log(t)}else console.log("$onInit _ promise : hidde block-bloc-6-declaration-depot-fichier-excel")},function(e){console.error("$onInit _ promise : error",e)}).finally(function(){})}}},function(e,t){function a(e,t){var a=this;return a.getAnneesContractualisation=e.getAnneesContractualisation,a.user={numero_client:void 0,id_declarant:void 0,id_SF:void 0},this.getUserInfo=function(){return a.user.numero_client=t.getUserIdSAP(),a.user.id_declarant=t.getUserIdCorrespondent(),a.user.id_SF=t.getUserIdSF(),a.user},a}e.exports=a},function(e,t,a){function l(e){return a(i(e))}function i(e){return n[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var n={"./popInCodeActivationError.html":42,"./popInCodeActivationExpired.html":43,"./popInCodeActivationLocked.html":44,"./popInCodeActivationSuccess.html":45,"./popin1.html":5,"./popin1AuthenticationProblem.html":6,"./popin1erreur.html":7,"./popin1erreurErreurSurvenue.html":8,"./popin1erreurImpossibleModifier.html":9,"./popin2.html":10,"./popin3.html":11,"./popin4ChangeMission.html":12,"./popinCodeActivation.html":13,"./rpc":1,"./rpc.html":14,"./rpc.js":1,"./rpcCtrl":2,"./rpcCtrl.js":2,"./rpcService":3,"./rpcService.js":3};l.keys=function(){return Object.keys(n)},l.resolve=i,e.exports=l,l.id=116}]);